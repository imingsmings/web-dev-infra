<!doctype html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="icon" href="/favicon-48x48.cbbd161b.png"/><link rel="apple-touch-icon" href="/apple-touch-icon.6803c6f0.png"/><meta name="theme-color" content="#ffffff"/><link rel="manifest" href="/manifest.56b1cedc.json"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"/><title>Updating extensions for Firefox 3 - Mozilla | MDN</title><link rel="alternate" type="application/rss+xml" title="MDN Blog RSS Feed" href="https://developer.mozilla.org/en-US/blog/rss.xml" hreflang="en" /><meta name="robots" content="noindex, nofollow"><meta name="description" content="This article provides information that will be useful to developers that wish to update their extensions to work properly under Firefox 3."/><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/3/Updating_extensions"/><meta property="og:title" content="Updating extensions for Firefox 3 - Mozilla | MDN"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:description" content="This article provides information that will be useful to developers that wish to update their extensions to work properly under Firefox 3."/><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:height" content="1080"/><meta property="og:image:width" content="1920"/><meta property="og:image:alt" content="The MDN Web Docs logo, featuring a blue accent color, displayed on a solid black background."/><meta property="og:site_name" content="MDN Web Docs"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="MozDevNet"/><link rel="canonical" href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/3/Updating_extensions"/><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.on-github,.page-footer,.place,.sidebar,.top-banner,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script defer="defer" src="/static/js/main.8204838d.js"></script><link href="/static/css/main.3551aa81.css" rel="stylesheet"></head><body><script>if(document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0}),window&&document.documentElement){const t={light:"#ffffff",dark:"#1b1b1b"};try{const e=window.localStorage.getItem("theme");e&&(document.documentElement.className=e,document.documentElement.style.backgroundColor=t[e])}catch(t){console.warn("Unable to read theme from localStorage",t)}}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper   document-page"><div class="top-banner loading"><section class="place top container"></section></div><div class="sticky-header-container"><header class="top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zm10.4 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zm10.4 0v92.1H91V0h10.4z" class="logo-m"></path><path d="M627.9 95.6h67v8.8h-67v-8.8z" class="logo-_"></path><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zm34.9 20c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zm51 2.4c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zm69.2 18.5h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm53.1-1.4c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zm45 5.8c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zm34.7 1.9c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z" class="logo-text"></path></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container "><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="/en-US/docs/Web/API" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container "><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/blog/">Blog</a></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/play">Play</a></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/plus/ai-help">AI Help <sup class="new beta">Beta</sup></a></li></ul></nav><div class="header-search"><form action="/en-US/search" class="search-form search-widget" id="top-nav-search-form" role="search"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input aria-activedescendant="" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-expanded="false" aria-labelledby="top-nav-search-label" autoComplete="off" id="top-nav-search-input" role="combobox" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""/><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="?next=%2Fen-US%2Fdocs%2FMozilla%2FFirefox%2FReleases%2F3%2FUpdating_extensions" class="login-link" rel="nofollow">Log in</a></li><li><a href="?next=%2Fen-US%2Fdocs%2FMozilla%2FFirefox%2FReleases%2F3%2FUpdating_extensions" target="_self" class="button primary mdn-plus-subscribe-link"><span class="button-wrap">Sign up for free</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Mozilla"><span property="name">Mozilla</span></a><meta property="position" content="1"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Mozilla/Firefox"><span property="name">Firefox</span></a><meta property="position" content="2"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Mozilla/Firefox/Releases"><span property="name">Firefox release notes for developers</span></a><meta property="position" content="3"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Mozilla/Firefox/Releases/3"><span property="name">Firefox 3 for developers</span></a><meta property="position" content="4"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/en-US/docs/Mozilla/Firefox/Releases/3/Updating_extensions"><span property="name">Updating extensions for Firefox 3</span></a><meta property="position" content="5"/></li></ol></nav></div></div></div><div class="main-wrapper"><div class="sidebar-container"><aside id="sidebar-quicklinks" class="sidebar" data-macro="FirefoxSidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><header class="sidebar-actions"><section class="sidebar-filter-container"><div class="sidebar-filter "><label id="sidebar-filter-label" class="sidebar-filter-label" for="sidebar-filter-input"><span class="icon icon-filter"></span><span class="visually-hidden">Filter sidebar</span></label><input id="sidebar-filter-input" autoComplete="off" class="sidebar-filter-input-field false" type="text" placeholder="Filter" value=""/><button type="button" class="button action has-icon clear-sidebar-filter-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear filter input</span></span></button></div></section></header><div class="sidebar-inner-nav"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#step_1_update_the_install_manifest">Step 1: Update the install manifest</a></li><li class="document-toc-item "><a class="document-toc-link" href="#step_2_ensure_you_are_providing_secure_updates">Step 2: Ensure you are providing secure updates</a></li><li class="document-toc-item "><a class="document-toc-link" href="#step_3_deal_with_changed_apis">Step 3: Deal with changed APIs</a></li><li class="document-toc-item "><a class="document-toc-link" href="#step_4_check_for_relevant_chrome_changes">Step 4: Check for relevant chrome changes</a></li><li class="document-toc-item "><a class="document-toc-link" href="#other_changes">Other changes</a></li></ul></section></div></div><div class="sidebar-body">
  <ol>
    <li class="toggle">
        <details>
            <summary>Firefox releases</summary>
            <ol>
              <li><a href="/en-US/docs/Mozilla/Firefox/Releases">Firefox release notes for developers</a></li>
              <li><a href="/en-US/docs/Mozilla/Firefox/Experimental_features">Experimental features in Firefox</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Add-ons</summary>
            <ol>
              <li><a href="/en-US/Add-ons/WebExtensions">Browser extensions</a></li>
              <li><a href="/en-US/Add-ons/Themes">Themes</a></li>
            </ol>
        </details>
    </li>
    <li>
      <a href="https://firefox-source-docs.mozilla.org/">Firefox documentation</a>
    </li>
  </ol>
</div></div></nav></aside><div class="toc-container"><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#step_1_update_the_install_manifest">Step 1: Update the install manifest</a></li><li class="document-toc-item "><a class="document-toc-link" href="#step_2_ensure_you_are_providing_secure_updates">Step 2: Ensure you are providing secure updates</a></li><li class="document-toc-item "><a class="document-toc-link" href="#step_3_deal_with_changed_apis">Step 3: Deal with changed APIs</a></li><li class="document-toc-item "><a class="document-toc-link" href="#step_4_check_for_relevant_chrome_changes">Step 4: Check for relevant chrome changes</a></li><li class="document-toc-item "><a class="document-toc-link" href="#other_changes">Other changes</a></li></ul></section></div></nav></aside></div></div><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><header><h1>Updating extensions for Firefox 3</h1></header><div class="section-content"><p>This article provides information that will be useful to developers that wish to update their extensions to work properly under Firefox 3.</p>
<p>Before going further, there's one helpful hint we can offer: if the only change your extension requires is a bump to the <code>maxVersion</code> field in its install manifest, and you host your extension at <a href="https://addons.mozilla.org" class="external" target="_blank">addons.mozilla.org</a>, you don't actually need to upload a new version of your extension! Use the Developer Control Panel at AMO to adjust the <code>maxVersion</code>. You can avoid having to have your extension re-reviewed this way.</p></div><section aria-labelledby="step_1_update_the_install_manifest"><h2 id="step_1_update_the_install_manifest"><a href="#step_1_update_the_install_manifest">Step 1: Update the install manifest</a></h2><div class="section-content"><p>The first step — and, for most extensions, the only one that will be needed — is to update the <a href="/en-US/docs/Install_Manifests" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link1">install manifest</a> file, <a href="/en-US/docs/Creating_a_Skin_for_Firefox/install.rdf" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link2"><code>install.rdf</code></a>, to indicate compatibility with Firefox 3.</p>
<p>Find the line indicating the maximum compatible version of Firefox (which, for Firefox 2, might look like this):</p>
<div class="code-example"><p class="example-header"><span class="language-name">xml</span></p><pre class="brush: xml notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">em:</span>maxVersion</span><span class="token punctuation">&gt;</span></span>2.0.*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">em:</span>maxVersion</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>Change it to indicate compatibility with Firefox 3:</p>
<div class="code-example"><p class="example-header"><span class="language-name">xml</span></p><pre class="brush: xml notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">em:</span>maxVersion</span><span class="token punctuation">&gt;</span></span>3.0.*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">em:</span>maxVersion</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>Then reinstall your extension.</p>
<p>Note that Firefox 3 does away with the extra ".0" in the version number, so instead of using "3.0.0.*, you only need to use "3.0.*".</p>
<p>There have been (and will continue to be) a number of API changes that will likely break some extensions. We're still working on compiling a complete list of these changes.</p>
<div class="notecard note" id="sect1">
  <p><strong>Note:</strong> If your extension still uses an <a href="/en-US/docs/Install.js" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link3"><code>Install.js</code></a> script instead of an <a href="/en-US/docs/Install_Manifests" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link4">install manifest</a>, you need to make the transition to an install manifest now. Firefox 3 no longer supports <code>install.js</code> scripts in XPI files.</p>
</div></div></section><section aria-labelledby="add_localizations_to_the_install_manifest"><h3 id="add_localizations_to_the_install_manifest"><a href="#add_localizations_to_the_install_manifest">Add localizations to the install manifest</a></h3><div class="section-content"><p>Firefox 3 supports new properties in the install manifest to specify localized descriptions. The old methods still work however the new allow Firefox to pick up the localizations even when the add-on is disabled and pending install. See <a href="/en-US/docs/Localizing_extension_descriptions" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link5">Localizing extension descriptions</a> for more details.</p></div></section><section aria-labelledby="step_2_ensure_you_are_providing_secure_updates"><h2 id="step_2_ensure_you_are_providing_secure_updates"><a href="#step_2_ensure_you_are_providing_secure_updates">Step 2: Ensure you are providing secure updates</a></h2><div class="section-content"><p>If you are hosting addons yourself and not on a secure add-on hosting provider like <a href="https://addons.mozilla.org" class="external" target="_blank">addons.mozilla.org</a> then you must provide a secure method of updating your add-on. This will either involve hosting your updates on an SSL website, or using cryptographic keys to sign the update information. Read <a href="/en-US/docs/Extension_Versioning,_Update_and_Compatibility#securing_updates" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link6">Securing Updates</a> for more information.</p></div></section><section aria-labelledby="step_3_deal_with_changed_apis"><h2 id="step_3_deal_with_changed_apis"><a href="#step_3_deal_with_changed_apis">Step 3: Deal with changed APIs</a></h2><div class="section-content"><p>Several APIs have been changed in significant ways. The most significant of these, which will likely affect a large number of extensions, are:</p></div></section><section aria-labelledby="dom"><h3 id="dom"><a href="#dom">DOM</a></h3><div class="section-content"><p>Nodes from external documents should be cloned using <a href="/en-US/docs/Web/API/Document/importNode"><code>document.importNode()</code></a> (or adopted using <a href="/en-US/docs/Web/API/Document/adoptNode"><code>document.adoptNode()</code></a>) before they can be inserted into the current document. For more on the <a href="/en-US/docs/Web/API/Node/ownerDocument"><code>Node.ownerDocument</code></a> issues, see the <a href="https://www.w3.org/DOM/faq.html#ownerdoc" class="external" target="_blank">W3C DOM FAQ</a>.</p>
<p>Firefox doesn't currently enforce this rule (it did for a while during the development of Firefox 3, but too many sites break when this rule is enforced). We encourage Web developers to fix their code to follow this rule for improved future compatibility.</p></div></section><section aria-labelledby="bookmarks_history"><h3 id="bookmarks_history"><a href="#bookmarks_history">Bookmarks &amp; History</a></h3><div class="section-content"><p>If your extension accesses bookmark or history data in any way, it will need substantial work to be compatible with Firefox 3. The old APIs for accessing this information have been replaced by the new <a href="/en-US/docs/Places" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link7">Places</a> architecture. See the <a href="/en-US/docs/Places_Developer_Guide" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link8">Places migration guide</a> for details on updating your existing extension to use the Places API.</p></div></section><section aria-labelledby="download_manager"><h3 id="download_manager"><a href="#download_manager">Download Manager</a></h3><div class="section-content"><p>The Download Manager API has changed slightly due to the transition from an RDF data store to using the <a href="/en-US/docs/Storage" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link9">Storage</a> API. This should be a pretty easy transition to make. In addition, the API for monitoring download progress has changed to support multiple download manager listeners. See <code>nsIDownloadManager</code>, <code>nsIDownloadProgressListener</code>, and <a href="/en-US/docs/Monitoring_downloads" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link10">Monitoring downloads</a> for more information.</p></div></section><section aria-labelledby="password_manager"><h3 id="password_manager"><a href="#password_manager">Password Manager</a></h3><div class="section-content"><p>If your extension accesses user login information using the Password Manager, it will need to be updated to use the new Login Manager API.</p>
<ul>
  <li>The article <a href="/en-US/docs/XPCOM_Interface_Reference/Using_nsILoginManager" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link11">Using nsILoginManager</a> includes examples, including a demonstration of how to write your extension to work with both the Password Manager and the Login Manager, so it will work with both Firefox 3 and earlier versions.</li>
  <li><code>nsILoginInfo</code></li>
  <li><code>nsILoginManager</code></li>
</ul>
<p>You can also override the built-in password manager storage if you want to provide your own password storage implementation in your extensions. See <a href="/en-US/docs/Creating_a_Login_Manager_storage_module" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link12">Creating a Login Manager storage module</a> for details.</p></div></section><section aria-labelledby="popups_menus_context_menus_tooltips_and_panels"><h3 id="popups_menus_context_menus_tooltips_and_panels"><a href="#popups_menus_context_menus_tooltips_and_panels">Popups (Menus, Context Menus, Tooltips and Panels)</a></h3><div class="section-content"><p>The XUL Popup system was heavily modified in Firefox 3. The Popup system includes main menus, context menus and popup panels. A guide to <a href="/en-US/docs/XUL/PopupGuide" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link13">using Popups</a> has been created, detailing how the system works. One thing to note is that <code>popup.showPopup</code> has been deprecated in favor of new <code>popup.openPopup</code> and <code>popup.openPopupAtScreen</code>.</p></div></section><section aria-labelledby="autocomplete"><h3 id="autocomplete"><a href="#autocomplete">Autocomplete</a></h3><div class="section-content"><p>The <code>nsIAutoCompleteController</code> interface's <code>handleEnter()</code> method has been changed to accept an argument that indicates whether the text was selected from the autocomplete popup or by the user pressing enter after typing text.</p></div></section><section aria-labelledby="domparser"><h3 id="domparser"><a href="#domparser">DOMParser</a></h3><div class="section-content"><ul>
  <li>When a <code>DOMParser</code> is instantiated, it inherits the calling code's principal and the <code>documentURI</code> and <code>baseURI</code> of the window the constructor came from.</li>
  <li>If the caller has UniversalXPConnect privileges, it can pass parameters to <code>new DOMParser()</code>. If fewer than three parameters are passed, the remaining parameters will default to <code>null</code>.
    <ul>
      <li>The first parameter is the principal to use; this overrides the default principal normally inherited.</li>
      <li>The second parameter is the <code>documentURI</code> to use.</li>
      <li>The third parameter is the <code>baseURI</code> to use.</li>
    </ul>
  </li>
  <li>If you initialize a <code>DOMParser</code> using a contract, such as by calling <code>createInstance()</code>, and you don't call the <code>DOMParser</code>'s <code>init()</code> method, attempting to initiate a parsing operation will automatically create and initialize the <code>DOMParser</code> with a null principal and <code>null</code> pointers for <code>documentURI</code> and <code>baseURI</code>.</li>
</ul></div></section><section aria-labelledby="stop_using_the_internal_string_api"><h3 id="stop_using_the_internal_string_api"><a href="#stop_using_the_internal_string_api">Stop using the internal string API</a></h3><div class="section-content"><p>The internal string API is no longer exported; you must migrate to the external string API. See these articles for helpful information:</p>
<ul>
  <li><a href="/en-US/docs/Mozilla_external_string_guide" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link14">Mozilla external string guide</a></li>
  <li><a href="/en-US/docs/XPCOM_Glue" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link15">XPCOM Glue</a></li>
  <li><a href="/en-US/docs/Migrating_from_Internal_Linkage_to_Frozen_Linkage" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link16">Migrating from Internal Linkage to Frozen Linkage</a></li>
</ul></div></section><section aria-labelledby="removed_interfaces"><h3 id="removed_interfaces"><a href="#removed_interfaces">Removed interfaces</a></h3><div class="section-content"><p>The following interfaces were removed from Gecko 1.9, which drives Firefox 3. If your extension makes use of any of these, you'll need to update your code:</p>
<ul>
  <li><code>nsIDOMPaintListener</code></li>
  <li><code>nsIDOMScrollListener</code></li>
  <li><code>nsIDOMMutationListener</code></li>
  <li><code>nsIDOMPageTransitionListener</code></li>
  <li><code>nsICloseAllWindows</code> (see <a href="https://bugzil.la/386200" class="external" target="_blank">Firefox bug 386200</a>)</li>
</ul></div></section><section aria-labelledby="step_4_check_for_relevant_chrome_changes"><h2 id="step_4_check_for_relevant_chrome_changes"><a href="#step_4_check_for_relevant_chrome_changes">Step 4: Check for relevant chrome changes</a></h2><div class="section-content"><p>There have been a few changes to chrome layout that may affect some extensions.</p></div></section><section aria-labelledby="new_boxes"><h3 id="new_boxes"><a href="#new_boxes">New boxes</a></h3><div class="section-content"><p>There has been a minor change to the chrome that may require changes in your code. A new <code>vbox</code> has been added, called "browser-bottombox", which encloses the find bar and status bar at the bottom of the browser window. Although this doesn't affect the appearance of the display, it may affect your extension if it overlays chrome relative to these elements.</p>
<p>For example, if you previously overlaid some chrome before the status bar, like this:</p>
<div class="code-example"><p class="example-header"><span class="language-name">xml</span></p><pre class="brush: xml notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>window</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main-window<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>something</span> <span class="token attr-name">insertbefore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status-bar<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>window</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>You should now overlay it like this:</p>
<div class="code-example"><p class="example-header"><span class="language-name">xml</span></p><pre class="brush: xml notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vbox</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>browser-bottombox<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>something</span> <span class="token attr-name">insertbefore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status-bar<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vbox</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>Or use the following technique to make your overlay work on both Firefox 2 and Firefox 3:</p>
<div class="code-example"><p class="example-header"><span class="language-name">xml</span></p><pre class="brush: xml notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>window</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main-window<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vbox</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>browser-bottombox<span class="token punctuation">"</span></span> <span class="token attr-name">insertbefore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status-bar<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>something</span> <span class="token attr-name">insertbefore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status-bar<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vbox</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>window</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div></section><section aria-labelledby="changed_boxes"><h3 id="changed_boxes"><a href="#changed_boxes">Changed boxes</a></h3><div class="section-content"><p>Extensions that attempt to overlay onto the "appcontent" box try to float chrome over document content will no longer display that material. You should update your extension to use the new <a href="/en-US/docs/Mozilla/Tech/XUL/panel" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link17"><code>&lt;xul:panel&gt;</code></a> XUL element. If you wish to keep the panel from automatically disappearing after a delay, you can set the <code>noautohide</code> attribute to <code>true</code>.</p></div></section><section aria-labelledby="other_changes"><h2 id="other_changes"><a href="#other_changes">Other changes</a></h2><div class="section-content"><p><em>Add simple changes you had to make while updating your extension to work with Firefox 3 here.</em></p>
<ul>
  <li><code>chrome://browser/base/utilityOverlay.js</code> is no longer supported for security reasons. If you were previously using this, you should switch to <code>chrome://browser/content/utilityOverlay.js</code>.</li>
  <li><code>nsIAboutModule</code> implementations are now required to support the <code>getURIFlags</code> method. See <a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/about/nsIAboutModule.idl" class="external" target="_blank">nsIAboutModule.idl</a> for documentation. This affects extensions that provide new <code>about:</code> URIs. (<a href="https://bugzil.la/337746" class="external" target="_blank">Firefox bug 337746</a>)</li>
  <li>The <a href="/en-US/docs/Mozilla/Tech/XUL/tabbrowser" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link18"><code>&lt;xul:tabbrowser&gt;</code></a> element is no longer part of "toolkit" (<a href="https://bugzil.la/339964" class="external" target="_blank">Firefox bug 339964</a>). This means this element is no longer available to XUL applications and extensions. It continues to be used in the main Firefox window (browser.xul).</li>
  <li>Changes to <code>nsISupports_proxies</code> and possibly to threading-related interfaces need to be documented.</li>
  <li>If you use XML processing instructions, such as <code>&lt;?xml-stylesheet ?&gt;</code> in your XUL files, be aware of the changes made in <a href="https://bugzil.la/319654" class="external" target="_blank">Firefox bug 319654</a>:
    <ol>
      <li>XML PIs are now added to a XUL document's DOM. This means <a href="/en-US/docs/Web/API/Node/firstChild" title="document.firstChild"><code>document.firstChild</code></a> is no longer guaranteed to be the root element. If you need to get the root document in your script, use <a href="/en-US/docs/Web/API/Document/documentElement"><code>document.documentElement</code></a> instead.</li>
      <li><code>&lt;?xml-stylesheet ?&gt;</code> and <code>&lt;?xul-overlay ?&gt;</code> processing instructions now have no effect outside the document prolog.</li>
    </ol>
  </li>
  <li><code>window.addEventListener("load", myFunc, true)</code> is not fired when loading web content (browser page loads). This is due to <a href="https://bugzil.la/296639" class="external" target="_blank">Firefox bug 296639</a> which changes the way inner and outer windows communicate. The simple fix here is to use <code>gBrowser.addEventListener("load", myFunc, true)</code> as described <a href="/en-US/docs/Code_snippets/Tabbed_browser#detecting_page_load" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link19">here</a> and works in Firefox 2 as well.</li>
  <li><code>content.window.getSelection()</code> gives an object (which can be converted to a string by <code>toString()</code>), unlike the now deprecated <code>content.document.getSelection()</code> which returns a string</li>
  <li><code>event.preventBubble()</code> was deprecated in Firefox 2 and has been removed in Firefox 3. Use <a href="/en-US/docs/Web/API/Event/stopPropagation"><code>event.stopPropagation()</code></a>, which works in Firefox 2 as well.</li>
  <li>Timers that are initiated using <code>setTimeout()</code> are now blocked by modal windows due to the fix made for <a href="https://bugzil.la/52209" class="external" target="_blank">Firefox bug 52209</a>. You may use <code>nsITimer</code> instead.</li>
  <li>If your extension needs to allow an untrusted source (e.g., a website) to access the extension's chrome, then you must use the new <a href="/en-US/docs/Chrome_Registration#contentaccessible" class="page-not-created" title="This is a link to an unwritten page" data-flaw="link20"><code>contentaccessible</code> flag</a>.</li>
</ul></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li><a href="https://github.com/mdn/content/edit/main/files/en-us/mozilla/firefox/releases/3/updating_extensions/index.md" title="This will take you to GitHub, where you&#x27;ll need to sign in first." target="_blank" rel="noopener noreferrer">Edit the page on GitHub</a>.</li><li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FFirefox%2FReleases%2F3%2FUpdating_extensions&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fmozilla%2Ffirefox%2Freleases%2F3%2Fupdating_extensions%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FMozilla%2FFirefox%2FReleases%2F3%2FUpdating_extensions%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fmozilla%2Ffirefox%2Freleases%2F3%2Fupdating_extensions%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F88241bf466f1025d3c2f4ce2752586dd85d1ae13%0A*+Document+last+modified%3A+2023-11-02T21%3A05%3A11.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">Report the content issue</a>.</li><li><a href="https://github.com/mdn/content/blob/main/files/en-us/mozilla/firefox/releases/3/updating_extensions/index.md?plain=1" title="Folder: en-us/mozilla/firefox/releases/3/updating_extensions (Opens in a new tab)" target="_blank" rel="noopener noreferrer">View the source on GitHub</a>.</li></ul>Want to get more involved?<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">Learn how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time dateTime="2023-11-02T21:05:11.000Z">Nov 3, 2023</time> by<!-- --> <a href="/en-US/docs/Mozilla/Firefox/Releases/3/Updating_extensions/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div></div><footer id="nav-footer" class="page-footer"><div class="page-footer-grid"><div class="page-footer-logo-col"><a href="/" class="mdn-footer-logo" aria-label="MDN homepage"><svg width="48" height="17" viewBox="0 0 48 17" fill="none" xmlns="http://www.w3.org/2000/svg"><title id="mdn-footer-logo-svg">MDN logo</title><path d="M20.04 16.512H15.504V10.416C15.504 9.488 15.344 8.824 15.024 8.424C14.72 8.024 14.264 7.824 13.656 7.824C12.92 7.824 12.384 8.064 12.048 8.544C11.728 9.024 11.568 9.64 11.568 10.392V14.184H13.008V16.512H8.472V10.416C8.472 9.488 8.312 8.824 7.992 8.424C7.688 8.024 7.232 7.824 6.624 7.824C5.872 7.824 5.336 8.064 5.016 8.544C4.696 9.024 4.536 9.64 4.536 10.392V14.184H6.6V16.512H0V14.184H1.44V8.04H0.024V5.688H4.536V7.32C5.224 6.088 6.32 5.472 7.824 5.472C8.608 5.472 9.328 5.664 9.984 6.048C10.64 6.432 11.096 7.016 11.352 7.8C11.992 6.248 13.168 5.472 14.88 5.472C15.856 5.472 16.72 5.776 17.472 6.384C18.224 6.992 18.6 7.936 18.6 9.216V14.184H20.04V16.512Z" fill="currentColor"></path><path d="M33.6714 16.512H29.1354V14.496C28.8314 15.12 28.3834 15.656 27.7914 16.104C27.1994 16.536 26.4154 16.752 25.4394 16.752C24.0154 16.752 22.8954 16.264 22.0794 15.288C21.2634 14.312 20.8554 12.984 20.8554 11.304C20.8554 9.688 21.2554 8.312 22.0554 7.176C22.8554 6.04 24.0634 5.472 25.6794 5.472C26.5594 5.472 27.2794 5.648 27.8394 6C28.3994 6.352 28.8314 6.8 29.1354 7.344V2.352H26.9754V0H32.2314V14.184H33.6714V16.512ZM29.1354 11.04V10.776C29.1354 9.88 28.8954 9.184 28.4154 8.688C27.9514 8.176 27.3674 7.92 26.6634 7.92C25.9754 7.92 25.3674 8.176 24.8394 8.688C24.3274 9.2 24.0714 10.008 24.0714 11.112C24.0714 12.152 24.3114 12.944 24.7914 13.488C25.2714 14.032 25.8394 14.304 26.4954 14.304C27.3114 14.304 27.9514 13.96 28.4154 13.272C28.8954 12.584 29.1354 11.84 29.1354 11.04Z" fill="currentColor"></path><path d="M47.9589 16.512H41.9829V14.184H43.4229V10.416C43.4229 9.488 43.2629 8.824 42.9429 8.424C42.6389 8.024 42.1829 7.824 41.5749 7.824C40.8389 7.824 40.2709 8.056 39.8709 8.52C39.4709 8.968 39.2629 9.56 39.2469 10.296V14.184H40.6869V16.512H34.7109V14.184H36.1509V8.04H34.5909V5.688H39.2469V7.344C39.9669 6.096 41.1269 5.472 42.7269 5.472C43.7509 5.472 44.6389 5.776 45.3909 6.384C46.1429 6.992 46.5189 7.936 46.5189 9.216V14.184H47.9589V16.512Z" fill="currentColor"></path></svg></a><p>Your blueprint for a better internet.</p><ul class="social-icons"><li><a class="icon icon-mastodon" href="https://mozilla.social/@mdn" target="_blank" rel="me noopener noreferrer"><span class="visually-hidden">MDN on Mastodon</span></a></li><li><a class="icon icon-twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="icon icon-github-mark-small" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on GitHub</span></a></li><li><a class="icon icon-feed" href="/en-US/blog/rss.xml" target="_blank"><span class="visually-hidden">MDN Blog RSS Feed</span></a></li></ul></div><div class="page-footer-nav-col-1"><h2 class="footer-nav-heading">MDN</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a href="/en-US/about">About</a></li><li class="footer-nav-item"><a href="/en-US/blog/">Blog</a></li><li class="footer-nav-item"><a href="https://www.mozilla.org/en-US/careers/listings/?team=ProdOps" target="_blank" rel="noopener noreferrer">Careers</a></li><li class="footer-nav-item"><a href="/en-US/advertising">Advertise with us</a></li></ul></div><div class="page-footer-nav-col-2"><h2 class="footer-nav-heading">Support</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/MDN/Community/Issues">Report an issue</a></li></ul></div><div class="page-footer-nav-col-3"><h2 class="footer-nav-heading">Our communities</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/community">MDN Community</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="https://discourse.mozilla.org/c/mdn/236" target="_blank" rel="noopener noreferrer">MDN Forum</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="/discord" target="_blank" rel="noopener noreferrer">MDN Chat</a></li></ul></div><div class="page-footer-nav-col-4"><h2 class="footer-nav-heading">Developers</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/Web">Web Technologies</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/Learn">Learn Web Development</a></li><li class="footer-nav-item"><a href="https://hacks.mozilla.org/" target="_blank" rel="noopener noreferrer">Hacks Blog</a></li></ul></div><div class="page-footer-moz"><a href="https://www.mozilla.org/" class="footer-moz-logo-link" target="_blank" rel="noopener noreferrer"><svg width="112" height="32" fill="none" xmlns="http://www.w3.org/2000/svg"><title id="mozilla-footer-logo-svg">Mozilla logo</title><path d="M41.753 14.218c-2.048 0-3.324 1.522-3.324 4.157 0 2.423 1.119 4.286 3.29 4.286 2.082 0 3.447-1.678 3.447-4.347 0-2.826-1.522-4.096-3.413-4.096Zm54.89 7.044c0 .901.437 1.618 1.645 1.618 1.427 0 2.949-1.024 3.044-3.352-.649-.095-1.365-.185-2.02-.185-1.426-.005-2.668.397-2.668 1.92Z" fill="currentColor"></path><path d="M0 0v32h111.908V0H0Zm32.56 25.426h-5.87v-7.884c0-2.423-.806-3.352-2.39-3.352-1.924 0-2.702 1.365-2.702 3.324v4.868h1.864v3.044h-5.864v-7.884c0-2.423-.806-3.352-2.39-3.352-1.924 0-2.702 1.365-2.702 3.324v4.868h2.669v3.044H6.642v-3.044h1.863v-7.918H6.642V11.42h5.864v2.11c.839-1.489 2.3-2.39 4.252-2.39 2.02 0 3.878.963 4.566 3.01.778-1.862 2.361-3.01 4.566-3.01 2.512 0 4.812 1.522 4.812 4.84v6.402h1.863v3.044h-.005Zm9.036.307c-4.314 0-7.296-2.635-7.296-7.106 0-4.096 2.484-7.481 7.514-7.481s7.481 3.38 7.481 7.29c0 4.472-3.228 7.297-7.699 7.297Zm22.578-.307H51.942l-.403-2.11 7.7-8.846h-4.376l-.621 2.17-2.888-.313.498-4.907h12.294l.313 2.11-7.767 8.852h4.533l.654-2.172 3.167.308-.872 4.908Zm7.99 0h-4.191v-5.03h4.19v5.03Zm0-8.976h-4.191v-5.03h4.19v5.03Zm2.618 8.976 6.054-21.358h3.945l-6.054 21.358h-3.945Zm8.136 0 6.048-21.358h3.945l-6.054 21.358h-3.939Zm21.486.307c-1.863 0-2.887-1.085-3.072-2.792-.805 1.427-2.232 2.792-4.498 2.792-2.02 0-4.314-1.085-4.314-4.006 0-3.447 3.323-4.253 6.518-4.253.778 0 1.584.034 2.3.124v-.465c0-1.427-.034-3.133-2.3-3.133-.84 0-1.488.061-2.143.402l-.453 1.578-3.195-.34.549-3.224c2.45-.996 3.692-1.27 5.992-1.27 3.01 0 5.556 1.55 5.556 4.75v6.083c0 .805.314 1.085.963 1.085.184 0 .375-.034.587-.095l.034 2.11a5.432 5.432 0 0 1-2.524.654Z" fill="currentColor"></path></svg></a><ul class="footer-moz-list"><li class="footer-moz-item"><a href="https://www.mozilla.org/privacy/websites/" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Website Privacy Notice</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/privacy/websites/#cookies" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Cookies</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/about/legal/terms/mozilla" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Legal</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/about/governance/policies/participation/" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Community Participation Guidelines</a></li></ul></div><div class="page-footer-legal"><p id="license" class="page-footer-legal-text">Visit<!-- --> <a href="https://www.mozilla.org" target="_blank" rel="noopener noreferrer">Mozilla Corporation’s</a> <!-- -->not-for-profit parent, the<!-- --> <a target="_blank" rel="noopener noreferrer" href="https://foundation.mozilla.org/">Mozilla Foundation</a>.<br/>Portions of this content are ©1998–<!-- -->2023<!-- --> by individual mozilla.org contributors. Content available under<!-- --> <a href="/en-US/docs/MDN/Writing_guidelines/Attrib_copyright_license">a Creative Commons license</a>.</p></div></div></footer></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{"broken_links":[{"explanation":"Can't resolve /en-US/docs/Install_Manifests","id":"link1","href":"/en-US/docs/Install_Manifests","suggestion":null,"fixable":false,"line":15,"column":96},{"explanation":"Can't resolve /en-US/docs/Creating_a_Skin_for_Firefox/install.rdf","id":"link2","href":"/en-US/docs/Creating_a_Skin_for_Firefox/install.rdf","suggestion":null,"fixable":false,"line":15,"column":152},{"explanation":"Can't resolve /en-US/docs/Install.js","id":"link3","href":"/en-US/docs/Install.js","suggestion":null,"fixable":false,"line":35,"column":45},{"explanation":"Can't resolve /en-US/docs/Install_Manifests","id":"link4","href":"/en-US/docs/Install_Manifests","suggestion":null,"fixable":false,"line":35,"column":105},{"explanation":"Can't resolve /en-US/docs/Localizing_extension_descriptions","id":"link5","href":"/en-US/docs/Localizing_extension_descriptions","suggestion":null,"fixable":false,"line":39,"column":238},{"explanation":"Can't resolve /en-US/docs/Extension_Versioning,_Update_and_Compatibility#securing_updates","id":"link6","href":"/en-US/docs/Extension_Versioning,_Update_and_Compatibility#securing_updates","suggestion":null,"fixable":false,"line":43,"column":327},{"explanation":"Can't resolve /en-US/docs/Places","id":"link7","href":"/en-US/docs/Places","suggestion":null,"fixable":false,"line":57,"column":202},{"explanation":"Can't resolve /en-US/docs/Places_Developer_Guide","id":"link8","href":"/en-US/docs/Places_Developer_Guide","suggestion":null,"fixable":false,"line":57,"column":253},{"explanation":"Can't resolve /en-US/docs/Storage","id":"link9","href":"/en-US/docs/Storage","suggestion":null,"fixable":false,"line":61,"column":105},{"explanation":"Can't resolve /en-US/docs/Monitoring_downloads","id":"link10","href":"/en-US/docs/Monitoring_downloads","suggestion":null,"fixable":false,"line":61,"column":365},{"explanation":"Can't resolve /en-US/docs/XPCOM_Interface_Reference/Using_nsILoginManager","id":"link11","href":"/en-US/docs/XPCOM_Interface_Reference/Using_nsILoginManager","suggestion":null,"fixable":false,"line":67,"column":15},{"explanation":"Can't resolve /en-US/docs/Creating_a_Login_Manager_storage_module","id":"link12","href":"/en-US/docs/Creating_a_Login_Manager_storage_module","suggestion":null,"fixable":false,"line":71,"column":149},{"explanation":"Can't resolve /en-US/docs/XUL/PopupGuide","id":"link13","href":"/en-US/docs/XUL/PopupGuide","suggestion":null,"fixable":false,"line":75,"column":138},{"explanation":"Can't resolve /en-US/docs/Mozilla_external_string_guide","id":"link14","href":"/en-US/docs/Mozilla_external_string_guide","suggestion":null,"fixable":false,"line":96,"column":3},{"explanation":"Can't resolve /en-US/docs/XPCOM_Glue","id":"link15","href":"/en-US/docs/XPCOM_Glue","suggestion":null,"fixable":false,"line":97,"column":3},{"explanation":"Can't resolve /en-US/docs/Migrating_from_Internal_Linkage_to_Frozen_Linkage","id":"link16","href":"/en-US/docs/Migrating_from_Internal_Linkage_to_Frozen_Linkage","suggestion":null,"fixable":false,"line":98,"column":3},{"explanation":"Can't resolve /en-US/docs/Mozilla/Tech/XUL/panel","id":"link17","href":"/en-US/docs/Mozilla/Tech/XUL/panel","suggestion":null,"fixable":false,"line":146,"column":190},{"explanation":"Can't resolve /en-US/docs/Mozilla/Tech/XUL/tabbrowser","id":"link18","href":"/en-US/docs/Mozilla/Tech/XUL/tabbrowser","suggestion":null,"fixable":false,"line":154,"column":7},{"explanation":"Can't resolve /en-US/docs/Code_snippets/Tabbed_browser#detecting_page_load","id":"link19","href":"/en-US/docs/Code_snippets/Tabbed_browser#detecting_page_load","suggestion":null,"fixable":false,"line":161,"column":325},{"explanation":"Can't resolve /en-US/docs/Chrome_Registration#contentaccessible","id":"link20","href":"/en-US/docs/Chrome_Registration#contentaccessible","suggestion":null,"fixable":false,"line":165,"column":134}]},"title":"Updating extensions for Firefox 3","mdn_url":"/en-US/docs/Mozilla/Firefox/Releases/3/Updating_extensions","locale":"en-US","native":"English (US)","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox releases</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/Firefox/Releases\">Firefox release notes for developers</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Firefox/Experimental_features\">Experimental features in Firefox</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Add-ons</summary>\n            <ol>\n              <li><a href=\"/en-US/Add-ons/WebExtensions\">Browser extensions</a></li>\n              <li><a href=\"/en-US/Add-ons/Themes\">Themes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li>\n      <a href=\"https://firefox-source-docs.mozilla.org/\">Firefox documentation</a>\n    </li>\n  </ol>\n","sidebarMacro":"FirefoxSidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>This article provides information that will be useful to developers that wish to update their extensions to work properly under Firefox 3.</p>\n<p>Before going further, there's one helpful hint we can offer: if the only change your extension requires is a bump to the <code>maxVersion</code> field in its install manifest, and you host your extension at <a href=\"https://addons.mozilla.org\" class=\"external\" target=\"_blank\">addons.mozilla.org</a>, you don't actually need to upload a new version of your extension! Use the Developer Control Panel at AMO to adjust the <code>maxVersion</code>. You can avoid having to have your extension re-reviewed this way.</p>"}},{"type":"prose","value":{"id":"step_1_update_the_install_manifest","title":"Step 1: Update the install manifest","isH3":false,"content":"<p>The first step — and, for most extensions, the only one that will be needed — is to update the <a href=\"/en-US/docs/Install_Manifests\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link1\">install manifest</a> file, <a href=\"/en-US/docs/Creating_a_Skin_for_Firefox/install.rdf\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link2\"><code>install.rdf</code></a>, to indicate compatibility with Firefox 3.</p>\n<p>Find the line indicating the maximum compatible version of Firefox (which, for Firefox 2, might look like this):</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">xml</span></p><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>2.0.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Change it to indicate compatibility with Firefox 3:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">xml</span></p><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>3.0.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Then reinstall your extension.</p>\n<p>Note that Firefox 3 does away with the extra \".0\" in the version number, so instead of using \"3.0.0.*, you only need to use \"3.0.*\".</p>\n<p>There have been (and will continue to be) a number of API changes that will likely break some extensions. We're still working on compiling a complete list of these changes.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> If your extension still uses an <a href=\"/en-US/docs/Install.js\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link3\"><code>Install.js</code></a> script instead of an <a href=\"/en-US/docs/Install_Manifests\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link4\">install manifest</a>, you need to make the transition to an install manifest now. Firefox 3 no longer supports <code>install.js</code> scripts in XPI files.</p>\n</div>"}},{"type":"prose","value":{"id":"add_localizations_to_the_install_manifest","title":"Add localizations to the install manifest","isH3":true,"content":"<p>Firefox 3 supports new properties in the install manifest to specify localized descriptions. The old methods still work however the new allow Firefox to pick up the localizations even when the add-on is disabled and pending install. See <a href=\"/en-US/docs/Localizing_extension_descriptions\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link5\">Localizing extension descriptions</a> for more details.</p>"}},{"type":"prose","value":{"id":"step_2_ensure_you_are_providing_secure_updates","title":"Step 2: Ensure you are providing secure updates","isH3":false,"content":"<p>If you are hosting addons yourself and not on a secure add-on hosting provider like <a href=\"https://addons.mozilla.org\" class=\"external\" target=\"_blank\">addons.mozilla.org</a> then you must provide a secure method of updating your add-on. This will either involve hosting your updates on an SSL website, or using cryptographic keys to sign the update information. Read <a href=\"/en-US/docs/Extension_Versioning,_Update_and_Compatibility#securing_updates\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link6\">Securing Updates</a> for more information.</p>"}},{"type":"prose","value":{"id":"step_3_deal_with_changed_apis","title":"Step 3: Deal with changed APIs","isH3":false,"content":"<p>Several APIs have been changed in significant ways. The most significant of these, which will likely affect a large number of extensions, are:</p>"}},{"type":"prose","value":{"id":"dom","title":"DOM","isH3":true,"content":"<p>Nodes from external documents should be cloned using <a href=\"/en-US/docs/Web/API/Document/importNode\"><code>document.importNode()</code></a> (or adopted using <a href=\"/en-US/docs/Web/API/Document/adoptNode\"><code>document.adoptNode()</code></a>) before they can be inserted into the current document. For more on the <a href=\"/en-US/docs/Web/API/Node/ownerDocument\"><code>Node.ownerDocument</code></a> issues, see the <a href=\"https://www.w3.org/DOM/faq.html#ownerdoc\" class=\"external\" target=\"_blank\">W3C DOM FAQ</a>.</p>\n<p>Firefox doesn't currently enforce this rule (it did for a while during the development of Firefox 3, but too many sites break when this rule is enforced). We encourage Web developers to fix their code to follow this rule for improved future compatibility.</p>"}},{"type":"prose","value":{"id":"bookmarks_history","title":"Bookmarks &amp; History","isH3":true,"content":"<p>If your extension accesses bookmark or history data in any way, it will need substantial work to be compatible with Firefox 3. The old APIs for accessing this information have been replaced by the new <a href=\"/en-US/docs/Places\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link7\">Places</a> architecture. See the <a href=\"/en-US/docs/Places_Developer_Guide\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link8\">Places migration guide</a> for details on updating your existing extension to use the Places API.</p>","titleAsText":"Bookmarks & History"}},{"type":"prose","value":{"id":"download_manager","title":"Download Manager","isH3":true,"content":"<p>The Download Manager API has changed slightly due to the transition from an RDF data store to using the <a href=\"/en-US/docs/Storage\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link9\">Storage</a> API. This should be a pretty easy transition to make. In addition, the API for monitoring download progress has changed to support multiple download manager listeners. See <code>nsIDownloadManager</code>, <code>nsIDownloadProgressListener</code>, and <a href=\"/en-US/docs/Monitoring_downloads\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link10\">Monitoring downloads</a> for more information.</p>"}},{"type":"prose","value":{"id":"password_manager","title":"Password Manager","isH3":true,"content":"<p>If your extension accesses user login information using the Password Manager, it will need to be updated to use the new Login Manager API.</p>\n<ul>\n  <li>The article <a href=\"/en-US/docs/XPCOM_Interface_Reference/Using_nsILoginManager\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link11\">Using nsILoginManager</a> includes examples, including a demonstration of how to write your extension to work with both the Password Manager and the Login Manager, so it will work with both Firefox 3 and earlier versions.</li>\n  <li><code>nsILoginInfo</code></li>\n  <li><code>nsILoginManager</code></li>\n</ul>\n<p>You can also override the built-in password manager storage if you want to provide your own password storage implementation in your extensions. See <a href=\"/en-US/docs/Creating_a_Login_Manager_storage_module\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link12\">Creating a Login Manager storage module</a> for details.</p>"}},{"type":"prose","value":{"id":"popups_menus_context_menus_tooltips_and_panels","title":"Popups (Menus, Context Menus, Tooltips and Panels)","isH3":true,"content":"<p>The XUL Popup system was heavily modified in Firefox 3. The Popup system includes main menus, context menus and popup panels. A guide to <a href=\"/en-US/docs/XUL/PopupGuide\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link13\">using Popups</a> has been created, detailing how the system works. One thing to note is that <code>popup.showPopup</code> has been deprecated in favor of new <code>popup.openPopup</code> and <code>popup.openPopupAtScreen</code>.</p>"}},{"type":"prose","value":{"id":"autocomplete","title":"Autocomplete","isH3":true,"content":"<p>The <code>nsIAutoCompleteController</code> interface's <code>handleEnter()</code> method has been changed to accept an argument that indicates whether the text was selected from the autocomplete popup or by the user pressing enter after typing text.</p>"}},{"type":"prose","value":{"id":"domparser","title":"DOMParser","isH3":true,"content":"<ul>\n  <li>When a <code>DOMParser</code> is instantiated, it inherits the calling code's principal and the <code>documentURI</code> and <code>baseURI</code> of the window the constructor came from.</li>\n  <li>If the caller has UniversalXPConnect privileges, it can pass parameters to <code>new DOMParser()</code>. If fewer than three parameters are passed, the remaining parameters will default to <code>null</code>.\n    <ul>\n      <li>The first parameter is the principal to use; this overrides the default principal normally inherited.</li>\n      <li>The second parameter is the <code>documentURI</code> to use.</li>\n      <li>The third parameter is the <code>baseURI</code> to use.</li>\n    </ul>\n  </li>\n  <li>If you initialize a <code>DOMParser</code> using a contract, such as by calling <code>createInstance()</code>, and you don't call the <code>DOMParser</code>'s <code>init()</code> method, attempting to initiate a parsing operation will automatically create and initialize the <code>DOMParser</code> with a null principal and <code>null</code> pointers for <code>documentURI</code> and <code>baseURI</code>.</li>\n</ul>"}},{"type":"prose","value":{"id":"stop_using_the_internal_string_api","title":"Stop using the internal string API","isH3":true,"content":"<p>The internal string API is no longer exported; you must migrate to the external string API. See these articles for helpful information:</p>\n<ul>\n  <li><a href=\"/en-US/docs/Mozilla_external_string_guide\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link14\">Mozilla external string guide</a></li>\n  <li><a href=\"/en-US/docs/XPCOM_Glue\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link15\">XPCOM Glue</a></li>\n  <li><a href=\"/en-US/docs/Migrating_from_Internal_Linkage_to_Frozen_Linkage\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link16\">Migrating from Internal Linkage to Frozen Linkage</a></li>\n</ul>"}},{"type":"prose","value":{"id":"removed_interfaces","title":"Removed interfaces","isH3":true,"content":"<p>The following interfaces were removed from Gecko 1.9, which drives Firefox 3. If your extension makes use of any of these, you'll need to update your code:</p>\n<ul>\n  <li><code>nsIDOMPaintListener</code></li>\n  <li><code>nsIDOMScrollListener</code></li>\n  <li><code>nsIDOMMutationListener</code></li>\n  <li><code>nsIDOMPageTransitionListener</code></li>\n  <li><code>nsICloseAllWindows</code> (see <a href=\"https://bugzil.la/386200\" class=\"external\" target=\"_blank\">Firefox bug 386200</a>)</li>\n</ul>"}},{"type":"prose","value":{"id":"step_4_check_for_relevant_chrome_changes","title":"Step 4: Check for relevant chrome changes","isH3":false,"content":"<p>There have been a few changes to chrome layout that may affect some extensions.</p>"}},{"type":"prose","value":{"id":"new_boxes","title":"New boxes","isH3":true,"content":"<p>There has been a minor change to the chrome that may require changes in your code. A new <code>vbox</code> has been added, called \"browser-bottombox\", which encloses the find bar and status bar at the bottom of the browser window. Although this doesn't affect the appearance of the display, it may affect your extension if it overlays chrome relative to these elements.</p>\n<p>For example, if you previously overlaid some chrome before the status bar, like this:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">xml</span></p><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>window</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main-window<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>something</span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>window</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>You should now overlay it like this:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">xml</span></p><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>vbox</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>browser-bottombox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>something</span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>vbox</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Or use the following technique to make your overlay work on both Firefox 2 and Firefox 3:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">xml</span></p><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>window</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main-window<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>vbox</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>browser-bottombox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>something</span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>vbox</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>window</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"changed_boxes","title":"Changed boxes","isH3":true,"content":"<p>Extensions that attempt to overlay onto the \"appcontent\" box try to float chrome over document content will no longer display that material. You should update your extension to use the new <a href=\"/en-US/docs/Mozilla/Tech/XUL/panel\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link17\"><code>&lt;xul:panel&gt;</code></a> XUL element. If you wish to keep the panel from automatically disappearing after a delay, you can set the <code>noautohide</code> attribute to <code>true</code>.</p>"}},{"type":"prose","value":{"id":"other_changes","title":"Other changes","isH3":false,"content":"<p><em>Add simple changes you had to make while updating your extension to work with Firefox 3 here.</em></p>\n<ul>\n  <li><code>chrome://browser/base/utilityOverlay.js</code> is no longer supported for security reasons. If you were previously using this, you should switch to <code>chrome://browser/content/utilityOverlay.js</code>.</li>\n  <li><code>nsIAboutModule</code> implementations are now required to support the <code>getURIFlags</code> method. See <a href=\"https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/about/nsIAboutModule.idl\" class=\"external\" target=\"_blank\">nsIAboutModule.idl</a> for documentation. This affects extensions that provide new <code>about:</code> URIs. (<a href=\"https://bugzil.la/337746\" class=\"external\" target=\"_blank\">Firefox bug 337746</a>)</li>\n  <li>The <a href=\"/en-US/docs/Mozilla/Tech/XUL/tabbrowser\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link18\"><code>&lt;xul:tabbrowser&gt;</code></a> element is no longer part of \"toolkit\" (<a href=\"https://bugzil.la/339964\" class=\"external\" target=\"_blank\">Firefox bug 339964</a>). This means this element is no longer available to XUL applications and extensions. It continues to be used in the main Firefox window (browser.xul).</li>\n  <li>Changes to <code>nsISupports_proxies</code> and possibly to threading-related interfaces need to be documented.</li>\n  <li>If you use XML processing instructions, such as <code>&lt;?xml-stylesheet ?&gt;</code> in your XUL files, be aware of the changes made in <a href=\"https://bugzil.la/319654\" class=\"external\" target=\"_blank\">Firefox bug 319654</a>:\n    <ol>\n      <li>XML PIs are now added to a XUL document's DOM. This means <a href=\"/en-US/docs/Web/API/Node/firstChild\" title=\"document.firstChild\"><code>document.firstChild</code></a> is no longer guaranteed to be the root element. If you need to get the root document in your script, use <a href=\"/en-US/docs/Web/API/Document/documentElement\"><code>document.documentElement</code></a> instead.</li>\n      <li><code>&lt;?xml-stylesheet ?&gt;</code> and <code>&lt;?xul-overlay ?&gt;</code> processing instructions now have no effect outside the document prolog.</li>\n    </ol>\n  </li>\n  <li><code>window.addEventListener(\"load\", myFunc, true)</code> is not fired when loading web content (browser page loads). This is due to <a href=\"https://bugzil.la/296639\" class=\"external\" target=\"_blank\">Firefox bug 296639</a> which changes the way inner and outer windows communicate. The simple fix here is to use <code>gBrowser.addEventListener(\"load\", myFunc, true)</code> as described <a href=\"/en-US/docs/Code_snippets/Tabbed_browser#detecting_page_load\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link19\">here</a> and works in Firefox 2 as well.</li>\n  <li><code>content.window.getSelection()</code> gives an object (which can be converted to a string by <code>toString()</code>), unlike the now deprecated <code>content.document.getSelection()</code> which returns a string</li>\n  <li><code>event.preventBubble()</code> was deprecated in Firefox 2 and has been removed in Firefox 3. Use <a href=\"/en-US/docs/Web/API/Event/stopPropagation\"><code>event.stopPropagation()</code></a>, which works in Firefox 2 as well.</li>\n  <li>Timers that are initiated using <code>setTimeout()</code> are now blocked by modal windows due to the fix made for <a href=\"https://bugzil.la/52209\" class=\"external\" target=\"_blank\">Firefox bug 52209</a>. You may use <code>nsITimer</code> instead.</li>\n  <li>If your extension needs to allow an untrusted source (e.g., a website) to access the extension's chrome, then you must use the new <a href=\"/en-US/docs/Chrome_Registration#contentaccessible\" class=\"page-not-created\" title=\"This is a link to an unwritten page\" data-flaw=\"link20\"><code>contentaccessible</code> flag</a>.</li>\n</ul>"}}],"toc":[{"text":"Step 1: Update the install manifest","id":"step_1_update_the_install_manifest"},{"text":"Step 2: Ensure you are providing secure updates","id":"step_2_ensure_you_are_providing_secure_updates"},{"text":"Step 3: Deal with changed APIs","id":"step_3_deal_with_changed_apis"},{"text":"Step 4: Check for relevant chrome changes","id":"step_4_check_for_relevant_chrome_changes"},{"text":"Other changes","id":"other_changes"}],"summary":"This article provides information that will be useful to developers that wish to update their extensions to work properly under Firefox 3.","popularity":0,"modified":"2023-11-02T21:05:11.000Z","source":{"folder":"en-us/mozilla/firefox/releases/3/updating_extensions","github_url":"https://github.com/mdn/content/blob/main/files/en-us/mozilla/firefox/releases/3/updating_extensions/index.md","last_commit_url":"https://github.com/mdn/content/commit/88241bf466f1025d3c2f4ce2752586dd85d1ae13","filename":"index.md"},"short_title":"Updating extensions for Firefox 3","parents":[{"uri":"/en-US/docs/Mozilla","title":"Mozilla"},{"uri":"/en-US/docs/Mozilla/Firefox","title":"Firefox"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases","title":"Firefox release notes for developers"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases/3","title":"Firefox 3 for developers"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases/3/Updating_extensions","title":"Updating extensions for Firefox 3"}],"pageTitle":"Updating extensions for Firefox 3 - Mozilla | MDN","noIndexing":false}}</script></body></html>