{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Text fragments","mdn_url":"/en-US/docs/Web/Text_fragments","locale":"en-US","native":"English (US)","browserCompat":["html.elements.a.text_fragments","api.FragmentDirective","css.selectors.target-text"],"sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>Text fragments</strong> allow linking directly to a specific portion of text in a web document, without requiring the author to annotate it with an ID, using particular syntax in the URL fragment. Supporting browsers are free to choose how to draw attention to the linked text, e.g. with a color highlight and/or scrolling to the content on the page. This is useful because it allows web content authors to deep-link to other content they don't control, without relying on the presence of IDs to make that possible. Building on top of that, it could be used to generate more effective content-sharing links for users to pass to one another.</p>"}},{"type":"prose","value":{"id":"concepts_and_usage","title":"Concepts and usage","isH3":false,"content":"<p>Historically, one of the web's key features has always been its ability to provide links between different documents — it is what makes <em>the web</em>, a web:</p>\n<ul>\n  <li>You can link to the top of a document by linking to its URL, for example:\n    <ul>\n      <li><a href=\"/en-US/docs/Web/HTML/Element/a\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a</a>.</li>\n    </ul>\n  </li>\n  <li>You can link to a specific section of a document by linking to its URL plus the <em>document fragment</em> (ID) of that section, for example:\n    <ul>\n      <li><a href=\"/en-US/docs/Web/HTML/Element/a#browser_compatibility\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#browser_compatibility</a>.</li>\n    </ul>\n  </li>\n</ul>\n<p>The issue with linking to specific document fragments is that the author of the linked page needs to put an anchor in place to <em>actually</em> link to. The second example above links to an <a href=\"/en-US/docs/Web/HTML/Element/Heading_Elements\">h2</a> element with an ID of <code>browser_compatibility</code>:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>browser_compatibility<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#browser_compatibility<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Browser compatibility<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>If the ID is changed or removed, the document fragment is ignored, and the link just links through to the top of the page. This is reasonable in terms of graceful degradation, but it would arguably be better if the author of the link had full control over where they link to, without needing to rely on the page author.</p>\n<p><strong>Text fragments</strong> make this a reality — they allow link authors to specify text content to link to, rather than document fragments, in a flexible manner.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<p>In a similar manner to document fragments, text fragments are appended onto a URL after a hash symbol (<code>#</code>). The syntax however is a bit different:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">url</span></p><pre class=\"brush: url notranslate\"><code><span class=\"token scheme\">https<span class=\"token scheme-delimiter\">:</span></span><span class=\"token authority\"><span class=\"token authority-delimiter\">//</span><span class=\"token host\">example.com</span></span><span class=\"token fragment\"><span class=\"token fragment-delimiter\">#</span>:~:text=</span>[prefix-,]textStart[,textEnd][,-suffix]\n</code></pre></div>\n<p>The key parts to understand are as follows:</p>\n<dl>\n  <dt id=\"sect1\"><a href=\"#sect1\"><code>:~:</code></a></dt>\n  <dd>\n    <p>Otherwise known as <em>the fragment directive</em>, this sequence of characters tells the browser that what comes next is one or more user-agent instructions, which are stripped from the URL during loading so that author scripts cannot directly interact with them. User-agent instructions are also called directives.</p>\n  </dd>\n  <dt id=\"text\"><a href=\"#text\"><code>text=</code></a></dt>\n  <dd>\n    <p>A text directive. This provides a text fragment to the browser, defining what text is to be linked to in the linked document.</p>\n  </dd>\n  <dt id=\"textstart\"><a href=\"#textstart\"><code>textStart</code></a></dt>\n  <dd>\n    <p>A text string specifying the start of the linked text.</p>\n  </dd>\n  <dt id=\"textend\"><a href=\"#textend\"><code>textEnd</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>A text string specifying the end of the linked text.</p>\n  </dd>\n  <dt id=\"prefix-\"><a href=\"#prefix-\"><code>prefix-</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>A text string followed by a hyphen specifying what text should precede the linked text. This helps the browser to select the correct linked text, in cases where there are multiple matches.</p>\n  </dd>\n  <dt id=\"-suffix\"><a href=\"#-suffix\"><code>-suffix</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>A hyphen followed by a text string specifying what text should follow the linked text. This helps the browser to select the correct linked text, in cases where there are multiple matches.</p>\n  </dd>\n</dl>\n<p>Supporting browsers will scroll to and highlight the first text fragment in the linked document that matches the specified directive. Note that it is possible to specify multiple text fragments to highlight in the same URL by separating them with ampersand (<code>&amp;</code>) characters.</p>"}},{"type":"prose","value":{"id":"usage_notes","title":"Usage notes","isH3":true,"content":"<ul>\n  <li>Text strings used for the <code>textStart</code>, <code>textEnd</code>, <code>prefix-</code>, and <code>-suffix</code> values need to be <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\">percent-encoded</a>.</li>\n  <li>Matches are case-insensitive.</li>\n  <li>Individual <code>textStart</code>, <code>textEnd</code>, <code>prefix-</code>, and <code>-suffix</code> strings need to reside wholly inside the same <a href=\"/en-US/docs/Glossary/Block-level_content\">block-level element</a>, but complete matches can span across multiple element boundaries.</li>\n  <li>For security reasons, the feature requires links to be opened in a noopener context — you need to add <code>rel=\"noopener\"</code> to your <a href=\"/en-US/docs/Web/HTML/Element/a\"><code>&lt;a&gt;</code></a> elements, and add <code>noopener</code> to your <a href=\"/en-US/docs/Web/API/Window/open\"><code>window.open()</code></a> calls when using this feature.</li>\n  <li>Text fragments are invoked only on full (non-same-page), user-initiated navigations.</li>\n  <li>Text fragments are only applied to the main frame; text will not be searched inside <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a>s, and <code>iframe</code> navigation will not invoke a text fragment.</li>\n  <li>For sites that wish to opt-out, Chromium-based browsers support a <a href=\"https://wicg.github.io/document-policy/\" class=\"external\" target=\"_blank\">Document Policy</a> header value that they can send so user agents will not process Text Fragments:\n    <div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">http</span></p><pre class=\"brush: http notranslate\"><code><span class=\"token header\"><span class=\"token header-name keyword\">Document-Policy</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">force-load-at-top</span></span>\n</code></pre></div>\n  </li>\n</ul>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> If the provided text fragment does not match any text in the linked document, or if the browser does not support text fragments, the whole text fragment is ignored and the top of the document is linked.</p>\n</div>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"simple_text_fragment_with_textstart","title":"Simple text fragment with textStart","isH3":true,"content":"<ul>\n  <li><a href=\"https://example.com#:~:text=for\" class=\"external\" target=\"_blank\">https://example.com#:~:text=for</a> scrolls to and highlights the first instance of the text <code>for</code> in the document.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=human\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=human</a> scrolls to and highlights the first instance of the text <code>human</code> in the document.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL</a> scrolls to and highlights the first instance of the text <code>linked URL</code> in the document.</li>\n</ul>"}},{"type":"prose","value":{"id":"textstart_and_textend","title":"textStart and textEnd","isH3":true,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=human,url\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=human,URL</a> scrolls to and highlights the first instance of a text string starting with <code>human</code> and ending with <code>URL</code>.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL,defining%20a%20value\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL,defining%20a%20value</a> scrolls to and highlights the first instance of a text string starting with <code>linked URL</code> and ending with <code>defining a value</code>. Note how the highlighted text spans across multiple block-level elements.</li>\n</ul>"}},{"type":"prose","value":{"id":"examples_with_prefix-_andor_-suffix","title":"Examples with prefix- and/or -suffix","isH3":true,"content":"<ul>\n  <li><a href=\"https://example.com#:~:text=asking-,for\" class=\"external\" target=\"_blank\">https://example.com#:~:text=asking-,for</a> scrolls to and highlights the second instance of the text <code>for</code> in the document.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=sent-,referrer\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=sent-,referrer</a> scrolls to and highlights the first instance of the text <code>referrer</code> that has the text <code>sent</code> directly before it. This is the 5th instance of <code>referrer</code> in the document; without the prefix, the first instance would be highlighted.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL,-'s%20format\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL,-'s%20format</a> scrolls to and highlights the first instance of the text <code>linked URL</code> that has the text <code>'s format</code> directly following it. This is the 5th instance of <code>linked URL</code> in the document; without the suffix, the first instance would be highlighted.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=downgrade:-,The%20Referer,be%20sent,-to%20origins\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=downgrade:-,The%20Referer,be%20sent,-to%20origins</a> scrolls to and highlights the instance of the text <code>The Referer ... be sent</code> that is prefixed by <code>downgrade:</code> and suffixed by <code>to origins</code>. This illustrates a more complex example where the prefix/suffix are used to home in on the specific text instance you want to link to. Try removing the prefix, for example, and seeing what is matched.</li>\n</ul>"}},{"type":"prose","value":{"id":"urls_with_multiple_text_fragments","title":"URLs with multiple text fragments","isH3":true,"content":"<p>You can specify multiple text fragments to highlight in the same URL by separating them with ampersand (<code>&amp;</code>) characters. Let's look at a couple of examples:</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=causes&amp;text=linked\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=Causes&amp;text=linked</a> scrolls to and highlights the first instances of the text strings <code>Causes</code> and <code>linked</code>.</li>\n  <li><a href=\"/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL,-'s%20format&amp;text=Deprecated-,attributes,attribute\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#:~:text=linked%20URL,-'s%20format&amp;text=Deprecated-,attributes,attribute</a> scrolls to and highlights two text instances:\n    <ul>\n      <li>The first instance of the text <code>linked URL</code> that has the text <code>'s format</code> directly following it.</li>\n      <li>The first instance of a text string starting with <code>attributes</code> and ending with <code>attribute</code>, which is prefixed by <code>Deprecated</code>.</li>\n    </ul>\n  </li>\n</ul>\n<p>If you don't see one or more of your text fragments highlighted and you are sure you've got the syntax correct, you might just be highlighting a different instance than the one you expected. It might be highlighted, but offscreen.</p>"}},{"type":"prose","value":{"id":"styling_matched_text_fragments","title":"Styling matched text fragments","isH3":true,"content":"<p>Browsers are free to style the highlighted text in whatever default way they choose. The <a href=\"https://drafts.csswg.org/css-pseudo/#selectordef-target-text\" class=\"external\" target=\"_blank\">CSS Pseudo-Elements Module Level 4</a> defines a pseudo-element, <a href=\"/en-US/docs/Web/CSS/::target-text\"><code>::target-text</code></a>, which allows you to specifying custom styling.</p>\n<p>For example, in our <a href=\"https://mdn.github.io/css-examples/target-text/index.html#:~:text=From%20the%20foregoing%20remarks%20we%20may%20gather%20an%20idea%20of%20the%20importance\" class=\"external\" target=\"_blank\">scroll-to-text demo</a> we have the following CSS:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">css</span></p><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">::target-text</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> rebeccapurple<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Try following the above link in a supporting browser to see the effect this has.</p>"}},{"type":"prose","value":{"id":"feature_detectability","title":"Feature Detectability","isH3":true,"content":"<p>The <a href=\"/en-US/docs/Web/API/FragmentDirective\"><code>FragmentDirective</code></a> object, which is accessed via the <a href=\"/en-US/docs/Web/API/Document/fragmentDirective\"><code>Document.fragmentDirective</code></a> property, can be used to test whether or not text fragments are supported in a browser.</p>\n<p>Try running the following in a supporting browser's devtools, in a tab with one or more matched text fragments:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span>fragmentDirective<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// returns an empty FragmentDirective object, if supported</span>\n<span class=\"token comment\">// undefined otherwise</span>\n</code></pre></div>\n<p>This functionality is mainly intended for feature detection at present. In the future, the <code>FragmentDirective</code> object could include additional information.</p>"}},{"type":"prose","value":{"id":"reference","title":"Reference","isH3":false,"content":""}},{"type":"prose","value":{"id":"api","title":"API","isH3":true,"content":"<dl>\n  <dt id=\"fragmentdirective\"><a href=\"/en-US/docs/Web/API/FragmentDirective\"><code>FragmentDirective</code></a></dt>\n  <dd>\n    <p>An object representing the text fragments. Currently empty and mainly intended for feature detection.</p>\n  </dd>\n  <dt id=\"document.fragmentdirective\"><a href=\"/en-US/docs/Web/API/Document/fragmentDirective\"><code>Document.fragmentDirective</code></a></dt>\n  <dd>\n    <p>Returns the <a href=\"/en-US/docs/Web/API/FragmentDirective\"><code>FragmentDirective</code></a> for the current document.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"css","title":"CSS","isH3":true,"content":"<dl>\n  <dt id=\"target-text\"><a href=\"/en-US/docs/Web/CSS/::target-text\"><code>::target-text</code></a></dt>\n  <dd>\n    <p>Represents the highlighted text fragments in the current document. It allows authors to customize the styling of text fragments.</p>\n  </dd>\n</dl>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://wicg.github.io/scroll-to-text-fragment/#fragmentdirective","title":"URL Fragment Text Directives"},{"bcdSpecificationURL":"https://drafts.csswg.org/css-pseudo/#selectordef-target-text","title":"CSS Pseudo-Elements Module Level 4"}],"query":"html.elements.a.text_fragments,api.FragmentDirective,css.selectors.target-text"}},{"type":"prose","value":{"id":"browser_compatibility","title":"Browser compatibility","isH3":false,"content":""}},{"type":"browser_compatibility","value":{"title":"html.elements.a.text_fragments","id":"html.elements.a.text_fragments","isH3":true,"query":"html.elements.a.text_fragments"}},{"type":"browser_compatibility","value":{"title":"api.FragmentDirective","id":"api.FragmentDirective","isH3":true,"query":"api.FragmentDirective"}},{"type":"browser_compatibility","value":{"title":"css.selectors.target-text","id":"css.selectors.target-text","isH3":true,"query":"css.selectors.target-text"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://web.dev/articles/text-fragments\" class=\"external\" target=\"_blank\">Boldly link where no one has linked before: Text Fragments</a></li>\n</ul>"}}],"toc":[{"text":"Concepts and usage","id":"concepts_and_usage"},{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Reference","id":"reference"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"Text fragments allow linking directly to a specific portion of text in a web document, without requiring the author to annotate it with an ID, using particular syntax in the URL fragment. Supporting browsers are free to choose how to draw attention to the linked text, e.g. with a color highlight and/or scrolling to the content on the page. This is useful because it allows web content authors to deep-link to other content they don't control, without relying on the presence of IDs to make that possible. Building on top of that, it could be used to generate more effective content-sharing links for users to pass to one another.","popularity":0.0098,"modified":"2023-10-25T17:27:32.000Z","source":{"folder":"en-us/web/text_fragments","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/text_fragments/index.md","last_commit_url":"https://github.com/mdn/content/commit/835d6632d59993861a0458510402787f8a2c3cb3","filename":"index.md"},"short_title":"Text fragments","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/Text_fragments","title":"Text fragments"}],"pageTitle":"Text fragments | MDN","noIndexing":false}}