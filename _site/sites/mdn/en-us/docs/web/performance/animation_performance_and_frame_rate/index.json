{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Animation performance and frame rate","mdn_url":"/en-US/docs/Web/Performance/Animation_performance_and_frame_rate","locale":"en-US","native":"English (US)","sidebarHTML":"\n<ol><li><em><a href=\"/en-US/docs/Web/Performance/Animation_performance_and_frame_rate\" aria-current=\"page\">Animation performance and frame rate</a></em></li><li><a href=\"/en-US/docs/Web/Performance/CSS_JavaScript_animation_performance\">CSS and JavaScript animation performance</a></li><li><a href=\"/en-US/docs/Web/Performance/Critical_rendering_path\">Critical rendering path</a></li><li><a href=\"/en-US/docs/Web/Performance/Lazy_loading\">Lazy loading</a></li><li><a href=\"/en-US/docs/Web/Performance/Navigation_and_resource_timings\">Navigation and resource timings</a></li><li><a href=\"/en-US/docs/Web/Performance/Optimizing_startup_performance\">Optimizing startup performance</a></li><li><a href=\"/en-US/docs/Web/Performance/Rum-vs-Synthetic\">Performance Monitoring: RUM vs. synthetic monitoring</a></li><li><a href=\"/en-US/docs/Web/Performance/Performance_budgets\">Performance budgets</a></li><li><a href=\"/en-US/docs/Web/Performance/Fundamentals\">Performance fundamentals</a></li><li><a href=\"/en-US/docs/Web/Performance/How_browsers_work\">Populating the page: how browsers work</a></li><li><a href=\"/en-US/docs/Web/Performance/How_long_is_too_long\">Recommended Web Performance Timings: How long is too long?</a></li><li><a href=\"/en-US/docs/Web/Performance/Speculative_loading\">Speculative loading</a></li><li><a href=\"/en-US/docs/Web/Performance/Understanding_latency\">Understanding latency</a></li><li><a href=\"/en-US/docs/Web/Performance/dns-prefetch\">Using dns-prefetch</a></li></ol>\n","sidebarMacro":"QuickLinksWithSubpages","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Animation on the web can be done via <a href=\"/en-US/docs/Web/API/SVGAnimationElement\" title=\"SVG\"><code>SVG</code></a>, <a href=\"/en-US/docs/Web/API/window/requestAnimationFrame\" title=\"JavaScript\"><code>JavaScript</code></a>, including <a href=\"/en-US/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> and <a href=\"/en-US/docs/Web/API/WebGL_API\" title=\"WebGL\"><code>WebGL</code></a>, CSS <a href=\"/en-US/docs/Web/CSS/animation\"><code>animation</code></a>, <a href=\"/en-US/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a>, animated gifs and even animated PNGs and other image types. The performance cost of animating a CSS property can vary from one property to another, and animating expensive CSS properties can result in <a href=\"/en-US/docs/Glossary/Jank\">jank</a> as the browser struggles to hit a smooth <a href=\"/en-US/docs/Glossary/FPS\">frame rate</a>.</p>\n<p>For animated media, such as video and animated gifs, the main performance concern is file size - downloading the file fast enough to not negatively impact performance is the greatest issue. Code based animations, be it CSS, SVG, &lt;canvas&gt;, webGL or other JavaScript animations, can cause performance issues even if the bandwidth footprint is small. These animations can consume CPU and/or cause jank.</p>\n<p>Users expect all interface interactions to be smooth and all user interfaces to be responsive. Animation can help make a site feel faster and responsive, but animations can also make a site feel slower and janky if not done correctly. Responsive user interfaces have a frame rate of 60 frames per second (fps). While it is not always possible to maintain 60fps, it is important to maintain a high and steady frame rate for all animations.</p>\n<p>With <a href=\"/en-US/docs/Web/CSS/CSS_animations/Using_CSS_animations\">CSS animations</a> you specify a number of <a href=\"/en-US/docs/Web/CSS/@keyframes\">keyframes</a>, each of which uses CSS to define the appearance of the element at a particular stage of the animation. The browser creates the animation as a transition from each keyframe to the next.</p>\n<p>Compared with animating elements using JavaScript, CSS animations can be easier to create. They can also give better performance, as they give the browser more control over when to render frames, and to drop frames if necessary.</p>\n<p>However, the performance cost of modifying a CSS property can vary from one property to another. It's commonly accepted that 60 frames per second is the rate at which animations will appear smooth. For a rate of 60 frames per second, the browser has 16.7 milliseconds to execute scripts, recalculate styles and layout if needed, and repaint the area being updated. Slow scripts and animating expensive CSS properties can result in <a href=\"/en-US/docs/Glossary/Jank\">jank</a> as the browser struggles to hit a smooth frame rate.</p>"}},{"type":"prose","value":{"id":"the_rendering_waterfall","title":"The rendering waterfall","isH3":false,"content":"<p>The process a browser uses to paint changes to a page when an element is animating CSS properties can be described as a waterfall consisting of the following steps:</p>\n<p>\n  <img src=\"/en-US/docs/Web/Performance/Animation_performance_and_frame_rate/css-rendering-waterfall.png\" alt=\"Flowchart of the CSS rendering waterfall. In order, the steps are recalculate style, layout, and paint.\" width=\"1092\" height=\"406\" loading=\"lazy\">\n</p>\n<ol>\n  <li><strong>Recalculate Style</strong>: when a property for an element changes, the browser must recalculate computed styles.</li>\n  <li><strong>Layout</strong>: next, the browser uses the computed styles to figure out the position and geometry for the elements. This operation is labeled \"layout\" but is also sometimes called \"reflow\".</li>\n  <li><strong>Paint</strong>: finally, the browser needs to repaint the elements to the screen. One last step is not shown in this sequence: the page may be split into layers, which are painted independently and then combined in a process called \"Composition\".</li>\n</ol>\n<p>This sequence needs to fit into a single frame, since the screen isn't updated until it is complete.</p>"}},{"type":"prose","value":{"id":"css_property_cost","title":"CSS property cost","isH3":false,"content":"<p>In the context of the rendering waterfall, some properties are more expensive than others:</p>\n<ul>\n  <li>Properties that affect an element's <strong>geometry</strong> or <strong>position</strong> trigger a:\n    <ul>\n      <li>style recalculation</li>\n      <li>layout</li>\n      <li>repaint</li>\n    </ul>For example: <a href=\"/en-US/docs/Web/CSS/left\"><code>left</code></a>, <a href=\"/en-US/docs/Web/CSS/max-width\"><code>max-width</code></a>, <a href=\"/en-US/docs/Web/CSS/border-width\"><code>border-width</code></a>, <a href=\"/en-US/docs/Web/CSS/margin-left\"><code>margin-left</code></a>, <a href=\"/en-US/docs/Web/CSS/font-size\"><code>font-size</code></a>\n  </li>\n  <li>Properties that do <em>not</em> affect geometry or position and are <em>not rendered</em> in their own layer, do <em>not</em> trigger a layout. They do trigger a:\n    <ul>\n      <li>style recalculation</li>\n      <li>repaint</li>\n    </ul>For example: <a href=\"/en-US/docs/Web/CSS/color\"><code>color</code></a>\n  </li>\n  <li>Properties that <em>are rendered</em> in their <strong>own layer</strong> don't even trigger a repaint, because the update is handled in <strong>composition</strong>. These do trigger:\n    <ul>\n      <li>style recalculation</li>\n    </ul>For example: <a href=\"/en-US/docs/Web/CSS/transform\"><code>transform</code></a>, <a href=\"/en-US/docs/Web/CSS/opacity\"><code>opacity</code></a>\n  </li>\n</ul>"}},{"type":"prose","value":{"id":"developer_tools","title":"Developer tools","isH3":false,"content":"<p>Most web browsers include tools to provide insight into the work the browser is doing when it animates elements of a page. Using these tools you can measure an application's animation frame rate, and diagnose performance bottlenecks if any are found.</p>\n<ul>\n  <li><a href=\"https://developer.chrome.com/docs/devtools/#performance\" class=\"external\" target=\"_blank\">Chrome performance tools</a></li>\n  <li><a href=\"https://firefox-source-docs.mozilla.org/devtools-user/performance/\" class=\"external\" target=\"_blank\">Firefox performance tools</a></li>\n</ul>"}}],"toc":[{"text":"The rendering waterfall","id":"the_rendering_waterfall"},{"text":"CSS property cost","id":"css_property_cost"},{"text":"Developer tools","id":"developer_tools"}],"summary":"Animation on the web can be done via SVG, JavaScript, including <canvas> and WebGL, CSS animation, <video>, animated gifs and even animated PNGs and other image types. The performance cost of animating a CSS property can vary from one property to another, and animating expensive CSS properties can result in jank as the browser struggles to hit a smooth frame rate.","popularity":0.0038,"modified":"2023-07-04T10:01:14.000Z","source":{"folder":"en-us/web/performance/animation_performance_and_frame_rate","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/performance/animation_performance_and_frame_rate/index.md","last_commit_url":"https://github.com/mdn/content/commit/e74627e6fd9ba19696b918c2bdddfff8aa160787","filename":"index.md"},"short_title":"Animation performance and frame rate","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/Performance","title":"Web performance"},{"uri":"/en-US/docs/Web/Performance/Animation_performance_and_frame_rate","title":"Animation performance and frame rate"}],"pageTitle":"Animation performance and frame rate - Web performance | MDN","noIndexing":false}}