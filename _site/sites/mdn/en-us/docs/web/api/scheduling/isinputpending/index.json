{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Scheduling: isInputPending() method","mdn_url":"/en-US/docs/Web/API/Scheduling/isInputPending","locale":"en-US","native":"English (US)","browserCompat":["api.Scheduling.isInputPending"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Prioritized_Task_Scheduling_API\">Prioritized Task Scheduling API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/Scheduling\"><code>Scheduling</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><em><code>isInputPending()</code> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Prioritized Task Scheduling API</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/scheduling\"><code>Navigator.scheduling</code></a></li><li><a href=\"/en-US/docs/Web/API/Scheduler\"><code>Scheduler</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskController\"><code>TaskController</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskPriorityChangeEvent\"><code>TaskPriorityChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskSignal\"><code>TaskSignal</code></a></li><li><a href=\"/en-US/docs/Web/API/scheduler_property\"><code>scheduler_property</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>The <strong><code>isInputPending()</code></strong> method of the <a href=\"/en-US/docs/Web/API/Scheduling\"><code>Scheduling</code></a> interface allows you to check whether there are pending input events in the event queue, indicating that the user is attempting to interact with the page.</p>\n<p>This feature is useful in situations where you have a queue of tasks to run, and you want to yield to the main thread regularly to allow user interaction to occur so that the app is kept as responsive and performant as possible. <code>isInputPending()</code> allows you to yield only when there is input pending, rather than having to do it at arbitrary intervals.</p>\n<p><code>isInputPending()</code> is called using <code>navigator.scheduling.isInputPending()</code>.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">isInputPending</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">isInputPending</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"options\"><a href=\"#options\"><code>options</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>An object providing options. Currently, the only option is:</p>\n    <dl>\n      <dt id=\"includecontinuous\"><a href=\"#includecontinuous\"><code>includeContinuous</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>A boolean, which is <code>false</code> by default. If set to <code>true</code>, it indicates that continuous events should be considered when checking for pending input. Continuous events are trusted events (events dispatched by the browser) that are fired successively, such as <a href=\"/en-US/docs/Web/API/Element/mousemove_event\" title=\"mousemove\"><code>mousemove</code></a>, <a href=\"/en-US/docs/Web/API/Element/wheel_event\" title=\"wheel\"><code>wheel</code></a>, <a href=\"/en-US/docs/Web/API/Element/touchmove_event\" title=\"touchmove\"><code>touchmove</code></a>, <a href=\"/en-US/docs/Web/API/HTMLElement/drag_event\" title=\"drag\"><code>drag</code></a>, <a href=\"/en-US/docs/Web/API/Element/pointermove_event\" title=\"pointermove\"><code>pointermove</code></a>, and <a href=\"/en-US/docs/Web/API/Element/pointerrawupdate_event\" title=\"pointerrawupdate\"><code>pointerrawupdate</code></a>.</p>\n      </dd>\n    </dl>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>A boolean that indicates whether there are pending input events in the event queue (<code>true</code>) or not (<code>false</code>).</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>We can use <code>isInputPending()</code> inside a task runner structure to run the <code>yield()</code> function only when the user is attempting to interact with the page:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token keyword\">yield</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Create an array of functions to run</span>\n  <span class=\"token keyword\">const</span> tasks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Yield to a pending user input</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>scheduling<span class=\"token punctuation\">.</span><span class=\"token function\">isInputPending</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">yield</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Shift the first task off the tasks array</span>\n      <span class=\"token keyword\">const</span> task <span class=\"token operator\">=</span> tasks<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Run the task</span>\n      <span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This allows you to avoid blocking the main thread when the user is actively interacting with the page, potentially providing a smoother user experience. However, by only yielding when necessary, we can continue running the current task when there are no user inputs to process. This also avoids tasks being placed at the back of the queue behind other non-essential browser-initiated tasks that were scheduled after the current one.</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://wicg.github.io/is-input-pending/#dom-scheduling-isinputpending","title":"Early detection of input events"}],"query":"api.Scheduling.isInputPending"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.Scheduling.isInputPending"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://engineering.fb.com/2019/04/22/developer-tools/isinputpending-api/\" class=\"external\" target=\"_blank\">Faster input events with Facebook's first browser API contribution</a> on engineering.fb.com (2019)</li>\n  <li><a href=\"https://developer.chrome.com/articles/isinputpending/\" class=\"external\" target=\"_blank\">Better JS scheduling with isInputPending()</a> on developer.chrome.com (2020)</li>\n  <li><a href=\"https://web.dev/articles/optimize-long-tasks#yield_only_when_necessary\" class=\"external\" target=\"_blank\">Optimizing long tasks</a> on web.dev (2022)</li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The isInputPending() method of the Scheduling interface allows you to check whether there are pending input events in the event queue, indicating that the user is attempting to interact with the page.","popularity":0.0012,"modified":"2023-10-25T17:27:32.000Z","source":{"folder":"en-us/web/api/scheduling/isinputpending","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/scheduling/isinputpending/index.md","last_commit_url":"https://github.com/mdn/content/commit/835d6632d59993861a0458510402787f8a2c3cb3","filename":"index.md"},"short_title":"isInputPending()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Scheduling","title":"Scheduling"},{"uri":"/en-US/docs/Web/API/Scheduling/isInputPending","title":"isInputPending()"}],"pageTitle":"Scheduling: isInputPending() method - Web APIs | MDN","noIndexing":false}}