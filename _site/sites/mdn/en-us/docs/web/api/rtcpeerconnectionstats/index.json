{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"RTCPeerConnectionStats","mdn_url":"/en-US/docs/Web/API/RTCPeerConnectionStats","locale":"en-US","native":"English (US)","browserCompat":["api.RTCStatsReport.type_peer-connection"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a></strong></li><li><strong><em><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats\" aria-current=\"page\"><code>RTCPeerConnectionStats</code></a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/dataChannelsClosed\"><code>dataChannelsClosed</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/dataChannelsOpened\"><code>dataChannelsOpened</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/id\"><code>id</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/timestamp\"><code>timestamp</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/type\"><code>type</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebRTC</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaDevices/getUserMedia\"><code>MediaDevices.getUserMedia()</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/mediaDevices\"><code>Navigator.mediaDevices</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCCertificate\"><code>RTCCertificate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFSender\"><code>RTCDTMFSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFToneChangeEvent\"><code>RTCDTMFToneChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannel\"><code>RTCDataChannel</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannelEvent\"><code>RTCDataChannelEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDtlsTransport\"><code>RTCDtlsTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCEncodedAudioFrame\"><code>RTCEncodedAudioFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCEncodedVideoFrame\"><code>RTCEncodedVideoFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCErrorEvent\"><code>RTCErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate\"><code>RTCIceCandidate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceTransport\"><code>RTCIceTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceErrorEvent\"><code>RTCPeerConnectionIceErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceEvent\"><code>RTCPeerConnectionIceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver\"><code>RTCRtpReceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver/transform\"><code>RTCRtpReceiver.transform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransform\"><code>RTCRtpScriptTransform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer\"><code>RTCRtpScriptTransformer</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender/transform\"><code>RTCRtpSender.transform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpTransceiver\"><code>RTCRtpTransceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSctpTransport\"><code>RTCSctpTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSessionDescription\"><code>RTCSessionDescription</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTrackEvent\"><code>RTCTrackEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTransformEvent\"><code>RTCTransformEvent</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>RTCPeerConnectionStats</code></strong> dictionary of the <a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a> provides information about the high level peer connection (<a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a>).</p>\n<p>\n  In particular, it provides the number of unique data channels that have been opened, and the number of opened channels that have been closed.\n  This allows the current number of open channels to be calculated.\n</p>\n<p>These statistics can be obtained by iterating the <a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a> returned by <a href=\"/en-US/docs/Web/API/RTCPeerConnection/getStats\"><code>RTCPeerConnection.getStats()</code></a> until you find a report with the <a href=\"#type\"><code>type</code></a> of <code>peer-connection</code>.</p>"}},{"type":"prose","value":{"id":"instance_properties","title":"Instance properties","isH3":false,"content":"<dl>\n  <dt id=\"datachannelsopened\"><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/dataChannelsOpened\" title=\"dataChannelsOpened\"><code>dataChannelsOpened</code></a></dt>\n  <dd>\n    <p>A positive integer value indicating the number of unique <a href=\"/en-US/docs/Web/API/RTCDataChannel\"><code>RTCDataChannel</code></a> objects that have entered the <a href=\"/en-US/docs/Web/API/RTCDataChannel/readyState#open\"><code>open</code></a> state during their lifetime.</p>\n  </dd>\n  <dt id=\"datachannelsclosed\"><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/dataChannelsClosed\" title=\"dataChannelsClosed\"><code>dataChannelsClosed</code></a></dt>\n  <dd>\n    <p>\n      A positive integer value indicating the number of unique <a href=\"/en-US/docs/Web/API/RTCDataChannel\"><code>RTCDataChannel</code></a> objects that have left the <a href=\"/en-US/docs/Web/API/RTCDataChannel/readyState#open\"><code>open</code></a> state during their lifetime (channels that transition to <a href=\"/en-US/docs/Web/API/RTCDataChannel/readyState#closing\"><code>closing</code></a> or <a href=\"/en-US/docs/Web/API/RTCDataChannel/readyState#closed\"><code>closed</code></a> without ever being <code>open</code> are not counted in this number).\n      A channel will leave the <code>open</code> state if either end of the connection or the underlying transport is closed.\n    </p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"common_instance_properties","title":"Common instance properties","isH3":true,"content":"<p>The following properties are common to all WebRTC statistics objects.</p><!-- RTCStats -->\n<dl>\n  <dt id=\"id\"><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/id\" title=\"id\"><code>id</code></a></dt>\n  <dd>\n    <p>A string that uniquely identifies the object that is being monitored to produce this set of statistics.</p>\n  </dd>\n  <dt id=\"timestamp\"><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/timestamp\" title=\"timestamp\"><code>timestamp</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMHighResTimeStamp\"><code>DOMHighResTimeStamp</code></a> object indicating the time at which the sample was taken for this statistics object.</p>\n  </dd>\n  <dt id=\"type\"><a href=\"/en-US/docs/Web/API/RTCPeerConnectionStats/type\" title=\"type\"><code>type</code></a></dt>\n  <dd>\n    <p>A string with the value <code>\"peer-connection\"</code>, indicating the type of statistics that the object contains.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  This example shows a function to return the total number of open connections, or <code>null</code> if no statistics are provided.\n  This might be called in a loop, similar to the approach used in <a href=\"/en-US/docs/Web/API/RTCPeerConnection/getStats#examples\"><code>RTCPeerConnection.getStats()</code> example</a>\n</p>\n<p>\n  The function waits for the result of a call to <a href=\"/en-US/docs/Web/API/RTCPeerConnection/getStats\"><code>RTCPeerConnection.getStats()</code></a> and then iterates the returned <a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a> to get just the stats of type <code>\"peer-connection\"</code>.\n  It then returns the total number of open channels, or <code>null</code>, using the data in the report.\n</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">numberOpenConnections</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">peerConnection</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> stats <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> peerConnection<span class=\"token punctuation\">.</span><span class=\"token function\">getStats</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> peerConnectionStats <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  stats<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">report</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>report<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"peer-connection\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      peerConnectionStats <span class=\"token operator\">=</span> report<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nresult <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> peerConnectionStats<span class=\"token punctuation\">.</span>dataChannelsOpened <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> peerConnectionStats<span class=\"token punctuation\">.</span>dataChannelsClosed<span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> peerConnectionStats<span class=\"token punctuation\">.</span>dataChannelsOpened <span class=\"token operator\">-</span> peerConnectionStats<span class=\"token punctuation\">.</span>dataChannelsClosed<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/webrtc-stats/#dom-rtcstatstype-peer-connection","title":"Identifiers for WebRTC's Statistics API"}],"query":"api.RTCStatsReport.type_peer-connection"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.RTCStatsReport.type_peer-connection"}}],"toc":[{"text":"Instance properties","id":"instance_properties"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The RTCPeerConnectionStats dictionary of the WebRTC API provides information about the high level peer connection (RTCPeerConnection).","popularity":0,"modified":"2023-05-23T22:47:10.000Z","source":{"folder":"en-us/web/api/rtcpeerconnectionstats","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/rtcpeerconnectionstats/index.md","last_commit_url":"https://github.com/mdn/content/commit/f11f0a8b40d9c41eeff21a88d6af00420808cbe6","filename":"index.md"},"short_title":"RTCPeerConnectionStats","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/RTCPeerConnectionStats","title":"RTCPeerConnectionStats"}],"pageTitle":"RTCPeerConnectionStats - Web APIs | MDN","noIndexing":false}}