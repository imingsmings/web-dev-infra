{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"BeforeUnloadEvent","mdn_url":"/en-US/docs/Web/API/BeforeUnloadEvent","locale":"en-US","native":"English (US)","browserCompat":["api.BeforeUnloadEvent"],"sidebarHTML":"<ol><li><strong><em><a href=\"/en-US/docs/Web/API/BeforeUnloadEvent\" aria-current=\"page\"><code>BeforeUnloadEvent</code></a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/BeforeUnloadEvent/returnValue\"><code>returnValue</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>BeforeUnloadEvent</code></strong> interface represents the event object for the <a href=\"/en-US/docs/Web/API/Window/beforeunload_event\" title=\"beforeunload\"><code>beforeunload</code></a> event, which is fired when the current window, contained document, and associated resources are about to be unloaded.</p>\n<p>See the <a href=\"/en-US/docs/Web/API/Window/beforeunload_event\" title=\"beforeunload\"><code>beforeunload</code></a> event reference for detailed guidance on using this event.</p><svg viewBox=\"-1 -1 650 42\" preserveAspectRatio=\"xMinYMin meet\">\n  <a style=\"text-decoration: none;\" xlink:href=\"/en-US/docs/Web/API/Event\">\n    <rect x=\"0\" y=\"0\" width=\"75\" height=\"25\" fill=\"#fff\" stroke=\"#D4DDE4\" stroke-width=\"2px\"></rect>\n    <text x=\"37.5\" y=\"16\" font-size=\"10px\" fill=\"#4D4E53\" text-anchor=\"middle\">\n      Event\n    </text>\n  </a>\n  <line x1=\"75\" y1=\"14\" x2=\"105\" y2=\"14\" stroke=\"#D4DDE4\"></line>\n  <polyline points=\"75,14 85,9 85,19 75,14\" stroke=\"#D4DDE4\" fill=\"#fff\"></polyline>\n  <a style=\"text-decoration: none;\" xlink:href=\"/en-US/docs/Web/API/BeforeUnloadEvent\" aria-current=\"page\">\n    <rect x=\"105\" y=\"0\" width=\"136\" height=\"25\" fill=\"#F4F7F8\" stroke=\"#D4DDE4\" stroke-width=\"2px\"></rect>\n    <text x=\"173\" y=\"16\" font-size=\"10px\" fill=\"#4D4E53\" text-anchor=\"middle\">\n      BeforeUnloadEvent\n    </text>\n  </a></svg>"}},{"type":"prose","value":{"id":"instance_properties","title":"Instance properties","isH3":false,"content":"<p><em>Inherits properties from its parent, <a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a>.</em></p>\n<dl>\n  <dt id=\"returnvalue\"><a href=\"/en-US/docs/Web/API/BeforeUnloadEvent/returnValue\" title=\"returnValue\"><code>returnValue</code></a> <abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></dt>\n  <dd>\n    <p>When set to a <a href=\"/en-US/docs/Glossary/Truthy\">truthy</a> value, triggers a browser-controlled confirmation dialog asking users to confirm if they want to leave the page when they try to close or reload it. This is a legacy feature, and best practice is to trigger the dialog by invoking <code>event.preventDefault()</code>, while also setting <code>returnValue</code> to support legacy cases.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"instance_methods","title":"Instance methods","isH3":false,"content":"<p><em>Inherits methods from its parent, <a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a>.</em></p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>In the following example we have an HTML text <a href=\"/en-US/docs/Web/HTML/Element/input\"><code>&lt;input&gt;</code></a> to represent some data that could be changed and require saving:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Our JavaScript attaches an <a href=\"/en-US/docs/Web/API/HTMLElement/input_event\" title=\"input\"><code>input</code></a> event listener to the <code>&lt;input&gt;</code> element that listens for changes in the inputted value. When the value is updated to a non-empty value, a <a href=\"/en-US/docs/Web/API/Window/beforeunload_event\" title=\"beforeunload\"><code>beforeunload</code></a> event listener is attached to the <a href=\"/en-US/docs/Web/API/Window\"><code>Window</code></a> object.</p>\n<p>If the value becomes an empty string again (i.e. the value is deleted), the <code>beforeunload</code> event listener is removed again â€” as mentioned above in the <a href=\"#usage_notes\">Usage notes</a>, the listener should be removed when there is no unsaved data to warn about.</p>\n<p>The <code>beforeunload</code> event handler function invokes <code>event.preventDefault()</code> to trigger the warning dialog when the user closes or navigates the tab. We have also included <code>event.returnValue = true</code> in the handler function so that any browsers that don't support the <code>event.preventDefault()</code> mechanism will still run the demo correctly.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">beforeUnloadHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Recommended</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Included for legacy support, e.g. Chrome/Edge &lt; 119</span>\n  event<span class=\"token punctuation\">.</span>returnValue <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> nameInput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnameInput<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"input\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">!==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"beforeunload\"</span><span class=\"token punctuation\">,</span> beforeUnloadHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"beforeunload\"</span><span class=\"token punctuation\">,</span> beforeUnloadHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>When the <code>&lt;input&gt;</code> value is non-empty, if you try to close, navigate, or reload the page the browser displays the warning dialog. Try it out:</p><div class=\"code-example\" id=\"sect1\"><p class=\"example-header\"></p><iframe class=\"sample-code-frame\" title=\"Examples sample\" id=\"frame_examples\" width=\"100%\" height=\"60\" src=\"http://localhost:5042/en-US/docs/Web/API/BeforeUnloadEvent/runner.html?id=examples\" loading=\"lazy\"></iframe></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#the-beforeunloadevent-interface","title":"HTML Standard"}],"query":"api.BeforeUnloadEvent"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.BeforeUnloadEvent"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Window/beforeunload_event\" title=\"beforeunload\"><code>beforeunload</code></a> event</li>\n</ul>"}}],"toc":[{"text":"Instance properties","id":"instance_properties"},{"text":"Instance methods","id":"instance_methods"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The BeforeUnloadEvent interface represents the event object for the beforeunload event, which is fired when the current window, contained document, and associated resources are about to be unloaded.","popularity":0.0068,"modified":"2023-10-30T11:07:40.000Z","source":{"folder":"en-us/web/api/beforeunloadevent","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/beforeunloadevent/index.md","last_commit_url":"https://github.com/mdn/content/commit/5765d9697cdba4cdbcc45afd98f47ba3c1416024","filename":"index.md"},"short_title":"BeforeUnloadEvent","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/BeforeUnloadEvent","title":"BeforeUnloadEvent"}],"pageTitle":"BeforeUnloadEvent - Web APIs | MDN","noIndexing":false}}