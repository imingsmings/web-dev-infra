{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"PaymentRequest: PaymentRequest() constructor","mdn_url":"/en-US/docs/Web/API/PaymentRequest/PaymentRequest","locale":"en-US","native":"English (US)","browserCompat":["api.PaymentRequest.PaymentRequest"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Payment_Request_API\">Payment Request API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/PaymentRequest\"><code>PaymentRequest</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><em><code>PaymentRequest()</code> </em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/PaymentRequest/id\"><code>id</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingAddress\"><code>shippingAddress</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingOption\"><code>shippingOption</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingType\"><code>shippingType</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/PaymentRequest/abort\"><code>abort()</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/canMakePayment\"><code>canMakePayment()</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/show\"><code>show()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/PaymentRequest/merchantvalidation_event\"><code>merchantvalidation</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/paymentmethodchange_event\"><code>paymentmethodchange</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingaddresschange_event\"><code>shippingaddresschange</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingoptionchange_event\"><code>shippingoptionchange</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Payment Request API</summary><ol><li><a href=\"/en-US/docs/Web/API/HTMLIFrameElement/allowPaymentRequest\"><code>HTMLIFrameElement.allowPaymentRequest</code></a></li><li><a href=\"/en-US/docs/Web/API/MerchantValidationEvent\"><code>MerchantValidationEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentMethodChangeEvent\"><code>PaymentMethodChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestUpdateEvent\"><code>PaymentRequestUpdateEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentResponse\"><code>PaymentResponse</code></a></li><li><a href=\"/en-US/docs/Web/API/SecurePaymentConfirmationRequest\"><code>SecurePaymentConfirmationRequest</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard secure\" id=\"sect1\"><p><strong>Secure context:</strong> This feature is available only in <a href=\"/en-US/docs/Web/Security/Secure_Contexts\">secure contexts</a> (HTTPS), in some or all <a href=\"#browser_compatibility\">supporting browsers</a>.</p></div>\n<p>\n  The <strong><code>PaymentRequest()</code></strong> constructor\n  creates a new <a href=\"/en-US/docs/Web/API/PaymentRequest\"><code>PaymentRequest</code></a> object which will be used to handle the\n  process of generating, validating, and submitting a payment request.\n</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">new</span> <span class=\"token class-name\">PaymentRequest</span><span class=\"token punctuation\">(</span>methodData<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">PaymentRequest</span><span class=\"token punctuation\">(</span>methodData<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"methoddata\"><a href=\"#methoddata\"><code>methodData</code></a></dt>\n  <dd>\n    <p>\n      Contains an array of identifiers for the payment methods the merchant website\n      accepts and any associated payment method specific data. Each item in the array\n      contains the following fields:\n    </p>\n    <dl>\n      <dt id=\"supportedmethods\"><a href=\"#supportedmethods\"><code>supportedMethods</code></a></dt>\n      <dd>\n        <p>A string containing a <a href=\"/en-US/docs/Web/API/Payment_Request_API/Concepts#payment_method_identifiers\">payment method identifier</a>. This is either a URL or one of the the <a href=\"/en-US/docs/Web/API/Payment_Request_API/Concepts#standardized_payment_method_identifiers\">standardized payment method identifiers</a>. The value and structure of the <code>data</code> field will vary depending on the value of the <code>supportedMethods</code> field.</p>\n      </dd>\n      <dt id=\"data\"><a href=\"#data\"><code>data</code></a></dt>\n      <dd>\n        <p>\n          A JSON-serializable object that provides optional information that might be\n          needed by the supported payment methods. This has to conform to the type expected\n          by the payment handler indicated by <code>supportedMethods</code>. Developers need to consult\n          whomever controls the payment methods for the expected shape of the data object. If <code>supportedMethods</code> is <code>secure-payment-confirmation</code>, then <code>data</code> needs to conform to the <a href=\"/en-US/docs/Web/API/SecurePaymentConfirmationRequest\"><code>SecurePaymentConfirmationRequest</code></a> dictionary.\n        </p>\n      </dd>\n    </dl>\n  </dd>\n  <dt id=\"details\"><a href=\"#details\"><code>details</code></a></dt>\n  <dd>\n    <p>\n      Provides information about the requested transaction. This parameter contains the\n      following fields:\n    </p>\n    <dl>\n      <dt id=\"total\"><a href=\"#total\"><code>total</code></a></dt>\n      <dd>\n        <p>The total amount of the payment request.</p>\n      </dd>\n      <dt id=\"id\"><a href=\"#id\"><code>id</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          A free-form identifier for this payment request. If a value is not supplied, the\n          browser will construct one.\n        </p>\n      </dd>\n      <dt id=\"displayitems\"><a href=\"#displayitems\"><code>displayItems</code></a></dt>\n      <dd>\n        <p>\n          An array of optional line items for the payment request that the user agent may\n          display, such as product details, tax, and shipping.\n        </p>\n      </dd>\n      <dt id=\"shippingoptions\"><a href=\"#shippingoptions\"><code>shippingOptions</code></a></dt>\n      <dd>\n        <p>\n          The shipping options the user may choose from. If this sequence is blank, it\n          indicates the merchant cannot ship to the current shipping address. The default\n          shipping option may be indicated in this sequence.\n        </p>\n      </dd>\n      <dt id=\"modifiers\"><a href=\"#modifiers\"><code>modifiers</code></a></dt>\n      <dd>\n        <p>\n          Modifiers for specific payment methods; for example, adjusting the total amount\n          based on the payment method. This parameter contains the following fields:\n        </p>\n        <dl>\n          <dt id=\"additionaldisplayitems\"><a href=\"#additionaldisplayitems\"><code>additionalDisplayItems</code></a></dt>\n          <dd>\n            <p>\n              An array of items to be appended to the <code>details.displayItems</code>\n              property. This property is commonly used to add a discount or surcharge line\n              item indicating the different amount in <code>details.modifiers.total</code>.\n            </p>\n          </dd>\n          <dt id=\"data_2\"><a href=\"#data_2\"><code>data</code></a></dt>\n          <dd>\n            <p>\n              A JSON-serializable object that provides optional information that might be\n              needed by the supported payment methods.\n            </p>\n          </dd>\n          <dt id=\"total_2\"><a href=\"#total_2\"><code>total</code></a></dt>\n          <dd>\n            <p>\n              A total amount for the payment request that overrides value in\n              details.total. This is typically used when\n              <code>details.modifiers.additionalItems</code> adds a discount or a purchase\n              to the request.\n            </p>\n          </dd>\n        </dl>\n      </dd>\n    </dl>\n  </dd>\n  <dt id=\"options\"><a href=\"#options\"><code>options</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>\n      Lets you set options that control the behavior of the user agent. This parameter\n      contains the following fields:\n    </p>\n    <dl>\n      <dt id=\"requestpayername\"><a href=\"#requestpayername\"><code>requestPayerName</code></a></dt>\n      <dd>\n        <p>\n          A Boolean indicating whether the user agent should collect the payer's name and\n          submit it with the payment request. The default is <code>false</code>.\n        </p>\n      </dd>\n      <dt id=\"requestpayeremail\"><a href=\"#requestpayeremail\"><code>requestPayerEmail</code></a></dt>\n      <dd>\n        <p>\n          A Boolean indicating whether the user agent should collect the payer's email\n          address and submit it with the payment request. The default is <code>false</code>.\n        </p>\n      </dd>\n      <dt id=\"requestpayerphone\"><a href=\"#requestpayerphone\"><code>requestPayerPhone</code></a></dt>\n      <dd>\n        <p>\n          A Boolean indicating whether the user agent should collect the payer's phone\n          number and submit it with the payment request. The default is <code>false</code>.\n        </p>\n      </dd>\n      <dt id=\"requestshipping\"><a href=\"#requestshipping\"><code>requestShipping</code></a></dt>\n      <dd>\n        <p>\n          A Boolean indicating whether the user agent should collect the payer's shipping\n          address and submit it with the payment request. If you set this type to true, you\n          should select an appropriate <code>shippingType</code>. The default is\n          <code>false</code>.\n        </p>\n      </dd>\n      <dt id=\"shippingtype\"><a href=\"#shippingtype\"><code>shippingType</code></a></dt>\n      <dd>\n        <p>\n          Lets you specify how the user interface refers to shipping when the word\n          'shipping' isn't appropriate for your use case. For example, in English speaking\n          countries you would say \"pizza delivery\" not \"pizza shipping\". Valid values are\n          <code>\"shipping\"</code>, <code>\"delivery\"</code>, and <code>\"pickup\"</code>.\n          Quotation marks must be included. The default value is <code>\"shipping\"</code>.\n        </p>\n      </dd>\n    </dl>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>\n  A new <a href=\"/en-US/docs/Web/API/PaymentRequest\"><code>PaymentRequest</code></a> object, configured for use as configured by the\n  input parameters.\n</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<dl>\n  <dt id=\"securityerror\"><a href=\"#securityerror\"><code>SecurityError</code></a> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>Use of this feature was blocked by a <a href=\"/en-US/docs/Web/HTTP/Permissions_Policy\">Permissions Policy</a>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  The following example shows minimal functionality and focuses instead on showing the\n  complete context of instantiating a <code>PaymentRequest</code> object.\n</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> supportedInstruments <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">supportedMethods</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://example.com/pay\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> details <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Donation\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">\"USD\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">\"65.00\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">displayItems</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Original donation amount\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">\"USD\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">\"65.00\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">shippingOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"standard\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Standard shipping\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">\"USD\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.00\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">selected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">requestShipping</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PaymentRequest</span><span class=\"token punctuation\">(</span>supportedInstruments<span class=\"token punctuation\">,</span> details<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Add event listeners here.</span>\n  <span class=\"token comment\">// Call show() to trigger the browser's payment flow.</span>\n  request\n    <span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">instrumentResponse</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something with the response from the UI.</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something with the error from request.show().</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Catch any other errors.</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/payment-request/#constructor","title":"Payment Request API 1.1"}],"query":"api.PaymentRequest.PaymentRequest"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.PaymentRequest.PaymentRequest"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The PaymentRequest() constructor\n  creates a new PaymentRequest object which will be used to handle the\n  process of generating, validating, and submitting a payment request.","popularity":0.0008,"modified":"2023-12-01T01:31:10.000Z","source":{"folder":"en-us/web/api/paymentrequest/paymentrequest","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/paymentrequest/paymentrequest/index.md","last_commit_url":"https://github.com/mdn/content/commit/4c5944b6fc50bd753db0873891e17fff5b2dfe39","filename":"index.md"},"short_title":"PaymentRequest()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/PaymentRequest","title":"PaymentRequest"},{"uri":"/en-US/docs/Web/API/PaymentRequest/PaymentRequest","title":"PaymentRequest()"}],"pageTitle":"PaymentRequest: PaymentRequest() constructor - Web APIs | MDN","noIndexing":false}}