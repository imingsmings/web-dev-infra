{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{"macros":[{"id":"macro0","fixable":false,"suggestion":null,"explanation":"/en-US/docs/Web/API/PaymentShippingOption does not exist","name":"MacroBrokenLinkError","error":{},"errorStack":"Error: /en-US/docs/Web/API/PaymentShippingOption does not exist\n    at Object.recordNonFatalError (file:///Users/jason/Code/yari/kumascript/src/render.ts:88:13)\n    at Object.smartLink (file:///Users/jason/Code/yari/kumascript/src/api/web.ts:121:29)\n    at eval (\"/Users/jason/Code/yari/kumascript/macros/DOMxRef.ejs\":60:18)\n    at DOMxRef (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:703:17)\n    at /Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:260:40\n    at new Promise (<anonymous>)\n    at tryHandleCache (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:258:14)\n    at exports.renderFile (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:491:10)\n    at Templates.render (file:///Users/jason/Code/yari/kumascript/src/templates.ts:55:40)\n    at render (file:///Users/jason/Code/yari/kumascript/src/render.ts:181:56)","offset":8,"line":35,"column":208,"macroName":"domxref","sourceContext":"  | <h2>Examples</h2>\n  | <p>Let's take a look at an example. This code creates a new {{domxref(\"PaymentRequest\")}}, adds a handler for the <code>paymentmethodchange</code> event by calling the request's {{domxref(\"EventTarget.addEventListener\", \"addEventListener()\")}}, then calls {{domxref(\"PaymentRequest.show\", \"show()\")}} to present the payment interface to the user.</p>\n> | <p>The code assumes the existence of a method <code>detailsForShipping()</code>, which returns an object containing the shipping options for the <code>ground</code> shipping method, in the form found in the {{domxref(\"PaymentShippingOption\")}} dictionary. By doing so, the payment form defaults to the ground shipping method.</p>\n                                                                                                                                                                                                                   ^\n  | <pre class=\"brush: js\">const options = {\n  |   requestShipping: true,","fatal":false,"filepath":"/Users/jason/Code/content/files/en-us/web/api/paymentrequest/paymentmethodchange_event/index.md","macroSource":"{{domxref(\"PaymentShippingOption\")}}"},{"id":"macro1","fixable":false,"suggestion":null,"explanation":"/en-US/docs/Web/API/PaymentMethodChangeEvent/updateWith does not exist","name":"MacroBrokenLinkError","error":{},"errorStack":"Error: /en-US/docs/Web/API/PaymentMethodChangeEvent/updateWith does not exist\n    at Object.recordNonFatalError (file:///Users/jason/Code/yari/kumascript/src/render.ts:88:13)\n    at Object.smartLink (file:///Users/jason/Code/yari/kumascript/src/api/web.ts:121:29)\n    at eval (\"/Users/jason/Code/yari/kumascript/macros/DOMxRef.ejs\":60:18)\n    at DOMxRef (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:703:17)\n    at /Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:260:40\n    at new Promise (<anonymous>)\n    at tryHandleCache (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:258:14)\n    at exports.renderFile (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:491:10)\n    at Templates.render (file:///Users/jason/Code/yari/kumascript/src/templates.ts:55:40)\n    at render (file:///Users/jason/Code/yari/kumascript/src/render.ts:181:56)","offset":8,"line":70,"column":59,"macroName":"domxref","sourceContext":"  | </pre>\n  | <p>This begins by looking at the event's {{domxref(\"PaymentMethodChangeEvent.methodName\", \"methodName\")}} property; if that indicates that the user is trying to use Apple Pay, we pass the {{domxref(\"PaymentMethodChangeEvent.methodDetails\", \"methodDetails\")}} into a function called <code>calculateServiceFee()</code>, which we might create to take the information about the transaction, such as the underlying credit card being used to service the Apple Pay request, and compute and return an object that specifies changes to be applied to the {{domxref(\"PaymentRequest\")}} in order to add any service fees that the payment method might require.</p>\n> | <p>Before the event handler returns, it calls the event's {{domxref(\"PaymentMethodChangeEvent.updateWith()\")}} method to integrate the changes into the request.</p>\n                                                              ^\n  | <h2>Specifications</h2>{{Specifications}}\n  | <h2>Browser compatibility</h2>{{Compat}}","fatal":false,"filepath":"/Users/jason/Code/content/files/en-us/web/api/paymentrequest/paymentmethodchange_event/index.md","macroSource":"{{domxref(\"PaymentMethodChangeEvent.updateWith()\")}}"},{"id":"macro2","fixable":false,"suggestion":null,"explanation":"/en-US/docs/Web/API/PaymentRequest/payerdetailchange_event does not exist","name":"MacroBrokenLinkError","error":{},"errorStack":"Error: /en-US/docs/Web/API/PaymentRequest/payerdetailchange_event does not exist\n    at Object.recordNonFatalError (file:///Users/jason/Code/yari/kumascript/src/render.ts:88:13)\n    at Object.smartLink (file:///Users/jason/Code/yari/kumascript/src/api/web.ts:121:29)\n    at eval (\"/Users/jason/Code/yari/kumascript/macros/DOMxRef.ejs\":60:18)\n    at DOMxRef (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:703:17)\n    at /Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:260:40\n    at new Promise (<anonymous>)\n    at tryHandleCache (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:258:14)\n    at exports.renderFile (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:491:10)\n    at Templates.render (file:///Users/jason/Code/yari/kumascript/src/templates.ts:55:40)\n    at render (file:///Users/jason/Code/yari/kumascript/src/render.ts:181:56)","offset":8,"line":78,"column":7,"macroName":"domxref","sourceContext":"  |   <li><a href=\"/en-US/docs/Web/API/Payment_Request_API/Using_the_Payment_Request_API\">Using the Payment Request API</a></li>\n  |   <li>{{domxref(\"PaymentRequest.merchantvalidation_event\", \"merchantvalidation\")}} event</li>\n> |   <li>{{domxref(\"PaymentRequest.payerdetailchange_event\", \"payerdetailchange\")}} event</li>\n          ^\n  |   <li>{{domxref(\"PaymentRequest.shippingaddresschange_event\", \"shippingaddresschange\")}} event</li>\n  |   <li>{{domxref(\"PaymentRequest.shippingoptionchange_event\", \"shippingoptionchange\")}} event</li>","fatal":false,"filepath":"/Users/jason/Code/content/files/en-us/web/api/paymentrequest/paymentmethodchange_event/index.md","macroSource":"{{domxref(\"PaymentRequest.payerdetailchange_event\", \"payerdetailchange\")}}"}]},"title":"PaymentRequest: paymentmethodchange event","mdn_url":"/en-US/docs/Web/API/PaymentRequest/paymentmethodchange_event","locale":"en-US","native":"English (US)","browserCompat":["api.PaymentRequest.paymentmethodchange_event"],"summary":"The paymentmethodchange event is delivered the Payment Request API to a PaymentRequest object when the user changes the payment method within a given payment handler.","popularity":0,"modified":"2023-07-07T07:19:19.000Z","source":{"folder":"en-us/web/api/paymentrequest/paymentmethodchange_event","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/paymentrequest/paymentmethodchange_event/index.md","last_commit_url":"https://github.com/mdn/content/commit/acfe8c9f1f4145f77653a2bc64a9744b001358dc","filename":"index.md"},"short_title":"paymentmethodchange","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/PaymentRequest","title":"PaymentRequest"},{"uri":"/en-US/docs/Web/API/PaymentRequest/paymentmethodchange_event","title":"paymentmethodchange"}],"pageTitle":"PaymentRequest: paymentmethodchange event - Web APIs | MDN","noIndexing":false,"hash":"e335f05520d86ed8be0c8859f98e0b0a486706e7a3ec3c046ed0fa621c105003"}