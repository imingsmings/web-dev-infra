{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"PaymentRequestEvent: changePaymentMethod() method","mdn_url":"/en-US/docs/Web/API/PaymentRequestEvent/changePaymentMethod","locale":"en-US","native":"English (US)","browserCompat":["api.PaymentRequestEvent.changePaymentMethod"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Payment_Handler_API\">Payment Handler API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/PaymentRequestEvent\"><code>PaymentRequestEvent</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/PaymentRequestEvent\"><code>PaymentRequestEvent()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/instrumentKey\"><code>instrumentKey</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/methodData\"><code>methodData</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/modifiers\"><code>modifiers</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/paymentRequestId\"><code>paymentRequestId</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/paymentRequestOrigin\"><code>paymentRequestOrigin</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/topOrigin\"><code>topOrigin</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/total\"><code>total</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><em><code>changePaymentMethod()</code> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></em></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/openWindow\"><code>openWindow()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestEvent/respondWith\"><code>respondWith()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Payment Handler API</summary><ol><li><a href=\"/en-US/docs/Web/API/CanMakePaymentEvent\"><code>CanMakePaymentEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentManager\"><code>PaymentManager</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/paymentManager\"><code>ServiceWorkerRegistration.paymentManager</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>The <strong><code>changePaymentMethod()</code></strong> method of the <a href=\"/en-US/docs/Web/API/PaymentRequestEvent\"><code>PaymentRequestEvent</code></a> interface is used by the payment handler to get an updated total, given such payment method details as the billing address.</p>\n<p>When this method is invoked, a <a href=\"/en-US/docs/Web/API/PaymentMethodChangeEvent\"><code>PaymentMethodChangeEvent</code></a> is fired.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">changePaymentMethod</span><span class=\"token punctuation\">(</span>methodName<span class=\"token punctuation\">)</span>\n<span class=\"token function\">changePaymentMethod</span><span class=\"token punctuation\">(</span>methodName<span class=\"token punctuation\">,</span> methodDetails<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"methodname\"><a href=\"#methodname\"><code>methodName</code></a></dt>\n  <dd>\n    <p>The name of the payment method to be used.</p>\n  </dd>\n  <dt id=\"methoddetails\"><a href=\"#methoddetails\"><code>methodDetails</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>An object containing method-specific details that are being updated.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>A <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves with a <code>PaymentRequestDetailsUpdate</code> object. This object contains the following properties:</p>\n<dl>\n  <dt id=\"error\"><a href=\"#error\"><code>error</code></a></dt>\n  <dd>\n    <p>A string that explains why the user-selected payment method cannot be used.</p>\n  </dd>\n  <dt id=\"total\"><a href=\"#total\"><code>total</code></a></dt>\n  <dd>\n    <p>An updated total based on the changed payment method. The total can change, for example, because the billing address of the payment method selected by the user changes the applicable sales tax.</p>\n  </dd>\n  <dt id=\"modifiers\"><a href=\"#modifiers\"><code>modifiers</code></a></dt>\n  <dd>\n    <p>An array of <a href=\"https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary\" class=\"external\" target=\"_blank\"><code>PaymentDetailsModifier</code></a> objects.</p>\n  </dd>\n  <dt id=\"paymentmethoderrors\"><a href=\"#paymentmethoderrors\"><code>paymentMethodErrors</code></a></dt>\n  <dd>\n    <p>An object containing validation errors for the payment method, if any.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>The following shows a trivial code snippet that could be used in a service worker to send a payment method change notification to the main payment handler window. For a complete test example, see <a href=\"https://rsolomakhin.github.io/pr/apps/pmc/\" class=\"external\" target=\"_blank\">Payment handler for testing payment method change event</a>.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">notifyPaymentMethodChanged</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">changePaymentMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"someMethod\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">paymentMethodChangeResponse</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      paymentHandlerWindow<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>paymentMethodChangeResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> error<span class=\"token punctuation\">.</span>message <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/payment-handler/#changepaymentmethod-method","title":"Payment Handler API"}],"query":"api.PaymentRequestEvent.changePaymentMethod"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.PaymentRequestEvent.changePaymentMethod"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://web.dev/articles/web-based-payment-apps-overview\" class=\"external\" target=\"_blank\">Web-based payment apps overview</a></li>\n  <li><a href=\"https://web.dev/articles/setting-up-a-payment-method\" class=\"external\" target=\"_blank\">Setting up a payment method</a></li>\n  <li><a href=\"https://web.dev/articles/life-of-a-payment-transaction\" class=\"external\" target=\"_blank\">Life of a payment transaction</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Payment_Request_API/Using_the_Payment_Request_API\">Using the Payment Request API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Payment_Request_API/Concepts\">Payment processing concepts</a></li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The changePaymentMethod() method of the PaymentRequestEvent interface is used by the payment handler to get an updated total, given such payment method details as the billing address.","popularity":0,"modified":"2023-10-25T17:27:32.000Z","source":{"folder":"en-us/web/api/paymentrequestevent/changepaymentmethod","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/paymentrequestevent/changepaymentmethod/index.md","last_commit_url":"https://github.com/mdn/content/commit/835d6632d59993861a0458510402787f8a2c3cb3","filename":"index.md"},"short_title":"changePaymentMethod()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/PaymentRequestEvent","title":"PaymentRequestEvent"},{"uri":"/en-US/docs/Web/API/PaymentRequestEvent/changePaymentMethod","title":"changePaymentMethod()"}],"pageTitle":"PaymentRequestEvent: changePaymentMethod() method - Web APIs | MDN","noIndexing":false}}