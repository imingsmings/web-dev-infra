{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Performance: now() method","mdn_url":"/en-US/docs/Web/API/Performance/now","locale":"en-US","native":"English (US)","browserCompat":["api.Performance.now"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Performance_API\">Performance API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/Performance\"><code>Performance</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance/eventCounts\"><code>eventCounts</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/memory\"><code>memory</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/Performance/navigation\"><code>navigation</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/Performance/timeOrigin\"><code>timeOrigin</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/timing\"><code>timing</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance/clearMarks\"><code>clearMarks()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/clearMeasures\"><code>clearMeasures()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/clearResourceTimings\"><code>clearResourceTimings()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/getEntries\"><code>getEntries()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/getEntriesByName\"><code>getEntriesByName()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/getEntriesByType\"><code>getEntriesByType()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/mark\"><code>mark()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/measure\"><code>measure()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/measureUserAgentSpecificMemory\"><code>measureUserAgentSpecificMemory()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><em><code>now()</code> </em></li><li><a href=\"/en-US/docs/Web/API/Performance/setResourceTimingBufferSize\"><code>setResourceTimingBufferSize()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/toJSON\"><code>toJSON()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance/resourcetimingbufferfull_event\"><code>resourcetimingbufferfull</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Performance API</summary><ol><li><a href=\"/en-US/docs/Web/API/EventCounts\"><code>EventCounts</code></a></li><li><a href=\"/en-US/docs/Web/API/LargestContentfulPaint\"><code>LargestContentfulPaint</code></a></li><li><a href=\"/en-US/docs/Web/API/LayoutShift\"><code>LayoutShift</code></a></li><li><a href=\"/en-US/docs/Web/API/LayoutShiftAttribution\"><code>LayoutShiftAttribution</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceElementTiming\"><code>PerformanceElementTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceEntry\"><code>PerformanceEntry</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceEventTiming\"><code>PerformanceEventTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceLongTaskTiming\"><code>PerformanceLongTaskTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceMark\"><code>PerformanceMark</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceMeasure\"><code>PerformanceMeasure</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceNavigation\"><code>PerformanceNavigation</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceNavigationTiming\"><code>PerformanceNavigationTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceObserver\"><code>PerformanceObserver</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceObserverEntryList\"><code>PerformanceObserverEntryList</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformancePaintTiming\"><code>PerformancePaintTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceResourceTiming\"><code>PerformanceResourceTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceServerTiming\"><code>PerformanceServerTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskAttributionTiming\"><code>TaskAttributionTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/VisibilityStateEntry\"><code>VisibilityStateEntry</code></a></li><li><a href=\"/en-US/docs/Web/API/performance_property\"><code>performance_property</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>performance.now()</code></strong> method returns a high resolution timestamp in milliseconds. It represents the time elapsed since <a href=\"/en-US/docs/Web/API/Performance/timeOrigin\"><code>Performance.timeOrigin</code></a> (the time when navigation has started in window contexts, or the time when the worker is run in <a href=\"/en-US/docs/Web/API/Worker\"><code>Worker</code></a> and <a href=\"/en-US/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a> contexts).</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<p>None.</p>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>Returns a <a href=\"/en-US/docs/Web/API/DOMHighResTimeStamp\"><code>DOMHighResTimeStamp</code></a> measured in milliseconds.</p>"}},{"type":"prose","value":{"id":"description","title":"Description","isH3":false,"content":""}},{"type":"prose","value":{"id":"performance.now_vs._date.now","title":"<code>Performance.now</code> vs. <code>Date.now</code>","isH3":true,"content":"<p>Unlike <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now\"><code>Date.now</code></a>, the timestamps returned by <code>performance.now()</code> are not limited to one-millisecond resolution. Instead, they represent times as floating-point numbers with up to microsecond precision.</p>\n<p>\n  Also, <code>Date.now()</code> may have been impacted by system and user clock adjustments, clock skew, etc. as it is relative to the Unix epoch (1970-01-01T00:00:00Z) and dependent on the system clock.\n  The <code>performance.now()</code> method on the other hand is relative to the <code>timeOrigin</code> property which is a <a href=\"https://w3c.github.io/hr-time/#dfn-monotonic-clock\" class=\"external\" target=\"_blank\">monotonic clock</a>: its current time never decreases and isn't subject to adjustments.\n</p>","titleAsText":"Performance.now vs. Date.now"}},{"type":"prose","value":{"id":"performance.now_specification_changes","title":"<code>performance.now</code> specification changes","isH3":true,"content":"<p>The semantics of the <code>performance.now()</code> method changed between High Resolution Time Level 1 and Level 2.</p>\n<figure class=\"table-container\"><table>\n  <thead>\n    <tr>\n      <th>Changes</th>\n      <th>Level 1</th>\n      <th>Level 2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Relative to</td>\n      <td><a href=\"/en-US/docs/Web/API/PerformanceTiming/navigationStart\"><code>performance.timing.navigationStart</code></a></td>\n      <td><a href=\"/en-US/docs/Web/API/Performance/timeOrigin\"><code>Performance.timeOrigin</code></a></td>\n    </tr>\n    <tr>\n      <td>Triggering conditions</td>\n      <td>Document fetch or unload prompt (if any).</td>\n      <td>Creation of the browsing context (if no prior document), unload prompt (if any), or start of the navigation (as defined in HTML, a few steps before fetch).</td>\n    </tr>\n  </tbody>\n</table></figure>\n<p>The <code>performance.now()</code> method used to be relative to <a href=\"/en-US/docs/Web/API/PerformanceTiming/navigationStart\"><code>performance.timing.navigationStart</code></a> property from the Navigation Timing specification. This changed and <code>performance.now()</code> is now relative to <a href=\"/en-US/docs/Web/API/Performance/timeOrigin\"><code>Performance.timeOrigin</code></a> which avoids clock change risks when comparing timestamps across webpages.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Level 1 (clock change risks)</span>\ncurrentTime <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span>timing<span class=\"token punctuation\">.</span>navigationStart <span class=\"token operator\">+</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Level 2 (no clock change risks)</span>\ncurrentTime <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span>timeOrigin <span class=\"token operator\">+</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>","titleAsText":"performance.now specification changes"}},{"type":"prose","value":{"id":"ticking_during_sleep","title":"Ticking during sleep","isH3":true,"content":"<p>The specification (Level 2) requires that <code>performance.now()</code> should tick during sleep. It appears that only Firefox on Windows, and Chromiums on Windows keep ticking during sleep. Relevant browser bugs for other operating systems:</p>\n<ul>\n  <li>Chrome/Chromium (<a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1206450\" class=\"external\" target=\"_blank\">bug</a>)</li>\n  <li>Firefox (<a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1709767\" class=\"external\" target=\"_blank\">bug</a>)</li>\n  <li>Safari/WebKit (<a href=\"https://bugs.webkit.org/show_bug.cgi?id=225610\" class=\"external\" target=\"_blank\">bug</a>)</li>\n</ul>\n<p>More details can also be found in the specification issue <a href=\"https://github.com/w3c/hr-time/issues/115\" class=\"external\" target=\"_blank\">hr-time#115</a>.</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"using_performance.now","title":"Using <code>performance.now()</code>","isH3":true,"content":"<p>To determine how much time has elapsed since a particular point in your code, you can do something like this:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> t0 <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> t1 <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Call to doSomething took </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>t1 <span class=\"token operator\">-</span> t0<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> milliseconds.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>","titleAsText":"Using performance.now()"}},{"type":"prose","value":{"id":"security_requirements","title":"Security requirements","isH3":false,"content":"<p>To offer protection against timing attacks and <a href=\"/en-US/docs/Glossary/Fingerprinting\">fingerprinting</a>, <code>performance.now()</code> is coarsened based on site isolation status.</p>\n<ul>\n  <li>Resolution in isolated contexts: 5 microseconds</li>\n  <li>Resolution in non-isolated contexts: 100 microseconds</li>\n</ul>\n<p>\n  Cross-origin isolate your site using the <a href=\"/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy\"><code>Cross-Origin-Opener-Policy</code></a> and\n  <a href=\"/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy\"><code>Cross-Origin-Embedder-Policy</code></a> headers:\n</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">http</span></p><pre class=\"brush: http notranslate\"><code><span class=\"token header\"><span class=\"token header-name keyword\">Cross-Origin-Opener-Policy</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">same-origin</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Cross-Origin-Embedder-Policy</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">require-corp</span></span>\n</code></pre></div>\n<p>\n  These headers ensure a top-level document does not share a browsing context group with\n  cross-origin documents. COOP process-isolates your document and potential attackers\n  can't access to your global object if they were opening it in a popup, preventing a set\n  of cross-origin attacks dubbed <a href=\"https://github.com/xsleaks/xsleaks\" class=\"external\" target=\"_blank\">XS-Leaks</a>.\n</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/hr-time/#dom-performance-now","title":"High Resolution Time"}],"query":"api.Performance.now"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.Performance.now"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Performance/timeOrigin\"><code>Performance.timeOrigin</code></a></li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Description","id":"description"},{"text":"Examples","id":"examples"},{"text":"Security requirements","id":"security_requirements"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The performance.now() method returns a high resolution timestamp in milliseconds. It represents the time elapsed since Performance.timeOrigin (the time when navigation has started in window contexts, or the time when the worker is run in Worker and ServiceWorker contexts).","popularity":0.0409,"modified":"2023-04-07T06:19:30.000Z","source":{"folder":"en-us/web/api/performance/now","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/now/index.md","last_commit_url":"https://github.com/mdn/content/commit/312081aabba3885b35a81107b3c2fc53428896c5","filename":"index.md"},"short_title":"now()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Performance","title":"Performance"},{"uri":"/en-US/docs/Web/API/Performance/now","title":"now()"}],"pageTitle":"Performance: now() method - Web APIs | MDN","noIndexing":false}}