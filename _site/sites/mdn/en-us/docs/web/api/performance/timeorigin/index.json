{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Performance: timeOrigin property","mdn_url":"/en-US/docs/Web/API/Performance/timeOrigin","locale":"en-US","native":"English (US)","browserCompat":["api.Performance.timeOrigin"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Performance_API\">Performance API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/Performance\"><code>Performance</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance/eventCounts\"><code>eventCounts</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/memory\"><code>memory</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/Performance/navigation\"><code>navigation</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><em><code>timeOrigin</code> </em></li><li><a href=\"/en-US/docs/Web/API/Performance/timing\"><code>timing</code></a><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance/clearMarks\"><code>clearMarks()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/clearMeasures\"><code>clearMeasures()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/clearResourceTimings\"><code>clearResourceTimings()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/getEntries\"><code>getEntries()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/getEntriesByName\"><code>getEntriesByName()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/getEntriesByType\"><code>getEntriesByType()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/mark\"><code>mark()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/measure\"><code>measure()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/measureUserAgentSpecificMemory\"><code>measureUserAgentSpecificMemory()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/Performance/now\"><code>now()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/setResourceTimingBufferSize\"><code>setResourceTimingBufferSize()</code></a></li><li><a href=\"/en-US/docs/Web/API/Performance/toJSON\"><code>toJSON()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance/resourcetimingbufferfull_event\"><code>resourcetimingbufferfull</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Performance API</summary><ol><li><a href=\"/en-US/docs/Web/API/EventCounts\"><code>EventCounts</code></a></li><li><a href=\"/en-US/docs/Web/API/LargestContentfulPaint\"><code>LargestContentfulPaint</code></a></li><li><a href=\"/en-US/docs/Web/API/LayoutShift\"><code>LayoutShift</code></a></li><li><a href=\"/en-US/docs/Web/API/LayoutShiftAttribution\"><code>LayoutShiftAttribution</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceElementTiming\"><code>PerformanceElementTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceEntry\"><code>PerformanceEntry</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceEventTiming\"><code>PerformanceEventTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceLongTaskTiming\"><code>PerformanceLongTaskTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceMark\"><code>PerformanceMark</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceMeasure\"><code>PerformanceMeasure</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceNavigation\"><code>PerformanceNavigation</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceNavigationTiming\"><code>PerformanceNavigationTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceObserver\"><code>PerformanceObserver</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceObserverEntryList\"><code>PerformanceObserverEntryList</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformancePaintTiming\"><code>PerformancePaintTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceResourceTiming\"><code>PerformanceResourceTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceServerTiming\"><code>PerformanceServerTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/TaskAttributionTiming\"><code>TaskAttributionTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/VisibilityStateEntry\"><code>VisibilityStateEntry</code></a></li><li><a href=\"/en-US/docs/Web/API/performance_property\"><code>performance_property</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>timeOrigin</code></strong> read-only property of the <a href=\"/en-US/docs/Web/API/Performance\"><code>Performance</code></a> interface returns the high resolution timestamp that is used as the baseline for performance-related timestamps.</p>\n<p>In Window contexts, this value represents the time when navigation has started. In <a href=\"/en-US/docs/Web/API/Worker\"><code>Worker</code></a> and <a href=\"/en-US/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a> contexts, this value represents the time when the worker is run. You can use this property to synchronize the time origins between the contexts (see example below).</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> The value of <code>performance.timeOrigin</code> may differ from the value returned by <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now\"><code>Date.now()</code></a> executed at the time origin, because <code>Date.now()</code> may have been impacted by system and user clock adjustments, clock skew, etc. The <code>timeOrigin</code> property is a <a href=\"https://w3c.github.io/hr-time/#dfn-monotonic-clock\" class=\"external\" target=\"_blank\">monotonic clock</a> which current time never decreases and which isn't subject to these adjustments.</p>\n</div>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>A high resolution timestamp which considered to be the beginning of the current document's lifetime. It's calculated like this:</p>\n<ul>\n  <li>If the script's <a href=\"/en-US/docs/Glossary/Global_object\">global object</a> is a <a href=\"/en-US/docs/Web/API/Window\"><code>Window</code></a>, the time origin is determined as follows:\n    <ul>\n      <li>If the current <a href=\"/en-US/docs/Web/API/Document\"><code>Document</code></a> is the first one loaded in the <code>Window</code>, the time origin is the time at which the browser context was created.</li>\n      <li>If during the process of unloading the previous document which was loaded in the window, a confirmation dialog was displayed to let the user confirm whether or not to leave the previous page, the time origin is the time at which the user confirmed that navigating to the new page was acceptable.</li>\n      <li>If neither of the above determines the time origin, then the time origin is the time at which the navigation responsible for creating the window's current <code>Document</code> took place.</li>\n    </ul>\n  </li>\n  <li>If the script's global object is a <a href=\"/en-US/docs/Web/API/WorkerGlobalScope\"><code>WorkerGlobalScope</code></a> (that is, the script is running as a web worker), the time origin is the moment at which the worker was created.</li>\n  <li>In all other cases, the time origin is undefined.</li>\n</ul>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"synchronizing_time_between_contexts","title":"Synchronizing time between contexts","isH3":true,"content":"<p>To account for the different time origins in window and worker contexts, you can translate the timestamps coming from worker scripts with the help of the <code>timeOrigin</code> property, so the timings synchronize for the entire application.</p>\n<p>In worker.js</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connect\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>ports<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  port<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> workerTaskStart <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// doSomeWork()</span>\n    <span class=\"token keyword\">const</span> workerTaskEnd <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Convert worker-relative timestamps to absolute timestamps, then send to the window</span>\n  port<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">startTime</span><span class=\"token operator\">:</span> workerTaskStart <span class=\"token operator\">+</span> performance<span class=\"token punctuation\">.</span>timeOrigin<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">endTime</span><span class=\"token operator\">:</span> workerTaskEnd <span class=\"token operator\">+</span> performance<span class=\"token punctuation\">.</span>timeOrigin<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>In main.js</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> worker <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SharedWorker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"worker.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nworker<span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Convert absolute timestamps into window-relative timestamps</span>\n  <span class=\"token keyword\">const</span> workerTaskStart <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>startTime <span class=\"token operator\">-</span> performance<span class=\"token punctuation\">.</span>timeOrigin<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> workerTaskEnd <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>endTime <span class=\"token operator\">-</span> performance<span class=\"token punctuation\">.</span>timeOrigin<span class=\"token punctuation\">;</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Worker task start: \"</span><span class=\"token punctuation\">,</span> workerTaskStart<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Worker task end: \"</span><span class=\"token punctuation\">,</span> workerTaskEnd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/hr-time/#dom-performance-timeorigin","title":"High Resolution Time"}],"query":"api.Performance.timeOrigin"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.Performance.timeOrigin"}}],"toc":[{"text":"Value","id":"value"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The timeOrigin read-only property of the Performance interface returns the high resolution timestamp that is used as the baseline for performance-related timestamps.","popularity":0.005,"modified":"2023-04-07T06:19:30.000Z","source":{"folder":"en-us/web/api/performance/timeorigin","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/performance/timeorigin/index.md","last_commit_url":"https://github.com/mdn/content/commit/312081aabba3885b35a81107b3c2fc53428896c5","filename":"index.md"},"short_title":"timeOrigin","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Performance","title":"Performance"},{"uri":"/en-US/docs/Web/API/Performance/timeOrigin","title":"timeOrigin"}],"pageTitle":"Performance: timeOrigin property - Web APIs | MDN","noIndexing":false}}