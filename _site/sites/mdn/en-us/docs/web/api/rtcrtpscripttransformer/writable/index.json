{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"RTCRtpScriptTransformer: writable property","mdn_url":"/en-US/docs/Web/API/RTCRtpScriptTransformer/writable","locale":"en-US","native":"English (US)","browserCompat":["api.RTCRtpScriptTransformer.writable"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer\"><code>RTCRtpScriptTransformer</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/options\"><code>options</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/readable\"><code>readable</code></a></li><li><em><code>writable</code> </em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/generateKeyFrame\"><code>generateKeyFrame()</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/sendKeyFrameRequest\"><code>sendKeyFrameRequest()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebRTC</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaDevices/getUserMedia\"><code>MediaDevices.getUserMedia()</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/mediaDevices\"><code>Navigator.mediaDevices</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCCertificate\"><code>RTCCertificate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFSender\"><code>RTCDTMFSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFToneChangeEvent\"><code>RTCDTMFToneChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannel\"><code>RTCDataChannel</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannelEvent\"><code>RTCDataChannelEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDtlsTransport\"><code>RTCDtlsTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCEncodedAudioFrame\"><code>RTCEncodedAudioFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCEncodedVideoFrame\"><code>RTCEncodedVideoFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCErrorEvent\"><code>RTCErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate\"><code>RTCIceCandidate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceTransport\"><code>RTCIceTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceErrorEvent\"><code>RTCPeerConnectionIceErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceEvent\"><code>RTCPeerConnectionIceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver\"><code>RTCRtpReceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver/transform\"><code>RTCRtpReceiver.transform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransform\"><code>RTCRtpScriptTransform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender/transform\"><code>RTCRtpSender.transform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpTransceiver\"><code>RTCRtpTransceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSctpTransport\"><code>RTCSctpTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSessionDescription\"><code>RTCSessionDescription</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTrackEvent\"><code>RTCTrackEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTransformEvent\"><code>RTCTransformEvent</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>writable</code></strong> read-only property of the <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer\"><code>RTCRtpScriptTransformer</code></a> interface returns a <a href=\"/en-US/docs/Web/API/WritableStream\"><code>WritableStream</code></a> instance that can be used as a sink for encoded media frames enqueued on the corresponding <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/readable\"><code>RTCRtpScriptTransformer.readable</code></a>.</p>\n<p>\n  When the corresponding <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransform\"><code>RTCRtpScriptTransform</code></a> is inserted into the WebRTC sender and receiver pipelines, encoded media frames (<a href=\"/en-US/docs/Web/API/RTCEncodedVideoFrame\"><code>RTCEncodedVideoFrame</code></a> or <a href=\"/en-US/docs/Web/API/RTCEncodedAudioFrame\"><code>RTCEncodedAudioFrame</code></a>) may be enqueued on the <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/readable\"><code>RTCRtpScriptTransformer.readable</code></a>.\n  A WebRTC encoded transform can read the frames from <code>readable</code>, modify them as needed, and then send them back into the WebRTC pipeline by sending them to this <code>writable</code>.\n  A common way to perform this operation is to pipe the frames through a <a href=\"/en-US/docs/Web/API/TransformStream\"><code>TransformStream</code></a>.\n</p>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>A <a href=\"/en-US/docs/Web/API/WritableStream\"><code>WritableStream</code></a>.</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>The following example shows how <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/readable\"><code>RTCRtpScriptTransformer.readable</code></a> is piped through a <a href=\"/en-US/docs/Web/API/TransformStream\"><code>TransformStream</code></a> to <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/writable\" aria-current=\"page\"><code>RTCRtpScriptTransformer.writable</code></a>.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rtctransform\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> transform<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Select a transform based on passed options</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>transformer<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>name <span class=\"token operator\">==</span> <span class=\"token string\">\"senderTransform\"</span><span class=\"token punctuation\">)</span>\n    transform <span class=\"token operator\">=</span> <span class=\"token function\">createSenderTransform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// A TransformStream</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>transformer<span class=\"token punctuation\">.</span>options<span class=\"token punctuation\">.</span>name <span class=\"token operator\">==</span> <span class=\"token string\">\"receiverTransform\"</span><span class=\"token punctuation\">)</span>\n    transform <span class=\"token operator\">=</span> <span class=\"token function\">createReceiverTransform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// A TransformStream</span>\n  <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Pipe frames from the readable to writeable through TransformStream</span>\n  event<span class=\"token punctuation\">.</span>transformer<span class=\"token punctuation\">.</span>readable\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipeThrough</span><span class=\"token punctuation\">(</span>transform<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipeTo</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>transformer<span class=\"token punctuation\">.</span>writable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>\n  The code implements a handler for the <a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/rtctransform_event\" title=\"rtctransform\"><code>rtctransform</code></a> event, which is fired at the global worker object on construction of the corresponding <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransform\"><code>RTCRtpScriptTransform</code></a>, and when new frames are enqueued for processing.\n  <code>event.transformer</code> is the <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer\"><code>RTCRtpScriptTransformer</code></a> that has the <code>writable</code> and <code>readable</code> properties.\n</p>\n<p>\n  An different <a href=\"/en-US/docs/Web/API/TransformStream\"><code>TransformStream</code></a> is created to process outgoing and incoming frames, using <code>createSenderTransform()</code> or <code>createReceiverTransform()</code>, respectively (implementations not shown).\n  The event handler chooses the correct transform stream to use based on options passed through from the <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransform/RTCRtpScriptTransform\"><code>RTCRtpScriptTransform</code> constructor</a> and assigns it to <code>transform</code>.\n</p>\n<p>The code calls <a href=\"/en-US/docs/Web/API/ReadableStream/pipeThrough\"><code>ReadableStream.pipeThrough()</code></a> on the <code>readable</code> to pipe encoded frames through the selected <code>TransformStream</code>, and then <a href=\"/en-US/docs/Web/API/ReadableStream/pipeTo\"><code>ReadableStream.pipeTo()</code></a> to pipe them to the <a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer/writable\" aria-current=\"page\"><code>RTCRtpScriptTransformer.writable</code></a>.</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/webrtc-encoded-transform/#dom-rtcrtpscripttransformer-writable","title":"WebRTC Encoded Transform"}],"query":"api.RTCRtpScriptTransformer.writable"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.RTCRtpScriptTransformer.writable"}}],"toc":[{"text":"Value","id":"value"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The writable read-only property of the RTCRtpScriptTransformer interface returns a WritableStream instance that can be used as a sink for encoded media frames enqueued on the corresponding RTCRtpScriptTransformer.readable.","popularity":0,"modified":"2023-09-08T02:40:33.000Z","source":{"folder":"en-us/web/api/rtcrtpscripttransformer/writable","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/rtcrtpscripttransformer/writable/index.md","last_commit_url":"https://github.com/mdn/content/commit/4799bed9382147f0b0ff642a130a1c12ed59a28e","filename":"index.md"},"short_title":"writable","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/RTCRtpScriptTransformer","title":"RTCRtpScriptTransformer"},{"uri":"/en-US/docs/Web/API/RTCRtpScriptTransformer/writable","title":"writable"}],"pageTitle":"RTCRtpScriptTransformer: writable property - Web APIs | MDN","noIndexing":false}}