{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"FetchEvent: preloadResponse property","mdn_url":"/en-US/docs/Web/API/FetchEvent/preloadResponse","locale":"en-US","native":"English (US)","browserCompat":["api.FetchEvent.preloadResponse"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Service_Worker_API\">Service Worker API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/FetchEvent/FetchEvent\"><code>FetchEvent()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/FetchEvent/clientId\"><code>clientId</code></a></li><li><a href=\"/en-US/docs/Web/API/FetchEvent/handled\"><code>handled</code></a></li><li><a href=\"/en-US/docs/Web/API/FetchEvent/isReload\"><code>isReload</code></a><abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr><abbr class=\"icon icon-deprecated\" title=\"Deprecated. Not for use in new websites.\">\n  <span class=\"visually-hidden\">Deprecated</span>\n</abbr></li><li><em><code>preloadResponse</code> </em></li><li><a href=\"/en-US/docs/Web/API/FetchEvent/replacesClientId\"><code>replacesClientId</code></a></li><li><a href=\"/en-US/docs/Web/API/FetchEvent/request\"><code>request</code></a></li><li><a href=\"/en-US/docs/Web/API/FetchEvent/resultingClientId\"><code>resultingClientId</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/FetchEvent/respondWith\"><code>respondWith()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/Event\"><code>Event</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Service Workers API</summary><ol><li><a href=\"/en-US/docs/Web/API/Cache\"><code>Cache</code></a></li><li><a href=\"/en-US/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a></li><li><a href=\"/en-US/docs/Web/API/Client\"><code>Client</code></a></li><li><a href=\"/en-US/docs/Web/API/Clients\"><code>Clients</code></a></li><li><a href=\"/en-US/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/ExtendableMessageEvent\"><code>ExtendableMessageEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/serviceWorker\"><code>Navigator.serviceWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a></li><li><a href=\"/en-US/docs/Web/API/WindowClient\"><code>WindowClient</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator/serviceWorker\"><code>WorkerNavigator.serviceWorker</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>preloadResponse</code></strong> read-only property of the <a href=\"/en-US/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a> interface returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves to the navigation preload <a href=\"/en-US/docs/Web/API/Response\"><code>Response</code></a> if <a href=\"/en-US/docs/Web/API/NavigationPreloadManager\">navigation preload</a> was triggered, or <code>undefined</code> otherwise.</p>\n<p>Navigation preload is triggered if <a href=\"/en-US/docs/Web/API/NavigationPreloadManager/enable\">navigation preload is enabled</a>, the request is a <code>GET</code> request, and the request is a navigation request (generated by the browser when loading pages and iframes).</p>\n<p>A service worker can wait on this promise in its fetch event handler in order to track completion of a fetch request made during service-worker boot.</p>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>A <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves to a <a href=\"/en-US/docs/Web/API/Response\"><code>Response</code></a> or otherwise to <code>undefined</code>.</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>This code snippet is from <a href=\"https://developer.chrome.com/blog/navigation-preload/\" class=\"external\" target=\"_blank\">Speed up Service Worker with Navigation Preloads</a>.</p>\n<p>\n  The <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/fetch_event\" title=\"onfetch\"><code>onfetch</code></a> event handler listens for the <code>fetch</code> event.\n  When fired, the handler calls <a href=\"/en-US/docs/Web/API/FetchEvent/respondWith\" title=\"FetchEvent.respondWith()\"><code>FetchEvent.respondWith()</code></a> to pass a promise back to the controlled page.\n  This promise will resolve with the requested resource.\n</p>\n<p>\n  If there is a matching URL request in the <a href=\"/en-US/docs/Web/API/Cache\"><code>Cache</code></a> object, then the code returns a promise for fetching the response from the cache.\n  If no match is found in the cache, the code returns the promise in <code>preloadResponse</code>.\n  If there is no matching cache or preloaded response, the code fetches the response from the network and returns the associated promise.\n</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Respond from the cache if we can</span>\n      <span class=\"token keyword\">const</span> cachedResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedResponse<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> cachedResponse<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Else, use the preloaded response, if it's there</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> event<span class=\"token punctuation\">.</span>preloadResponse<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// Else try the network.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/ServiceWorker/#fetch-event-preloadresponse","title":"Service Workers"}],"query":"api.FetchEvent.preloadResponse"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.FetchEvent.preloadResponse"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://developer.chrome.com/blog/navigation-preload/\" class=\"external\" target=\"_blank\">Speed up Service Worker with Navigation Preloads</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers\">Using Service Workers</a></li>\n  <li><a href=\"https://github.com/mdn/dom-examples/tree/main/service-worker/simple-service-worker\" class=\"external\" target=\"_blank\">Service workers basic code example</a></li>\n  <li><a href=\"https://jakearchibald.github.io/isserviceworkerready/\" class=\"external\" target=\"_blank\">Is ServiceWorker ready?</a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\">Using web workers</a></li>\n</ul>"}}],"toc":[{"text":"Value","id":"value"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The preloadResponse read-only property of the FetchEvent interface returns a Promise that resolves to the navigation preload Response if navigation preload was triggered, or undefined otherwise.","popularity":0.0006,"modified":"2023-07-07T07:19:19.000Z","source":{"folder":"en-us/web/api/fetchevent/preloadresponse","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/fetchevent/preloadresponse/index.md","last_commit_url":"https://github.com/mdn/content/commit/acfe8c9f1f4145f77653a2bc64a9744b001358dc","filename":"index.md"},"short_title":"preloadResponse","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/FetchEvent","title":"FetchEvent"},{"uri":"/en-US/docs/Web/API/FetchEvent/preloadResponse","title":"preloadResponse"}],"pageTitle":"FetchEvent: preloadResponse property - Web APIs | MDN","noIndexing":false}}