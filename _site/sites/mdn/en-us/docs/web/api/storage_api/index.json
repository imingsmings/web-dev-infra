{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Storage API","mdn_url":"/en-US/docs/Web/API/Storage_API","locale":"en-US","native":"English (US)","browserCompat":["api.StorageManager"],"sidebarHTML":"<ol><li><strong><em><a href=\"/en-US/docs/Web/API/Storage_API\" aria-current=\"page\">Storage API</a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/Storage_API/Storage_quotas_and_eviction_criteria\">Storage quotas and eviction criteria</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/StorageManager\"><code>StorageManager</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/storage\"><code>Navigator.storage</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator/storage\"><code>WorkerNavigator.storage</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard secure\" id=\"sect1\"><p><strong>Secure context:</strong> This feature is available only in <a href=\"/en-US/docs/Web/Security/Secure_Contexts\">secure contexts</a> (HTTPS), in some or all <a href=\"#browser_compatibility\">supporting browsers</a>.</p></div> <div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> This feature is available in <a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div>\n<p>The <a href=\"https://storage.spec.whatwg.org\" class=\"external\" target=\"_blank\">Storage Standard</a> defines a shared storage system designed to be used by all APIs and technologies that websites can use to store data in a user's browser.</p>\n<p>The data stored for a website which is managed by the Storage Standard usually includes <a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB databases</a> and <a href=\"/en-US/docs/Web/API/Cache\">Cache API data</a>, but may include other kind of site-accessible data such as <a href=\"/en-US/docs/Web/API/Web_Storage_API\">Web Storage API data</a>.</p>\n<p>The Storage API gives websites the ability to find out how much space they can use, how much they are already using, and even control whether or not they need to be alerted before the <a href=\"/en-US/docs/Glossary/User_agent\">user agent</a> disposes of data in order to make room for other things.</p>\n<p>This article gives an overview of the way user agents store and maintain websites' data. For more information about storage limits and eviction, see <a href=\"/en-US/docs/Web/API/Storage_API/Storage_quotas_and_eviction_criteria\">Browser storage quotas and eviction criteria</a>.</p>\n<p>This article also gives an overview of the <a href=\"/en-US/docs/Web/API/StorageManager\"><code>StorageManager</code></a> interface used to estimate available storage for a site.</p>"}},{"type":"prose","value":{"id":"storage_buckets","title":"Storage buckets","isH3":false,"content":"<p>The storage system described by the Storage Standard, where site data is stored, usually consists of a single <em>bucket</em> for each <a href=\"/en-US/docs/Glossary/Origin\">origin</a>.</p>\n<p>In essence, every website has its own storage space into which its data gets placed. In some cases however, user agents may decide to store a single origin's data in multiple different buckets, for example when this origin is embedded in different third-party origins.</p>\n<p>To learn more, see <a href=\"/en-US/docs/Web/API/Storage_API/Storage_quotas_and_eviction_criteria#how_browsers_separate_data_from_different_websites\">How browsers separate data from different websites?</a></p>"}},{"type":"prose","value":{"id":"bucket_modes","title":"Bucket modes","isH3":false,"content":"<p>Each site storage bucket has a <em>mode</em> that describes the data retention policy for that bucket. There are two modes:</p>\n<dl>\n  <dt id=\"best-effort\"><a href=\"#best-effort\"><code>\"best-effort\"</code></a></dt>\n  <dd>\n    <p>The user agent will try to retain the data contained in the bucket for as long as it can, <em>but will not warn users</em> if storage space runs low and it becomes necessary to clear the bucket in order to relieve the storage pressure.</p>\n  </dd>\n  <dt id=\"persistent\"><a href=\"#persistent\"><code>\"persistent\"</code></a></dt>\n  <dd>\n    <p>The user agent will retain the data as long as possible, clearing all <code>\"best-effort\"</code> buckets before considering clearing a bucket marked <code>\"persistent\"</code>. If it becomes necessary to consider clearing persistent buckets, the user agent will notify the user and provide a way to clear one or more persistent buckets as needed.</p>\n  </dd>\n</dl>\n<p>You can change an origin's storage bucket mode by using the <a href=\"/en-US/docs/Web/API/StorageManager/persist\" title=\"navigator.storage.persist()\"><code>navigator.storage.persist()</code></a> method, which requires the <code>\"persistent-storage\"</code> <a href=\"/en-US/docs/Web/API/Permissions_API\">user permission</a>.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>storage <span class=\"token operator\">&amp;&amp;</span> navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>persist<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">persistent</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>persistent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Storage will not be cleared except by explicit user action\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Storage may be cleared by the UA under storage pressure.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>You can also use the <a href=\"/en-US/docs/Web/API/StorageManager/persisted\" title=\"navigator.storage.persisted()\"><code>navigator.storage.persisted()</code></a> method to know whether an origin's storage is persistent or not:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>storage <span class=\"token operator\">&amp;&amp;</span> navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>persist<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">persisted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">persistent</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>persistent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Storage will not be cleared except by explicit user action\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Storage may be cleared by the UA under storage pressure.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>To learn more, see <a href=\"/en-US/docs/Web/API/Storage_API/Storage_quotas_and_eviction_criteria#does_browser-stored_data_persist\">Does browser-stored data persist?</a>.</p>"}},{"type":"prose","value":{"id":"quotas_and_usage_estimates","title":"Quotas and usage estimates","isH3":false,"content":"<p>The user agent determines, using whatever mechanism it chooses, the maximum amount of storage a given site can use. This maximum is the origin's <strong>quota</strong>. The amount of this space which is in use by the site is called its <strong>usage</strong>. Both of these values are estimates; there are several reasons why they're not precise:</p>\n<ul>\n  <li>User agents are encouraged to obscure the exact size of the data used by a given origin, to prevent these values from being used for <a href=\"/en-US/docs/Glossary/Fingerprinting\">fingerprinting</a> purposes.</li>\n  <li>De-duplication, compression, and other methods to reduce the physical size of the stored data may be used.</li>\n  <li>Quotas are conservative estimates of the space available for the origin's use, and should be less than the available space on the device to help prevent overruns.</li>\n</ul>\n<p>To determine the estimated quota and usage values for a given origin, use the <a href=\"/en-US/docs/Web/API/StorageManager/estimate\" title=\"navigator.storage.estimate()\"><code>navigator.storage.estimate()</code></a> method, which returns a promise that, when resolved, receives an object that contains these figures. For example:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">estimate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">estimate</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// estimate.quota is the estimated quota</span>\n  <span class=\"token comment\">// estimate.usage is the estimated number of bytes used</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>For more information about how much data an origin can store, see <a href=\"/en-US/docs/Web/API/Storage_API/Storage_quotas_and_eviction_criteria#how_much_data_can_be_stored\">How much data can be stored?</a>.</p>"}},{"type":"prose","value":{"id":"data_eviction","title":"Data eviction","isH3":false,"content":"<p>Data eviction is the process by which a user agent deletes an origin's stored data. This can happen, for example, when the device used to store the data is running low on storage space.</p>\n<p>When clearing the data stored by an origin, the origin's bucket is treated as a single entity. The entire data stored by this origin is cleared.</p>\n<p>If a bucket is marked as <code>\"persistent\"</code>, the contents won't be cleared by the user agent without either the data's origin itself or the user specifically doing so. This includes scenarios such as the user selecting a \"Clear Caches\" or \"Clear Recent History\" option. The user will be asked specifically for permission to remove persistent site storage buckets.</p>\n<p>To learn more, see <a href=\"/en-US/docs/Web/API/Storage_API/Storage_quotas_and_eviction_criteria#when_is_data_evicted\">When is data evicted?</a>.</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://storage.spec.whatwg.org/#storagemanager","title":"Storage Standard"}],"query":"api.StorageManager"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.StorageManager"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Permissions_API/Using_the_Permissions_API\">Using the Permissions API</a></li>\n  <li><a href=\"https://web.dev/articles/storage-for-the-web\" class=\"external\" target=\"_blank\">Storage for the web on web.dev</a></li>\n  <li><a href=\"https://web.dev/articles/persistent-storage\" class=\"external\" target=\"_blank\">Persistent storage on web.dev</a></li>\n  <li><a href=\"https://docs.google.com/document/d/19QemRTdIxYaJ4gkHYf2WWBNPbpuZQDNMpUVf8dQxj4U/edit\" class=\"external\" target=\"_blank\">Chrome Web Storage and Quota Concepts</a></li>\n</ul>"}}],"toc":[{"text":"Storage buckets","id":"storage_buckets"},{"text":"Bucket modes","id":"bucket_modes"},{"text":"Quotas and usage estimates","id":"quotas_and_usage_estimates"},{"text":"Data eviction","id":"data_eviction"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The Storage Standard defines a shared storage system designed to be used by all APIs and technologies that websites can use to store data in a user's browser.","popularity":0.0077,"modified":"2023-10-25T17:27:32.000Z","source":{"folder":"en-us/web/api/storage_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/storage_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/835d6632d59993861a0458510402787f8a2c3cb3","filename":"index.md"},"short_title":"Storage API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Storage_API","title":"Storage API"}],"pageTitle":"Storage API - Web APIs | MDN","noIndexing":false}}