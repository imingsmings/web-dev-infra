{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"DedicatedWorkerGlobalScope: postMessage() method","mdn_url":"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/postMessage","locale":"en-US","native":"English (US)","browserCompat":["api.DedicatedWorkerGlobalScope.postMessage"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope\"><code>DedicatedWorkerGlobalScope</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/name\"><code>name</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/close\"><code>close()</code></a></li><li><em><code>postMessage()</code> </em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/message_event\"><code>message</code></a></li><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/messageerror_event\"><code>messageerror</code></a></li><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/rtctransform_event\"><code>rtctransform</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/WorkerGlobalScope\"><code>WorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Web Workers API</summary><ol><li><a href=\"/en-US/docs/Web/API/SharedWorker\"><code>SharedWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/SharedWorkerGlobalScope\"><code>SharedWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/Worker\"><code>Worker</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerGlobalScope\"><code>WorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerLocation\"><code>WorkerLocation</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator\"><code>WorkerNavigator</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>postMessage()</code></strong> method of the <a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope\"><code>DedicatedWorkerGlobalScope</code></a> interface sends a message to the main thread that spawned it.</p>\n<p>\n  This accepts a data parameter, which contains data to copy from the worker to the main thread.\n  The data may be any value or JavaScript object handled by the <a href=\"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\">structured clone</a> algorithm, which includes cyclical references.\n</p>\n<p>\n  The method also accepts an optional array of <a href=\"/en-US/docs/Web/API/Web_Workers_API/Transferable_objects\">transferable objects</a> to <em>transfer</em> to the main thread;\n  Unlike the data parameter transferred objects are no longer usable in the worker thread.\n  (Where possible, objects are transferred using a high performance zero-copy operation).\n</p>\n<p>The main scope that spawned the worker can send back information to the thread that spawned it using the <a href=\"/en-US/docs/Web/API/Worker/postMessage\"><code>Worker.postMessage</code></a> method.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span>\n<span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> transfer<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"message\"><a href=\"#message\"><code>message</code></a></dt>\n  <dd>\n    <p>\n      The object to deliver to the main thread; this will be in the data field in the event delivered to the <a href=\"/en-US/docs/Web/API/Worker/message_event\"><code>Worker.message_event</code></a>.\n      This may be any value or JavaScript object handled by the <a href=\"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\">structured clone</a> algorithm, which includes cyclical references.\n    </p>\n  </dd>\n  <dt id=\"options\"><a href=\"#options\"><code>options</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>An optional object containing a <code>transfer</code> field with an <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\">array</a> of <a href=\"/en-US/docs/Web/API/Web_Workers_API/Transferable_objects\">transferable objects</a> to transfer ownership of. If the ownership of an object is transferred, it becomes unusable in the context it was sent from and it becomes available only to the main thread it was sent to.</p>\n  </dd>\n  <dt id=\"transfer\"><a href=\"#transfer\"><code>transfer</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>\n      An optional ordered <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\">array</a> of <a href=\"/en-US/docs/Web/API/Web_Workers_API/Transferable_objects\">transferable objects</a> to transfer ownership of.\n      If the ownership of an object is transferred, it becomes unusable in the context it was sent from and it becomes available only to the main thread it was sent to.\n    </p>\n    <p>Only <a href=\"/en-US/docs/Web/API/Web_Workers_API/Transferable_objects\">transferable objects</a> can be transferred.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>None (<a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined\"><code>undefined</code></a>).</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  The following code snippet shows <code>worker.js</code>, in which an <code>onmessage</code> handler is used to handle messages from the main script.\n  Inside the handler a calculation is done from which a result message is created; this is then sent back to the main thread using <code>postMessage(workerResult);</code>\n</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Message received from main script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> workerResult <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Result: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> e<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Posting message back to main script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>workerResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>In the main script, <code>onmessage</code> would have to be called on a <code>Worker object</code>, whereas inside the worker script you just need <code>onmessage</code> because the worker is effectively the global scope (<a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope\"><code>DedicatedWorkerGlobalScope</code></a>).</p>\n<p>For a full example, see our <a href=\"https://github.com/mdn/dom-examples/tree/main/web-workers/simple-web-worker\" class=\"external\" target=\"_blank\">Basic dedicated worker example</a> (<a href=\"https://mdn.github.io/dom-examples/web-workers/simple-web-worker/\" class=\"external\" target=\"_blank\">run dedicated worker</a>).</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> <code>postMessage()</code> can only send a single object at once. As seen above, if you want to pass multiple values you can send an array.</p>\n</div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://html.spec.whatwg.org/multipage/workers.html#dom-dedicatedworkerglobalscope-postmessage-dev","title":"HTML Standard"}],"query":"api.DedicatedWorkerGlobalScope.postMessage"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.DedicatedWorkerGlobalScope.postMessage"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<p>The <a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope\"><code>DedicatedWorkerGlobalScope</code></a> interface it belongs to.</p>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The postMessage() method of the DedicatedWorkerGlobalScope interface sends a message to the main thread that spawned it.","popularity":0.0017,"modified":"2023-09-28T23:23:56.000Z","source":{"folder":"en-us/web/api/dedicatedworkerglobalscope/postmessage","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/dedicatedworkerglobalscope/postmessage/index.md","last_commit_url":"https://github.com/mdn/content/commit/19b451de2b4a4db929d060e96eb2d27da6aa813b","filename":"index.md"},"short_title":"postMessage()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/DedicatedWorkerGlobalScope","title":"DedicatedWorkerGlobalScope"},{"uri":"/en-US/docs/Web/API/DedicatedWorkerGlobalScope/postMessage","title":"postMessage()"}],"pageTitle":"DedicatedWorkerGlobalScope: postMessage() method - Web APIs | MDN","noIndexing":false}}