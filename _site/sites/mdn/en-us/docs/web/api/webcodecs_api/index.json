{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"WebCodecs API","mdn_url":"/en-US/docs/Web/API/WebCodecs_API","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><em><a href=\"/en-US/docs/Web/API/WebCodecs_API\" aria-current=\"page\">WebCodecs API</a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/AudioData\"><code>AudioData</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioDecoder\"><code>AudioDecoder</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioEncoder\"><code>AudioEncoder</code></a></li><li><a href=\"/en-US/docs/Web/API/EncodedAudioChunk\"><code>EncodedAudioChunk</code></a></li><li><a href=\"/en-US/docs/Web/API/EncodedVideoChunk\"><code>EncodedVideoChunk</code></a></li><li><a href=\"/en-US/docs/Web/API/ImageDecoder\"><code>ImageDecoder</code></a></li><li><a href=\"/en-US/docs/Web/API/ImageTrack\"><code>ImageTrack</code></a></li><li><a href=\"/en-US/docs/Web/API/ImageTrackList\"><code>ImageTrackList</code></a></li><li><a href=\"/en-US/docs/Web/API/VideoDecoder\"><code>VideoDecoder</code></a></li><li><a href=\"/en-US/docs/Web/API/VideoEncoder\"><code>VideoEncoder</code></a></li><li><a href=\"/en-US/docs/Web/API/VideoColorSpace\"><code>VideoColorSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/VideoFrame\"><code>VideoFrame</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong>WebCodecs API</strong> gives web developers low-level access to the individual frames of a video stream and chunks of audio.\n  It is useful for web applications that require full control over the way media is processed.\n  For example, video or audio editors, and video conferencing.\n</p>"}},{"type":"prose","value":{"id":"concepts_and_usage","title":"Concepts and Usage","isH3":false,"content":"<p>\n  Many Web APIs use media codecs internally.\n  For example, the <a href=\"/en-US/docs/Web/API/Web_Audio_API\"><code>Web Audio API</code></a>, and the <a href=\"/en-US/docs/Web/API/WebRTC_API\"><code>WebRTC API</code></a>.\n  However these APIs do not allow developers to work with individual frames of a video stream and unmixed chunks of encoded audio or video.\n</p>\n<p>\n  Web developers have typically used WebAssembly in order to get around this limitation,\n  and to work with media codecs in the browser.\n  However, this requires additional bandwidth to download codecs that already exist in the browser,\n  reducing performance and power efficiency, and adding additional development overhead.\n</p>\n<p>\n  The WebCodecs API provides access to codecs that are already in the browser.\n  It gives access to raw video frames, chunks of audio data, image decoders, audio and video encoders and decoders.\n</p>"}},{"type":"prose","value":{"id":"processing_model","title":"Processing Model","isH3":true,"content":"<p>\n  The WebCodecs API uses an asynchronous <a href=\"https://w3c.github.io/webcodecs/#codec-processing-model-section\" class=\"external\" target=\"_blank\">processing model</a>. Each instance\n  of an encoder or decoder maintains an internal, independent processing queue. When queueing a substantial amount of work, it's important to\n  keep this model in mind.\n</p>\n<p>\n  Methods named <code>configure()</code>, <code>encode()</code>, <code>decode()</code>, and <code>flush()</code> operate asynchronously by appending control messages\n  to the end the queue, while methods named <code>reset()</code> and <code>close()</code> synchronously abort all pending work and purge the\n  processing queue. After <code>reset()</code>, more work may be queued following a call to <code>configure()</code>, but <code>close()</code> is a permanent operation.\n</p>\n<p>\n  Methods named <code>flush()</code> can be used to wait for the completion of all work that was pending at the time <code>flush()</code> was called. However, it\n  should generally only be called once all desired work is queued. It is not intended to force progress at regular intervals. Calling it\n  unnecessarily will affect encoder quality and cause decoders to require the next input to be a key frame.\n</p>"}},{"type":"prose","value":{"id":"demuxing","title":"Demuxing","isH3":true,"content":"<p>\n  There is currently no API for demuxing media containers. Developers working with containerized media will need to implement their own\n  or use third party libraries. E.g., <a href=\"https://github.com/gpac/mp4box.js/\" class=\"external\" target=\"_blank\">MP4Box.js</a> or <a href=\"https://github.com/jscodec/jswebm\" class=\"external\" target=\"_blank\">jswebm</a> can be\n  used to demux audio and video data into <a href=\"/en-US/docs/Web/API/EncodedAudioChunk\"><code>EncodedAudioChunk</code></a> and <a href=\"/en-US/docs/Web/API/EncodedVideoChunk\"><code>EncodedVideoChunk</code></a> objects respectively.\n</p>"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"audiodecoder\"><a href=\"/en-US/docs/Web/API/AudioDecoder\"><code>AudioDecoder</code></a></dt>\n  <dd>\n    <p>Decodes <a href=\"/en-US/docs/Web/API/EncodedAudioChunk\"><code>EncodedAudioChunk</code></a> objects.</p>\n  </dd>\n  <dt id=\"videodecoder\"><a href=\"/en-US/docs/Web/API/VideoDecoder\"><code>VideoDecoder</code></a></dt>\n  <dd>\n    <p>Decodes <a href=\"/en-US/docs/Web/API/EncodedVideoChunk\"><code>EncodedVideoChunk</code></a> objects.</p>\n  </dd>\n  <dt id=\"audioencoder\"><a href=\"/en-US/docs/Web/API/AudioEncoder\"><code>AudioEncoder</code></a></dt>\n  <dd>\n    <p>Encodes <a href=\"/en-US/docs/Web/API/AudioData\"><code>AudioData</code></a> objects.</p>\n  </dd>\n  <dt id=\"videoencoder\"><a href=\"/en-US/docs/Web/API/VideoEncoder\"><code>VideoEncoder</code></a></dt>\n  <dd>\n    <p>Encodes <a href=\"/en-US/docs/Web/API/VideoFrame\"><code>VideoFrame</code></a> objects.</p>\n  </dd>\n  <dt id=\"encodedaudiochunk\"><a href=\"/en-US/docs/Web/API/EncodedAudioChunk\"><code>EncodedAudioChunk</code></a></dt>\n  <dd>\n    <p>Represents codec-specific encoded audio bytes.</p>\n  </dd>\n  <dt id=\"encodedvideochunk\"><a href=\"/en-US/docs/Web/API/EncodedVideoChunk\"><code>EncodedVideoChunk</code></a></dt>\n  <dd>\n    <p>Represents codec-specific encoded video bytes.</p>\n  </dd>\n  <dt id=\"audiodata\"><a href=\"/en-US/docs/Web/API/AudioData\"><code>AudioData</code></a></dt>\n  <dd>\n    <p>Represents unencoded audio data.</p>\n  </dd>\n  <dt id=\"videoframe\"><a href=\"/en-US/docs/Web/API/VideoFrame\"><code>VideoFrame</code></a></dt>\n  <dd>\n    <p>Represents a frame of unencoded video data.</p>\n  </dd>\n  <dt id=\"videocolorspace\"><a href=\"/en-US/docs/Web/API/VideoColorSpace\"><code>VideoColorSpace</code></a></dt>\n  <dd>\n    <p>Represents the color space of a video frame.</p>\n  </dd>\n  <dt id=\"imagedecoder\"><a href=\"/en-US/docs/Web/API/ImageDecoder\"><code>ImageDecoder</code></a></dt>\n  <dd>\n    <p>Unpacks and decodes image data, giving access to the sequence of frames in an animated image.</p>\n  </dd>\n  <dt id=\"imagetracklist\"><a href=\"/en-US/docs/Web/API/ImageTrackList\"><code>ImageTrackList</code></a></dt>\n  <dd>\n    <p>Represents the list of tracks available in the image.</p>\n  </dd>\n  <dt id=\"imagetrack\"><a href=\"/en-US/docs/Web/API/ImageTrack\"><code>ImageTrack</code></a></dt>\n  <dd>\n    <p>Represents an individual image track.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  In the following example, frames are returned from a <a href=\"/en-US/docs/Web/API/MediaStreamTrackProcessor\"><code>MediaStreamTrackProcessor</code></a>, then encoded.\n  See the full example and read more about it in the article <a href=\"https://developer.chrome.com/articles/webcodecs/\" class=\"external\" target=\"_blank\">Video processing with WebCodecs</a>.\n</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> frame_counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> track <span class=\"token operator\">=</span> stream<span class=\"token punctuation\">.</span><span class=\"token function\">getVideoTracks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> media_processor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MediaStreamTrackProcessor</span><span class=\"token punctuation\">(</span>track<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> media_processor<span class=\"token punctuation\">.</span>readable<span class=\"token punctuation\">.</span><span class=\"token function\">getReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> reader<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">)</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> frame <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>encoder<span class=\"token punctuation\">.</span>encodeQueueSize <span class=\"token operator\">&gt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Too many frames in flight, encoder is overwhelmed</span>\n    <span class=\"token comment\">// let's drop this frame.</span>\n    frame<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    frame_counter<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> insert_keyframe <span class=\"token operator\">=</span> frame_counter <span class=\"token operator\">%</span> <span class=\"token number\">150</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    encoder<span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">keyFrame</span><span class=\"token operator\">:</span> insert_keyframe <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    frame<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://developer.chrome.com/articles/webcodecs/\" class=\"external\" target=\"_blank\">Video processing with WebCodecs</a></li>\n  <li><a href=\"https://w3c.github.io/webcodecs/samples/\" class=\"external\" target=\"_blank\">WebCodecs API Samples</a></li>\n  <li><a href=\"https://webrtchacks.com/real-time-video-processing-with-webcodecs-and-streams-processing-pipelines-part-1/\" class=\"external\" target=\"_blank\">Real-Time Video Processing with WebCodecs and Streams: Processing Pipelines</a></li>\n  <li><a href=\"https://webrtchacks.com/video-frame-processing-on-the-web-webassembly-webgpu-webgl-webcodecs-webnn-and-webtransport/\" class=\"external\" target=\"_blank\">Video Frame Processing on the Web – WebAssembly, WebGPU, WebGL, WebCodecs, WebNN, and WebTransport</a></li>\n</ul>"}}],"toc":[{"text":"Concepts and Usage","id":"concepts_and_usage"},{"text":"Interfaces","id":"interfaces"},{"text":"Examples","id":"examples"},{"text":"See also","id":"see_also"}],"summary":"The WebCodecs API gives web developers low-level access to the individual frames of a video stream and chunks of audio.\n  It is useful for web applications that require full control over the way media is processed.\n  For example, video or audio editors, and video conferencing.","popularity":0.0118,"modified":"2023-10-25T17:27:32.000Z","source":{"folder":"en-us/web/api/webcodecs_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/webcodecs_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/835d6632d59993861a0458510402787f8a2c3cb3","filename":"index.md"},"short_title":"WebCodecs API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/WebCodecs_API","title":"WebCodecs API"}],"pageTitle":"WebCodecs API - Web APIs | MDN","noIndexing":false}}