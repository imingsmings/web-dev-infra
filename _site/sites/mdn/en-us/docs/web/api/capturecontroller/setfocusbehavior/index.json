{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"CaptureController: setFocusBehavior() method","mdn_url":"/en-US/docs/Web/API/CaptureController/setFocusBehavior","locale":"en-US","native":"English (US)","browserCompat":["api.CaptureController.setFocusBehavior"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Screen_Capture_API\">Screen Capture API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/CaptureController\"><code>CaptureController</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/CaptureController/CaptureController\"><code>CaptureController()</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><em><code>setFocusBehavior()</code> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Screen Capture API</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackConstraints/displaySurface\"><code>MediaTrackConstraints.displaySurface</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackConstraints/logicalSurface\"><code>MediaTrackConstraints.logicalSurface</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackConstraints/suppressLocalAudioPlayback\"><code>MediaTrackConstraints.suppressLocalAudioPlayback</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSettings/cursor\"><code>MediaTrackSettings.cursor</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSettings/displaySurface\"><code>MediaTrackSettings.displaySurface</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSettings/logicalSurface\"><code>MediaTrackSettings.logicalSurface</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSettings/suppressLocalAudioPlayback\"><code>MediaTrackSettings.suppressLocalAudioPlayback</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSupportedConstraints/displaySurface\"><code>MediaTrackSupportedConstraints.displaySurface</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSupportedConstraints/logicalSurface\"><code>MediaTrackSupportedConstraints.logicalSurface</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaTrackSupportedConstraints/suppressLocalAudioPlayback\"><code>MediaTrackSupportedConstraints.suppressLocalAudioPlayback</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>The <a href=\"/en-US/docs/Web/API/CaptureController\"><code>CaptureController</code></a> interface's <strong><code>setFocusBehavior()</code></strong> method controls whether the captured tab or window will be focused when an associated <a href=\"/en-US/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a> <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> fulfills, or whether the focus will remain with the tab containing the capturing app.</p>\n<p>You can set this behavior multiple times before the <a href=\"/en-US/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a> call, or once immediately after its <code>Promise</code> resolves. After that, the focus behavior is said to be finalized, and can't be changed.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">setFocusBehavior</span><span class=\"token punctuation\">(</span>focusBehavior<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"focusbehavior\"><a href=\"#focusbehavior\"><code>focusBehavior</code></a></dt>\n  <dd>\n    <p>An enumerated value that describes whether the user agent should transfer focus to the captured display surface, or keep the capturing app focused. Possible values are <code>focus-captured-surface</code> (transfer focus) and <code>no-focus-change</code> (keep focus on the capturing app).</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>None (<code>undefined</code>).</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<dl>\n  <dt id=\"invalidstateerror\"><a href=\"#invalidstateerror\"><code>InvalidStateError</code></a> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>Thrown if:</p>\n    <ul>\n      <li>The capture stream has been stopped.</li>\n      <li>The user chose to share a screen (<a href=\"/en-US/docs/Web/API/MediaTrackSettings/displaySurface\" title=\"displaySurface\"><code>displaySurface</code></a> type <code>monitor</code>) rather than a <code>browser</code> tab or <code>window</code> â€” you can't focus a monitor. In this case the exception is thrown after the <a href=\"/en-US/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a> <code>Promise</code> resolves.</li>\n      <li>Enough time has elapsed after the <a href=\"/en-US/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a> <code>Promise</code> fulfills that the focus behavior has been finalized.</li>\n    </ul>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Create a new CaptureController instance</span>\n<span class=\"token keyword\">const</span> controller <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CaptureController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Prompt the user to share a tab, window, or screen.</span>\n<span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>mediaDevices<span class=\"token punctuation\">.</span><span class=\"token function\">getDisplayMedia</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> controller <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Query the displaySurface value of the captured video track</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>track<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> stream<span class=\"token punctuation\">.</span><span class=\"token function\">getVideoTracks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> displaySurface <span class=\"token operator\">=</span> track<span class=\"token punctuation\">.</span><span class=\"token function\">getSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>displaySurface<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>displaySurface <span class=\"token operator\">==</span> <span class=\"token string\">\"browser\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Focus the captured tab.</span>\n  controller<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusBehavior</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"focus-captured-surface\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>displaySurface <span class=\"token operator\">==</span> <span class=\"token string\">\"window\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Do not move focus to the captured window.</span>\n  <span class=\"token comment\">// Keep the capturing page focused.</span>\n  controller<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusBehavior</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"no-focus-change\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/mediacapture-screen-share/#dom-capturecontroller-setfocusbehavior","title":"Screen Capture"}],"query":"api.CaptureController.setFocusBehavior"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.CaptureController.setFocusBehavior"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Screen_Capture_API\">Screen Capture API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a></li>\n  <li><a href=\"https://developer.chrome.com/docs/web-platform/conditional-focus/\" class=\"external\" target=\"_blank\">Better screen sharing with Conditional Focus</a></li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The CaptureController interface's setFocusBehavior() method controls whether the captured tab or window will be focused when an associated MediaDevices.getDisplayMedia() Promise fulfills, or whether the focus will remain with the tab containing the capturing app.","popularity":0,"modified":"2023-04-07T06:13:50.000Z","source":{"folder":"en-us/web/api/capturecontroller/setfocusbehavior","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/capturecontroller/setfocusbehavior/index.md","last_commit_url":"https://github.com/mdn/content/commit/1f216a70d94c3901c5767e6108a29daa48edc070","filename":"index.md"},"short_title":"setFocusBehavior()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/CaptureController","title":"CaptureController"},{"uri":"/en-US/docs/Web/API/CaptureController/setFocusBehavior","title":"setFocusBehavior()"}],"pageTitle":"CaptureController: setFocusBehavior() method - Web APIs | MDN","noIndexing":false}}