{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"StorageManager: estimate() method","mdn_url":"/en-US/docs/Web/API/StorageManager/estimate","locale":"en-US","native":"English (US)","browserCompat":["api.StorageManager.estimate"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Storage_API\">Storage API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/StorageManager\"><code>StorageManager</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><em><code>estimate()</code> </em></li><li><a href=\"/en-US/docs/Web/API/StorageManager/getDirectory\"><code>getDirectory()</code></a></li><li><a href=\"/en-US/docs/Web/API/StorageManager/persist\"><code>persist()</code></a></li><li><a href=\"/en-US/docs/Web/API/StorageManager/persisted\"><code>persisted()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Storage</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/storage\"><code>Navigator.storage</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator/storage\"><code>WorkerNavigator.storage</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard secure\" id=\"sect1\"><p><strong>Secure context:</strong> This feature is available only in <a href=\"/en-US/docs/Web/Security/Secure_Contexts\">secure contexts</a> (HTTPS), in some or all <a href=\"#browser_compatibility\">supporting browsers</a>.</p></div><div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> This feature is available in <a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div>\n<p>The <strong><code>estimate()</code></strong> method of the <a href=\"/en-US/docs/Web/API/StorageManager\"><code>StorageManager</code></a> interface asks the Storage Manager for how much storage the current <a href=\"/en-US/docs/Glossary/Same-origin_policy\">origin</a> takes up (<code>usage</code>), and how much space is available (<code>quota</code>).</p>\n<p>This method operates asynchronously, so it returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> which resolves once the information is available. The promise's fulfillment handler is called with an object containing the usage and quota data.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">estimate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<p>None.</p>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>A <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves to an object with the following properties:</p>\n<dl>\n  <dt id=\"quota\"><a href=\"#quota\"><code>quota</code></a></dt>\n  <dd>\n    <p>A numeric value in bytes which provides a conservative approximation of the total storage the user's device or computer has available for the site origin or Web app. It's possible that there's more than this amount of space available though you can't rely on that being the case.</p>\n  </dd>\n  <dt id=\"usage\"><a href=\"#usage\"><code>usage</code></a></dt>\n  <dd>\n    <p>A numeric value in bytes approximating the amount of storage space currently being used by the site or Web app, out of the available space as indicated by <code>quota</code>. Unit is byte.</p>\n  </dd>\n  <dt id=\"usagedetails\"><a href=\"#usagedetails\"><code>usageDetails</code></a> <abbr class=\"icon icon-nonstandard\" title=\"Non-standard. Check cross-browser support before using.\">\n    <span class=\"visually-hidden\">Non-standard</span>\n</abbr></dt>\n  <dd>\n    <p>An object containing a breakdown of <code>usage</code> by storage system. All included properties will have a <code>usage</code> greater than 0 and any storage system with 0 <code>usage</code> will be excluded from the object.</p>\n  </dd>\n</dl>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> The returned values are not exact: between compression, deduplication, and obfuscation for security reasons, they will be imprecise.</p>\n</div>\n<p>You may find that the <code>quota</code> varies from origin to origin. This variance is based on factors such as:</p>\n<ul>\n  <li>How often the user visits</li>\n  <li>Public site popularity data</li>\n  <li>User engagement signals like bookmarking, adding to homescreen, or accepting push notifications</li>\n</ul>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<dl>\n  <dt id=\"typeerror\"><a href=\"#typeerror\"><code>TypeError</code></a></dt>\n  <dd>\n    <p>Thrown if obtaining a local storage shelf failed. For example, if the current origin is an opaque origin or if the user has disabled storage.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>In this example, we obtain the usage estimates and present the percentage of storage capacity currently used to the user.</p>"}},{"type":"prose","value":{"id":"html","title":"HTML","isH3":true,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n  You're currently using about <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>output</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>percent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>output</span><span class=\"token punctuation\">&gt;</span></span>% of your\n  estimated storage quota (<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>output</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>quota<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>output</span><span class=\"token punctuation\">&gt;</span></span>).\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"javascript","title":"JavaScript","isH3":true,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">estimate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">estimate</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"percent\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span>estimate<span class=\"token punctuation\">.</span>usage <span class=\"token operator\">/</span> estimate<span class=\"token punctuation\">.</span>quota<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>\n    <span class=\"token number\">100</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"quota\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>estimate<span class=\"token punctuation\">.</span>quota <span class=\"token operator\">/</span> <span class=\"token number\">1024</span> <span class=\"token operator\">/</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"MB\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"result","title":"Result","isH3":true,"content":"<div class=\"code-example\" id=\"sect4\"><p class=\"example-header\"></p><iframe class=\"sample-code-frame\" title=\"Examples sample\" id=\"frame_examples\" width=\"600\" height=\"60\" src=\"http://localhost:5042/en-US/docs/Web/API/StorageManager/estimate/runner.html?id=examples\" loading=\"lazy\"></iframe></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://storage.spec.whatwg.org/#ref-for-dom-storagemanager-estimate","title":"Storage Standard"}],"query":"api.StorageManager.estimate"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.StorageManager.estimate"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Storage_API\">Storage API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Storage\"><code>Storage</code></a>, the object returned by <a href=\"/en-US/docs/Web/API/Window/localStorage\"><code>Window.localStorage</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/StorageManager\"><code>StorageManager</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Navigator/storage\"><code>navigator.storage</code></a></li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The estimate() method of the StorageManager interface asks the Storage Manager for how much storage the current origin takes up (usage), and how much space is available (quota).","popularity":0.0041,"modified":"2023-11-09T10:06:49.000Z","source":{"folder":"en-us/web/api/storagemanager/estimate","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/storagemanager/estimate/index.md","last_commit_url":"https://github.com/mdn/content/commit/6fb7a20b8fa1f41766e498ca52e1c0573789e95d","filename":"index.md"},"short_title":"estimate()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/StorageManager","title":"StorageManager"},{"uri":"/en-US/docs/Web/API/StorageManager/estimate","title":"estimate()"}],"pageTitle":"StorageManager: estimate() method - Web APIs | MDN","noIndexing":false}}