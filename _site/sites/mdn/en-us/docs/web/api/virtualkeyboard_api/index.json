{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"VirtualKeyboard API","mdn_url":"/en-US/docs/Web/API/VirtualKeyboard_API","locale":"en-US","native":"English (US)","browserCompat":["api.VirtualKeyboard"],"sidebarHTML":"<ol><li><strong><em><a href=\"/en-US/docs/Web/API/VirtualKeyboard_API\" aria-current=\"page\">VirtualKeyboard API</a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/VirtualKeyboard\"><code>VirtualKeyboard</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/virtualKeyboard\"><code>Navigator.virtualKeyboard</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div><div class=\"notecard secure\" id=\"sect2\"><p><strong>Secure context:</strong> This feature is available only in <a href=\"/en-US/docs/Web/Security/Secure_Contexts\">secure contexts</a> (HTTPS), in some or all <a href=\"#browser_compatibility\">supporting browsers</a>.</p></div>\n<p>The VirtualKeyboard API provides developers control over the layout of their applications when the on-screen virtual keyboard appears and disappears on devices such as tablets, mobile phones, or other devices where a hardware keyboard may not be available.</p>\n<p>Web browsers usually deal with virtual keyboards on their own, by adjusting the viewport height and scrolling to input fields when focused.</p>\n<p>The figure below illustrates the difference in viewport height and scroll position on a web page when the device has its on-screen virtual keyboard hidden, and when it is shown.</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/VirtualKeyboard_API/viewport-height.png\" alt=\"Two devices, one without a virtual keyboard, showing that the webpage can use most of the device's vertical space, and one with a virtual keyboard, showing that the webpage can only be displayed in the remaining space\" width=\"1275\" height=\"768\" loading=\"lazy\">\n</p>\n<p>More complex applications or specific devices such as multi-screen mobile phones may require more control of the layout when the virtual keyboard appears.</p>\n<p>The figure below shows what happens on a dual-screen device when the virtual keyboard appears on just one of the two screens. The viewport becomes smaller on both screens to accommodate for the virtual keyboard, leaving wasted space on the screen where the virtual keyboard is not displayed.</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/VirtualKeyboard_API/dual-screen.png\" alt=\"A dual-screen device, with its virtual keyboard displayed on one screen, showing that the webpage can only use the vertical space that remains after the keyboard was displayed, even if that leaves empty space on the other screen\" width=\"1016\" height=\"768\" loading=\"lazy\">\n</p>\n<p>The VirtualKeyboard API can be used to opt out of the way the browser automatically handles the virtual keyboard, and take full control of it instead. With the VirtualKeyboard API, the keyboard still appears and disappears as necessary when form controls are focused, but the viewport does not change, and you can use JavaScript and CSS to adapt your layout.</p>"}},{"type":"prose","value":{"id":"concept","title":"Concept","isH3":false,"content":"<p>The VirtualKeyboard API consists of three parts:</p>\n<ul>\n  <li>The <a href=\"/en-US/docs/Web/API/VirtualKeyboard\"><code>VirtualKeyboard</code></a> interface, accessed through <a href=\"/en-US/docs/Web/API/Navigator/virtualKeyboard\"><code>navigator.virtualKeyboard</code></a>, is used to opt out of the automatic virtual keyboard behavior, show or hide the virtual keyboard programmatically, as well as get the current position and size of the virtual keyboard.</li>\n  <li>The <code>keyboard-inset-*</code> CSS environment variables provide information about the virtual keyboard's position and size.</li>\n  <li>The <a href=\"/en-US/docs/Web/HTML/Global_attributes/virtualkeyboardpolicy\"><code>virtualkeyboardpolicy</code></a> attribute specifies whether the virtual keyboard should appear on <code>contenteditable</code> elements.</li>\n</ul>"}},{"type":"prose","value":{"id":"opt_out_of_the_automatic_virtual_keyboard_behavior","title":"Opt out of the automatic virtual keyboard behavior","isH3":true,"content":"<p>To opt out of the automatic virtual keyboard behavior of the browser, use <code>navigator.virtualKeyboard.overlaysContent = true</code>. The browser will no longer automatically resize the viewport to make space for the virtual keyboard, which will overlay your content instead.</p>"}},{"type":"prose","value":{"id":"detect_the_virtual_keyboard_geometry_using_javascript","title":"Detect the virtual keyboard geometry using JavaScript","isH3":true,"content":"<p>Once you've opted out of the default browser behavior, you can get the current geometry of the virtual keyboard using <code>navigator.virtualKeyboard.boundingRect</code>, and adapt the layout as appropriate using CSS and JavaScript. In addition, you can listen to geometry changes, such as when the keyboard is shown or hidden, by using the <code>geometrychange</code> event.</p>\n<p>This is useful for positioning important UI elements in the area that's not covered by the virtual keyboard.</p>\n<p>The code snippet below uses the <code>geometrychange</code> event to detect when the virtual keyboard geometry changes; it then accesses the <code>boundingRect</code> property to query the size and position of the virtual keyboard:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"virtualKeyboard\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  navigator<span class=\"token punctuation\">.</span>virtualKeyboard<span class=\"token punctuation\">.</span>overlaysContent <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n  navigator<span class=\"token punctuation\">.</span>virtualKeyboard<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"geometrychange\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>boundingRect<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"detect_the_virtual_keyboard_geometry_using_css_environment_variables","title":"Detect the virtual keyboard geometry using CSS environment variables","isH3":true,"content":"<p>The VirtualKeyboard API also exposes the following <a href=\"/en-US/docs/Web/CSS/env\"><code>CSS environment variables</code></a>: <code>keyboard-inset-top</code>, <code>keyboard-inset-right</code>, <code>keyboard-inset-bottom</code>, <code>keyboard-inset-left</code>, <code>keyboard-inset-width</code>, and <code>keyboard-inset-height</code>.</p>\n<p>The <code>keyboard-inset-*</code> CSS environment variables are useful to adapt your layout to the virtual keyboard appearance using CSS. They define a rectangle by its top, right, bottom, and left insets from the edge of the viewport. The <code>width</code> and <code>height</code> variables are also available if needed.</p>\n<p>The code snippet below uses the <code>keyboard-inset-height</code> CSS variable to reserve space for the virtual keyboard to appear below the list of messages and input field in a chat-like application. When the virtual keyboard is hidden, the <code>env()</code> function returns <code>0px</code> and the <code>keyboard</code> grid area is hidden. The messages and input elements can occupy the full height of the viewport. When the virtual keyboard appears, the <code>keyboard</code> grid area gets the height of the virtual keyboard.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> grid<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100vh<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">grid-template</span><span class=\"token punctuation\">:</span>\n      <span class=\"token string\">\"messages\"</span> 1fr\n      <span class=\"token string\">\"input\"</span> auto\n      <span class=\"token string\">\"keyboard\"</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span>keyboard-inset-height<span class=\"token punctuation\">,</span> 0px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>messages<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"virtualKeyboard\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    navigator<span class=\"token punctuation\">.</span>virtualKeyboard<span class=\"token punctuation\">.</span>overlaysContent <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"control_the_virtual_keyboard_on_contenteditable_elements","title":"Control the virtual keyboard on <code>contenteditable</code> elements","isH3":true,"content":"<p>By default, elements using the <a href=\"/en-US/docs/Web/HTML/Global_attributes/contenteditable\"><code>contenteditable</code></a> attribute also trigger the virtual keyboard when tapped or clicked. In certain situations, it may be desirable to prevent this behavior and instead show the virtual keyboard after a different event.</p>\n<p>Set the <a href=\"/en-US/docs/Web/HTML/Global_attributes/virtualkeyboardpolicy\"><code>virtualkeyboardpolicy</code></a> attribute to <code>manual</code> to prevent the default handling of the virtual keyboard in the browser, and instead handle it yourself by using the <a href=\"/en-US/docs/Web/API/VirtualKeyboard\"><code>VirtualKeyboard</code></a> interface's <code>show()</code> and <code>hide()</code> methods.</p>\n<p>The code snippet below shows how to use the <code>virtualkeyboardpolicy</code> attribute and the <code>navigator.virtualKeyboard.show()</code> method to show the virtual keyboard on double-click instead:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">contenteditable</span> <span class=\"token attr-name\">virtualkeyboardpolicy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>manual<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>editor<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"virtualKeyboard\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    navigator<span class=\"token punctuation\">.</span>virtualKeyboard<span class=\"token punctuation\">.</span>overlaysContent <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> editor <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"editor\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    editor<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dblclick\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      navigator<span class=\"token punctuation\">.</span>virtualKeyboard<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>","titleAsText":"Control the virtual keyboard on contenteditable elements"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"virtualkeyboard\"><a href=\"/en-US/docs/Web/API/VirtualKeyboard\"><code>VirtualKeyboard</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>Provides functions that retrieve keyboard layout maps and toggle capturing of key presses from the physical keyboard.</p>\n  </dd>\n</dl>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/virtual-keyboard/#the-virtualkeyboard-interface","title":"VirtualKeyboard API"}],"query":"api.VirtualKeyboard"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.VirtualKeyboard"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://developer.chrome.com/docs/web-platform/virtual-keyboard/\" class=\"external\" target=\"_blank\">Full control with the VirtualKeyboard API</a></li>\n</ul>"}}],"toc":[{"text":"Concept","id":"concept"},{"text":"Interfaces","id":"interfaces"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The VirtualKeyboard API provides developers control over the layout of their applications when the on-screen virtual keyboard appears and disappears on devices such as tablets, mobile phones, or other devices where a hardware keyboard may not be available.","popularity":0.0099,"modified":"2023-10-30T09:05:18.000Z","source":{"folder":"en-us/web/api/virtualkeyboard_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/virtualkeyboard_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/5cdb341c723de0edb273769555d9124266d9c851","filename":"index.md"},"short_title":"VirtualKeyboard API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/VirtualKeyboard_API","title":"VirtualKeyboard API"}],"pageTitle":"VirtualKeyboard API - Web APIs | MDN","noIndexing":false}}