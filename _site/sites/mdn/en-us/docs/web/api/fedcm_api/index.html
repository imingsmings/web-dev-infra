<!doctype html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="icon" href="/favicon-48x48.cbbd161b.png"/><link rel="apple-touch-icon" href="/apple-touch-icon.6803c6f0.png"/><meta name="theme-color" content="#ffffff"/><link rel="manifest" href="/manifest.56b1cedc.json"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"/><title>Federated Credential Management (FedCM) API - Web APIs | MDN</title><link rel="alternate" type="application/rss+xml" title="MDN Blog RSS Feed" href="https://developer.mozilla.org/en-US/blog/rss.xml" hreflang="en" /><meta name="robots" content="noindex, nofollow"><meta name="description" content="The Federated Credential Management API (or FedCM API) provides a standard mechanism for identity providers (IdPs) to make identity federation services available on the web in a privacy-preserving way, without the need for third-party cookies and redirects. This includes a JavaScript API that enables the use of federated authentication for activities such as signing in or signing up on a website."/><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/API/FedCM_API"/><meta property="og:title" content="Federated Credential Management (FedCM) API - Web APIs | MDN"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:description" content="The Federated Credential Management API (or FedCM API) provides a standard mechanism for identity providers (IdPs) to make identity federation services available on the web in a privacy-preserving way, without the need for third-party cookies and redirects. This includes a JavaScript API that enables the use of federated authentication for activities such as signing in or signing up on a website."/><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:height" content="1080"/><meta property="og:image:width" content="1920"/><meta property="og:image:alt" content="The MDN Web Docs logo, featuring a blue accent color, displayed on a solid black background."/><meta property="og:site_name" content="MDN Web Docs"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="MozDevNet"/><link rel="canonical" href="https://developer.mozilla.org/en-US/docs/Web/API/FedCM_API"/><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.on-github,.page-footer,.place,.sidebar,.top-banner,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script defer="defer" src="/static/js/main.8204838d.js"></script><link href="/static/css/main.3551aa81.css" rel="stylesheet"></head><body><script>if(document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0}),window&&document.documentElement){const t={light:"#ffffff",dark:"#1b1b1b"};try{const e=window.localStorage.getItem("theme");e&&(document.documentElement.className=e,document.documentElement.style.backgroundColor=t[e])}catch(t){console.warn("Unable to read theme from localStorage",t)}}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper  category-api document-page"><div class="top-banner loading"><section class="place top container"></section></div><div class="sticky-header-container"><header class="top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zm10.4 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zm10.4 0v92.1H91V0h10.4z" class="logo-m"></path><path d="M627.9 95.6h67v8.8h-67v-8.8z" class="logo-_"></path><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zm34.9 20c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zm51 2.4c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zm69.2 18.5h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm53.1-1.4c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zm45 5.8c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zm34.7 1.9c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z" class="logo-text"></path></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container active"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="/en-US/docs/Web/API" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container "><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/blog/">Blog</a></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/play">Play</a></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/plus/ai-help">AI Help <sup class="new beta">Beta</sup></a></li></ul></nav><div class="header-search"><form action="/en-US/search" class="search-form search-widget" id="top-nav-search-form" role="search"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input aria-activedescendant="" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-expanded="false" aria-labelledby="top-nav-search-label" autoComplete="off" id="top-nav-search-input" role="combobox" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""/><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="?next=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FFedCM_API" class="login-link" rel="nofollow">Log in</a></li><li><a href="?next=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FFedCM_API" target="_self" class="button primary mdn-plus-subscribe-link"><span class="button-wrap">Sign up for free</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Web"><span property="name">References</span></a><meta property="position" content="1"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Web/API"><span property="name">Web APIs</span></a><meta property="position" content="2"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/en-US/docs/Web/API/FedCM_API"><span property="name">Federated Credential Management (FedCM) API</span></a><meta property="position" content="3"/></li></ol></nav></div></div></div><div class="main-wrapper"><div class="sidebar-container"><aside id="sidebar-quicklinks" class="sidebar" data-macro="DefaultAPISidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><header class="sidebar-actions"><section class="sidebar-filter-container"><div class="sidebar-filter "><label id="sidebar-filter-label" class="sidebar-filter-label" for="sidebar-filter-input"><span class="icon icon-filter"></span><span class="visually-hidden">Filter sidebar</span></label><input id="sidebar-filter-input" autoComplete="off" class="sidebar-filter-input-field false" type="text" placeholder="Filter" value=""/><button type="button" class="button action has-icon clear-sidebar-filter-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear filter input</span></span></button></div></section></header><div class="sidebar-inner-nav"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#fedcm_concepts">FedCM concepts</a></li><li class="document-toc-item "><a class="document-toc-link" href="#idp_integration_with_fedcm">IdP integration with FedCM</a></li><li class="document-toc-item "><a class="document-toc-link" href="#rp_sign-in_using_the_javascript_api">RP sign-in using the JavaScript API</a></li><li class="document-toc-item "><a class="document-toc-link" href="#permissions_policy_integration_and_iframe_support">Permissions Policy integration and IFrame support</a></li><li class="document-toc-item "><a class="document-toc-link" href="#interfaces">Interfaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#extensions_to_other_interfaces">Extensions to other interfaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#examples">Examples</a></li><li class="document-toc-item "><a class="document-toc-link" href="#specifications">Specifications</a></li><li class="document-toc-item "><a class="document-toc-link" href="#browser_compatibility">Browser compatibility</a></li><li class="document-toc-item "><a class="document-toc-link" href="#see_also">See also</a></li></ul></section></div></div><div class="sidebar-body"><ol><li><strong><em><a href="/en-US/docs/Web/API/FedCM_API" aria-current="page">FedCM API</a></em></strong></li><li class="toggle"><details open=""><summary>Interfaces</summary><ol><li><a href="/en-US/docs/Web/API/IdentityCredential"><code>IdentityCredential</code></a></li><li><a href="/en-US/docs/Web/API/IdentityProvider"><code>IdentityProvider</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Methods</summary><ol><li><a href="/en-US/docs/Web/API/CredentialsContainer/get"><code>CredentialsContainer.get()</code></a></li></ol></details></li></ol></div></div></nav></aside><div class="toc-container"><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#fedcm_concepts">FedCM concepts</a></li><li class="document-toc-item "><a class="document-toc-link" href="#idp_integration_with_fedcm">IdP integration with FedCM</a></li><li class="document-toc-item "><a class="document-toc-link" href="#rp_sign-in_using_the_javascript_api">RP sign-in using the JavaScript API</a></li><li class="document-toc-item "><a class="document-toc-link" href="#permissions_policy_integration_and_iframe_support">Permissions Policy integration and IFrame support</a></li><li class="document-toc-item "><a class="document-toc-link" href="#interfaces">Interfaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#extensions_to_other_interfaces">Extensions to other interfaces</a></li><li class="document-toc-item "><a class="document-toc-link" href="#examples">Examples</a></li><li class="document-toc-item "><a class="document-toc-link" href="#specifications">Specifications</a></li><li class="document-toc-item "><a class="document-toc-link" href="#browser_compatibility">Browser compatibility</a></li><li class="document-toc-item "><a class="document-toc-link" href="#see_also">See also</a></li></ul></section></div></nav></aside></div></div><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><header><h1>Federated Credential Management (FedCM) API</h1></header><div class="section-content"><div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div>
<p>The <strong>Federated Credential Management API</strong> (or <em>FedCM API</em>) provides a standard mechanism for identity providers (IdPs) to make identity federation services available on the web in a privacy-preserving way, without the need for third-party cookies and redirects. This includes a JavaScript API that enables the use of federated authentication for activities such as signing in or signing up on a website.</p></div><section aria-labelledby="fedcm_concepts"><h2 id="fedcm_concepts"><a href="#fedcm_concepts">FedCM concepts</a></h2><div class="section-content"><p>Identity federation is the delegation of user authentication from a website requiring user sign-up or sign-in, such as an e-commerce or social networking site (also known as a relying party or RP), to a trusted third-party IdP. Users register an account with the IdP, which can then be used for signing in on multiple RPs. Identity federation via a small set of dedicated IdPs has improved web authentication in terms of security, consumer confidence, and user experience, as compared to each site managing its own sign-in needs with separate usernames and passwords.</p>
<p>The problem is that traditional identity federation relies on <a href="/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>s, redirects, and third-party cookies, which are also used for third-party tracking. Browsers are limiting the usage of these features in an effort to preserve user privacy, but a side effect is that this makes valid, non-tracking uses more difficult to implement, and this includes identity federation.</p>
<p>Affected identity federation use cases that rely on third-party cookies:</p>
<ul>
  <li><a href="https://openid.net/specs/openid-connect-frontchannel-1_0.html" class="external" target="_blank">OIDC front-channel logout</a>: This flow requires the IDP to embed several RP <code>&lt;iframe&gt;</code>s, which rely on RP cookies.</li>
  <li>Social Widgets: In order to provide social widgets, the IdP third-party cookie must be provided from the RP top-level origin.</li>
  <li>Personalized buttons: The display of personalized sign in information on a <a href="/en-US/docs/Web/HTML/Element/button"><code>&lt;button&gt;</code></a> in the RP origin is implemented as an IdP <code>&lt;iframe&gt;</code> that requires third party cookies.</li>
  <li>Session Refresh without top-level navigation or popups.</li>
</ul>
<p>FedCM aims to work around this problem, providing a dedicated mechanism for federated identity flows on the web, and enabling supporting browsers to provide special UI elements on RPs, allowing users to choose an IdP account to use for sign-in.</p>
<p>There are two parts to using the FedCM API: IdP integration with FedCM and RP sign-in using the JavaScript API.</p></div></section><section aria-labelledby="idp_integration_with_fedcm"><h2 id="idp_integration_with_fedcm"><a href="#idp_integration_with_fedcm">IdP integration with FedCM</a></h2><div class="section-content"><p>To integrate with FedCM, an IdP needs to do the following:</p>
<ol>
  <li>Provide a well-known file to identify the IdP.</li>
  <li>Provide a config file and endpoints for accounts list and assertion issuance (and optionally, client metadata).</li>
</ol></div></section><section aria-labelledby="provide_a_well-known_file"><h3 id="provide_a_well-known_file"><a href="#provide_a_well-known_file">Provide a well-known file</a></h3><div class="section-content"><p>There is a potential privacy issue whereby an <a href="https://github.com/fedidcg/FedCM/issues/230" class="external" target="_blank">IdP is able to discern whether a user visited an RP without explicit consent</a>. This has tracking implications, so an IdP is required to provide a well-known file to verify its identity and mitigate this issue.</p>
<p>The well-known file must be served from the <a href="https://web.dev/articles/same-site-same-origin#site" class="external" target="_blank">eTLD+1</a> of the IdP at <code>/.well-known/web-identity</code>.</p>
<p>For example, if the IdP endpoints are served under <code>https://accounts.idp.example/</code>, they must serve a well-known file at <code>https://idp.example/.well-known/web-identity</code>. The well-known file's content should have the following JSON structure:</p>
<div class="code-example"><p class="example-header"><span class="language-name">json</span></p><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"provider_urls"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"https://accounts.idp.example/config.json"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The <code>provider_urls</code> member should contain an array of URLs pointing to valid IdP config files that can be used by RPs to interact with the IdP. The array length is currently limited to one.</p></div></section><section aria-labelledby="provide_a_config_file"><h3 id="provide_a_config_file"><a href="#provide_a_config_file">Provide a config file</a></h3><div class="section-content"><p>The IdP config file provides a list of the endpoints the browser needs to process the identity federation flow and manage the sign-ins. IdPs will host both this config file and the required endpoints.</p>
<p>The config file (hosted at <code>https://accounts.idp.example/config.json</code> in our example) should have the following JSON structure:</p>
<div class="code-example"><p class="example-header"><span class="language-name">json</span></p><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"accounts_endpoint"</span><span class="token operator">:</span> <span class="token string">"/accounts.php"</span><span class="token punctuation">,</span>
  <span class="token property">"client_metadata_endpoint"</span><span class="token operator">:</span> <span class="token string">"/client_metadata.php"</span><span class="token punctuation">,</span>
  <span class="token property">"id_assertion_endpoint"</span><span class="token operator">:</span> <span class="token string">"/assertion.php"</span><span class="token punctuation">,</span>
  <span class="token property">"branding"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"background_color"</span><span class="token operator">:</span> <span class="token string">"green"</span><span class="token punctuation">,</span>
    <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"0xFFEEAA"</span><span class="token punctuation">,</span>
    <span class="token property">"icons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://idp.example/icon.ico"</span><span class="token punctuation">,</span>
        <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">25</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The properties are as follows:</p>
<dl>
  <dt id="accounts_endpoint"><a href="#accounts_endpoint"><code>accounts_endpoint</code></a></dt>
  <dd>
    <p>The URL for the accounts list endpoint, which returns a list of accounts that the user is currently signed in to on the IdP. The browser uses these to create a list of sign-in choices to show to the user in the browser-provided FedCM UI.</p>
  </dd>
  <dt id="client_metadata_endpoint"><a href="#client_metadata_endpoint"><code>client_metadata_endpoint</code></a> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>The URL for the client metadata endpoint, which provides URLs pointing to the RP's metadata and terms of service pages, to be used in the FedCM UI.</p>
  </dd>
  <dt id="id_assertion_endpoint"><a href="#id_assertion_endpoint"><code>id_assertion_endpoint</code></a></dt>
  <dd>
    <p>The URL for the ID assertion endpoint, which when sent valid user credentials should respond with a validation token that the RP can use to validate the authentication.</p>
  </dd>
  <dt id="branding"><a href="#branding"><code>branding</code></a> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>Contains branding information that will be used in the browser-supplied FedCM UI to customize its appearance as desired by the IdP.</p>
  </dd>
</dl>
<h4 id="the_accounts_list_endpoint">The accounts list endpoint</h4>
<p>This endpoint returns a list of all the IdP accounts that the user is currently signed in with, with a JSON structure that matches the following:</p>
<div class="code-example"><p class="example-header"><span class="language-name">json</span></p><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"accounts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"john_doe"</span><span class="token punctuation">,</span>
      <span class="token property">"given_name"</span><span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
      <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john_doe@idp.example"</span><span class="token punctuation">,</span>
      <span class="token property">"picture"</span><span class="token operator">:</span> <span class="token string">"https://idp.example/profile/123"</span><span class="token punctuation">,</span>
      <span class="token property">"approved_clients"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"123"</span><span class="token punctuation">,</span> <span class="token string">"456"</span><span class="token punctuation">,</span> <span class="token string">"789"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"login_hints"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"john_doe"</span><span class="token punctuation">,</span> <span class="token string">"john_doe@idp.example"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"johnny"</span><span class="token punctuation">,</span>
      <span class="token property">"given_name"</span><span class="token operator">:</span> <span class="token string">"Johnny"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Johnny"</span><span class="token punctuation">,</span>
      <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"johnny@idp.example"</span><span class="token punctuation">,</span>
      <span class="token property">"picture"</span><span class="token operator">:</span> <span class="token string">"https://idp.example/profile/456"</span><span class="token punctuation">,</span>
      <span class="token property">"approved_clients"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token string">"def"</span><span class="token punctuation">,</span> <span class="token string">"ghi"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"login_hints"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"johnny"</span><span class="token punctuation">,</span> <span class="token string">"johnny@idp.example"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>This includes the following information:</p>
<dl>
  <dt id="id"><a href="#id"><code>id</code></a></dt>
  <dd>
    <p>The unique ID of the user.</p>
  </dd>
  <dt id="name"><a href="#name"><code>name</code></a></dt>
  <dd>
    <p>The family name of the user.</p>
  </dd>
  <dt id="email"><a href="#email"><code>email</code></a></dt>
  <dd>
    <p>The email address of the user.</p>
  </dd>
  <dt id="given_name"><a href="#given_name"><code>given_name</code></a> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>The given name of the user.</p>
  </dd>
  <dt id="picture"><a href="#picture"><code>picture</code></a> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>The URL of the user's avatar image.</p>
  </dd>
  <dt id="approved_clients"><a href="#approved_clients"><code>approved_clients</code></a> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>An array of RP clients that the user has registered with.</p>
  </dd>
  <dt id="login_hints"><a href="#login_hints"><code>login_hints</code></a> <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>An array of strings representing the account. These strings are used to filter the list of account options that the browser offers for the user to sign-in. This occurs when the <code>loginHint</code> property is provided within <a href="/en-US/docs/Web/API/CredentialsContainer/get#identity_object_structure"><code>identity.providers</code></a> in a related <code>get()</code> call. Any account with a string in its <code>login_hints</code> array that matches the provided <code>loginHint</code> is included.</p>
  </dd>
</dl>
<div class="notecard note" id="sect2">
  <p><strong>Note:</strong>: If the user is not signed in to any IdP accounts, the endpoint should respond with <a href="/en-US/docs/Web/HTTP/Status/401">HTTP 401 (Unauthorized)</a>.</p>
</div>
<h4 id="the_client_metadata_endpoint">The client metadata endpoint</h4>
<p>Provides URLs pointing to the RP's metadata and terms of service pages, to be used in the browser-supplied FedCM UI. This should follow the JSON structure seen below:</p>
<div class="code-example"><p class="example-header"><span class="language-name">json</span></p><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"privacy_policy_url"</span><span class="token operator">:</span> <span class="token string">"https://rp.example/privacy_policy.html"</span><span class="token punctuation">,</span>
  <span class="token property">"terms_of_service_url"</span><span class="token operator">:</span> <span class="token string">"https://rp.example/terms_of_service.html"</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4 id="the_id_assertion_endpoint">The ID assertion endpoint</h4>
<p>When sent valid user credentials, this endpoint should respond with a validation token that the RP can use to validate the authentication:</p>
<div class="code-example"><p class="example-header"><span class="language-name">json</span></p><pre class="brush: json notranslate"><code><span class="token punctuation">{</span>
  <span class="token property">"token"</span><span class="token operator">:</span> <span class="token string">"***********"</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section><section aria-labelledby="rp_sign-in_using_the_javascript_api"><h2 id="rp_sign-in_using_the_javascript_api"><a href="#rp_sign-in_using_the_javascript_api">RP sign-in using the JavaScript API</a></h2><div class="section-content"><p>RPs can call <a href="/en-US/docs/Web/API/CredentialsContainer/get" title="navigator.credentials.get()"><code>navigator.credentials.get()</code></a> with an <code>identity</code> option to make a request for users to sign in to the RP with the IdP, using the available IdP config and endpoints (as described above). A typical request might look like this:</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">signIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> identityCredential <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>credentials<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">identity</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token string">"signup"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">providers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">configURL</span><span class="token operator">:</span> <span class="token string">"https://accounts.idp.example/config.json"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">clientId</span><span class="token operator">:</span> <span class="token string">"********"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token string">"******"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">loginHint</span><span class="token operator">:</span> <span class="token string">"user1@example.com"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The <code>identity.providers</code> property takes an array of objects containing the path to an IdP config file and the RP's client identifier issued by the IdP; the example above also includes a couple of optional features:</p>
<ul>
  <li><code>identity.context</code> specifies the context in which the user is authenticating with FedCM. For example, is it a first-time signup for this account, or a sign-in with an existing account?. The browser uses this information to vary the text in its FedCM UI to better suit the context.</li>
  <li><code>identity.providers.nonce</code> provides a random nonce value that ensures the response is issued for this specific request, preventing <a href="/en-US/docs/Glossary/Replay_attack">replay attacks</a>.</li>
  <li><code>identity.providers.loginHint</code> provides a hint about the account option(s) the browser should present for user sign-in. This hint is matched against the <code>login_hints</code> values that the IdP provides from the <a href="#the_accounts_list_endpoint">accounts list endpoint</a>.</li>
</ul>
<p>The browser requests the IdP config file and carries out the sign-in flow detailed below. For more information on the kind of interaction a user might expect from the browser-supplied UI, see <a href="https://developer.chrome.com/docs/privacy-sandbox/fedcm/#sign-into-rp" class="external" target="_blank">Sign in to the relying party with the identity provider</a>.</p></div></section><section aria-labelledby="fedcm_sign-in_flow"><h3 id="fedcm_sign-in_flow"><a href="#fedcm_sign-in_flow">FedCM sign-in flow</a></h3><div class="section-content"><ol>
  <li>The RP invokes <a href="/en-US/docs/Web/API/CredentialsContainer/get" title="navigator.credentials.get()"><code>navigator.credentials.get()</code></a> to start off the sign-in flow.</li>
  <li>
    From the <code>configURL</code> provided in the <code>get()</code> call, the browser requests two files:
    <ol>
      <li>The well-known file (<code>/.well-known/web-identity</code>), available from <code>/.well-known/web-identity</code> at the <a href="https://web.dev/articles/same-site-same-origin#site" class="external" target="_blank">eTLD+1</a> of the <code>configURL</code>.</li>
      <li>The config file (<code>/config.json</code>), available at the <code>configURL</code>.</li>
    </ol>These are both a <a href="/en-US/docs/Web/HTTP/Methods/GET"><code>GET</code></a> requests, which don't have cookies and don't follow redirects. This effectively prevents the IdP from learning who made the request and which RP is attempting to connect.
    For example, the config file request would look like so:
    <div class="code-example"><p class="example-header"><span class="language-name">http</span></p><pre class="brush: http notranslate"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url"><span class="token path"><span class="token path-separator">/</span>config.json</span></span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">accounts.idp.example</span></span>
<span class="token header"><span class="token header-name keyword">Accept</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Dest</span><span class="token punctuation">:</span> <span class="token header-value">webidentity</span></span>
</code></pre></div>
    <div class="notecard note" id="sect3">
      <p><strong>Note:</strong> All requests sent from the browser via FedCM include a <code>Sec-Fetch-Dest: webidentity</code> header to prevent <a href="/en-US/docs/Glossary/CSRF">CSRF</a> attacks. All IdP endpoints must confirm this header is included.</p>
    </div>
  </li>
  <li>The IdP responds with the requested files. The config file URL is validated against the list of valid config URLs inside the well-known file.</li>
  <li>
    The browser makes a request to the <code>accounts_endpoint</code> inside the config file for the list of accounts that the user is currently signed in to on the IdP. This is a <code>GET</code> request with cookies, but without a <code>client_id</code> parameter or the <a href="/en-US/docs/Web/HTTP/Headers/Origin"><code>Origin</code></a> header. This effectively prevents the IdP from learning which RP the user is trying to sign in to.
    For example:
    <div class="code-example"><p class="example-header"><span class="language-name">http</span></p><pre class="brush: http notranslate"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url"><span class="token path"><span class="token path-separator">/</span>accounts.php</span></span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">accounts.idp.example</span></span>
<span class="token header"><span class="token header-name keyword">Accept</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
<span class="token header"><span class="token header-name keyword">Cookie</span><span class="token punctuation">:</span> <span class="token header-value">0x23223</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Dest</span><span class="token punctuation">:</span> <span class="token header-value">webidentity</span></span>
</code></pre></div>
  </li>
  <li>The IdP responds with the account information.</li>
  <li>
    <span class="badge inline optional">Optional</span> If included in the config file, the browser makes a request to the <code>client_metadata_endpoint</code> for the location of the RP's terms of service and privacy policy pages. This is a <code>GET</code> request sent with the <code>clientId</code> passed into the <code>get()</code> call as a parameter, without cookies.
    For example:
    <div class="code-example"><p class="example-header"><span class="language-name">http</span></p><pre class="brush: http notranslate"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url"><span class="token path"><span class="token path-separator">/</span>client_metadata.php</span><span class="token query"><span class="token query-delimiter">?</span><span class="token pair"><span class="token key">client_id</span>=<span class="token value">1234</span></span></span></span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">accounts.idp.example</span></span>
<span class="token header"><span class="token header-name keyword">Origin</span><span class="token punctuation">:</span> <span class="token header-value">https://rp.example/</span></span>
<span class="token header"><span class="token header-name keyword">Accept</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Dest</span><span class="token punctuation">:</span> <span class="token header-value">webidentity</span></span>
</code></pre></div>
  </li>
  <li><span class="badge inline optional">Optional</span> The IdP responds with the requested URLs.</li>
  <li>The browser uses the information obtained by the previous two requests to create the UI asking the user for permission to sign in to the RP using their federated IdP account.</li>
  <li>
    If the user grants permission to do so, the browser sends some credentials to the <code>id_assertion_endpoint</code> and requests a validation token from the IdP.
    The credentials are sent in an HTTP <a href="/en-US/docs/Web/HTTP/Methods/POST"><code>POST</code></a> request with cookies and a content type of <code>application/x-www-form-urlencoded</code>. It should look something like this:
    <div class="code-example"><p class="example-header"><span class="language-name">http</span></p><pre class="brush: http notranslate"><code><span class="token request-line"><span class="token method property">POST</span> <span class="token request-target url"><span class="token path"><span class="token path-separator">/</span>assertion.php</span></span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">accounts.idp.example</span></span>
<span class="token header"><span class="token header-name keyword">Origin</span><span class="token punctuation">:</span> <span class="token header-value">https://rp.example/</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/x-www-form-urlencoded</span></span>
<span class="token header"><span class="token header-name keyword">Cookie</span><span class="token punctuation">:</span> <span class="token header-value">0x23223</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Dest</span><span class="token punctuation">:</span> <span class="token header-value">webidentity</span></span>
account_id=123&amp;client_id=client1234&amp;nonce=Ct60bD&amp;disclosure_text_shown=true
</code></pre></div>The payload should contain the following:
    <dl>
      <dt id="client_id"><a href="#client_id"><code>client_id</code></a></dt>
      <dd>
        <p>The RP's client identifier.</p>
      </dd>
      <dt id="account_id"><a href="#account_id"><code>account_id</code></a></dt>
      <dd>
        <p>The unique ID of the user account to be signed in.</p>
      </dd>
      <dt id="nonce"><a href="#nonce"><code>nonce</code></a> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>The request nonce, provided by the RP.</p>
      </dd>
      <dt id="disclosure_text_shown"><a href="#disclosure_text_shown"><code>disclosure_text_shown</code></a></dt>
      <dd>
        <p>A string of <code>"true"</code> or <code>"false"</code> indicating whether the disclosure text was shown or not. The disclosure text is the information shown to the user (which can include the terms of service and privacy policy links, if provided) if the user is signed in to the IdP but doesn't have an account specifically on the current RP (in which case they'd need to choose to "Continue as..." their IdP identity and then create a corresponding account on the RP).</p>
      </dd>
    </dl>
  </li>
  <li>The IdP checks that the account ID sent by the RP matches the ID for the account that is already signed in, and that the <code>Origin</code> matches the origin of the RP, which will have been registered in advance with the IdP. If everything looks good, it responds with the validation token.</li>
</ol>
<div class="notecard note" id="sect4">
  <p><strong>Note:</strong> The origin of the RP will be registered with the IdP in a completely separate process when the RP first integrates with the IdP. This process will be specific to each IdP.</p>
</div>
<p>When the flow is complete, the RP validates the validation token. If validation is successful, the <code>get()</code> promise resolves with an <a href="/en-US/docs/Web/API/IdentityCredential"><code>IdentityCredential</code></a> object, which provides further RP functionality. Additionally, at this point the RP may register the user or let them sign in and start a new session.</p></div></section><section aria-labelledby="features_available_via_identitycredential"><h3 id="features_available_via_identitycredential"><a href="#features_available_via_identitycredential">Features available via IdentityCredential</a></h3><div class="section-content"><p>The <a href="/en-US/docs/Web/API/IdentityCredential"><code>IdentityCredential</code></a> object obtained from a successful FedCM sign-in provides access to the token used to validate the sign-in (see <a href="/en-US/docs/Web/API/IdentityCredential/token"><code>IdentityCredential.token</code></a>).</p></div></section><section aria-labelledby="permissions_policy_integration_and_iframe_support"><h2 id="permissions_policy_integration_and_iframe_support"><a href="#permissions_policy_integration_and_iframe_support">Permissions Policy integration and IFrame support</a></h2><div class="section-content"><p>The <a href="/en-US/docs/Web/HTTP/Headers/Permissions-Policy/identity-credentials-get"><code>identity-credentials-get</code></a> <a href="/en-US/docs/Web/HTTP/Permissions_Policy">Permissions-Policy</a> can be used to control permission to use FedCM, more specifically usage of the <a href="/en-US/docs/Web/API/CredentialsContainer/get" title="navigator.credentials.get()"><code>navigator.credentials.get()</code></a> method.</p>
<p>Developers can explicitly grant permission for an <a href="/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a> to use FedCM via the <code>allow</code> attribute:</p>
<div class="code-example"><p class="example-header"><span class="language-name">html</span></p><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3rd-party.example<span class="token punctuation">"</span></span> <span class="token attr-name">allow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>identity-credentials-get<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>The availability of FedCM within <code>&lt;iframe&gt;</code>s enables a couple of use cases:</p>
<ul>
  <li>Larger sites won't want a third-party sign-in script to gain control over the top-level frame; instead they will want to add that script and invoke FedCM from within an <a href="/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>.</li>
  <li>Some <code>&lt;iframes&gt;</code> may themselves require federated authentication.</li>
</ul></div></section><section aria-labelledby="interfaces"><h2 id="interfaces"><a href="#interfaces">Interfaces</a></h2><div class="section-content"><dl>
  <dt id="identitycredential"><a href="/en-US/docs/Web/API/IdentityCredential"><code>IdentityCredential</code></a></dt>
  <dd>
    <p>Represents a user identity credential arising from successful federated authentication. A successful <a href="/en-US/docs/Web/API/CredentialsContainer/get" title="navigator.credentials.get()"><code>navigator.credentials.get()</code></a> call that includes an <code>identity</code> option fulfills with an <a href="/en-US/docs/Web/API/IdentityCredential"><code>IdentityCredential</code></a> instance.</p>
  </dd>
  <dt id="identityprovider"><a href="/en-US/docs/Web/API/IdentityProvider"><code>IdentityProvider</code></a></dt>
  <dd>
    <p>Represents an IdP and provides access to related information. The static <a href="/en-US/docs/Web/API/IdentityProvider/getUserInfo_static" title="IdentityProvider.getUserInfo()"><code>IdentityProvider.getUserInfo()</code></a> method returns information about a user who was previously signed in, when they return to an IdP. This information can be used to display a personalized welcome message and sign-in button.</p>
  </dd>
</dl></div></section><section aria-labelledby="extensions_to_other_interfaces"><h2 id="extensions_to_other_interfaces"><a href="#extensions_to_other_interfaces">Extensions to other interfaces</a></h2><div class="section-content"><dl>
  <dt id="credentialscontainer.get"><a href="/en-US/docs/Web/API/CredentialsContainer/get"><code>CredentialsContainer.get()</code></a>, the <code>identity</code> option.</dt>
  <dd>
    <p><code>identity</code> is an object containing details of federated IdPs that a relying party (RP) website can use to sign users in. It causes a <code>get()</code> call to initiate a request for a user to sign in to an RP with an IdP.</p>
  </dd>
</dl></div></section><section aria-labelledby="examples"><h2 id="examples"><a href="#examples">Examples</a></h2><div class="section-content"><ul>
  <li><a href="https://fedcm-rp-demo.glitch.me/" class="external" target="_blank">FedCM sign-in example</a>
    <ul>
      <li><a href="https://glitch.com/edit/#!/fedcm-rp-demo?path=server.js%3A1%3A0" class="external" target="_blank">RP source code</a></li>
      <li><a href="https://glitch.com/edit/#!/fedcm-idp-demo?path=server.js%3A1%3A0" class="external" target="_blank">IdP source code</a></li>
    </ul>
  </li>
  <li><a href="https://fedcm-main-frame.glitch.me/" class="external" target="_blank">FedCM <code>&lt;iframe&gt;</code> sign-in</a>
    <ul>
      <li><a href="https://glitch.com/edit/#!/fedcm-main-frame?path=index.html%3A1%3A0" class="external" target="_blank">RP <code>&lt;iframe&gt;</code> page source code</a></li>
      <li><a href="https://glitch.com/edit/#!/webid-fcm-idp-single?path=server.js%3A1%3A0" class="external" target="_blank">IdP source code</a></li>
    </ul>
  </li>
</ul></div></section><h2 id="specifications"><a href="#specifications">Specifications</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://fedidcg.github.io/FedCM/#browser-api-identity-credential-interface">Federated Credential Management API<!-- --> <br/><small># <!-- -->browser-api-identity-credential-interface</small></a></td></tr></tbody></table><h2 id="browser_compatibility"><a href="#browser_compatibility">Browser compatibility</a></h2><p>BCD tables only load in the browser<noscript> <!-- -->with JavaScript enabled. Enable JavaScript to view data.</noscript></p><section aria-labelledby="see_also"><h2 id="see_also"><a href="#see_also">See also</a></h2><div class="section-content"><ul>
  <li><a href="https://developer.chrome.com/docs/privacy-sandbox/fedcm/" class="external" target="_blank">Federated Credential Management API</a></li>
</ul></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/fedcm_api/index.md" title="This will take you to GitHub, where you&#x27;ll need to sign in first." target="_blank" rel="noopener noreferrer">Edit the page on GitHub</a>.</li><li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FFedCM_API&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Ffedcm_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FFedCM_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Ffedcm_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F835d6632d59993861a0458510402787f8a2c3cb3%0A*+Document+last+modified%3A+2023-10-25T17%3A27%3A32.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">Report the content issue</a>.</li><li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/fedcm_api/index.md?plain=1" title="Folder: en-us/web/api/fedcm_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">View the source on GitHub</a>.</li></ul>Want to get more involved?<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">Learn how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time dateTime="2023-10-25T17:27:32.000Z">Oct 26, 2023</time> by<!-- --> <a href="/en-US/docs/Web/API/FedCM_API/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div></div><footer id="nav-footer" class="page-footer"><div class="page-footer-grid"><div class="page-footer-logo-col"><a href="/" class="mdn-footer-logo" aria-label="MDN homepage"><svg width="48" height="17" viewBox="0 0 48 17" fill="none" xmlns="http://www.w3.org/2000/svg"><title id="mdn-footer-logo-svg">MDN logo</title><path d="M20.04 16.512H15.504V10.416C15.504 9.488 15.344 8.824 15.024 8.424C14.72 8.024 14.264 7.824 13.656 7.824C12.92 7.824 12.384 8.064 12.048 8.544C11.728 9.024 11.568 9.64 11.568 10.392V14.184H13.008V16.512H8.472V10.416C8.472 9.488 8.312 8.824 7.992 8.424C7.688 8.024 7.232 7.824 6.624 7.824C5.872 7.824 5.336 8.064 5.016 8.544C4.696 9.024 4.536 9.64 4.536 10.392V14.184H6.6V16.512H0V14.184H1.44V8.04H0.024V5.688H4.536V7.32C5.224 6.088 6.32 5.472 7.824 5.472C8.608 5.472 9.328 5.664 9.984 6.048C10.64 6.432 11.096 7.016 11.352 7.8C11.992 6.248 13.168 5.472 14.88 5.472C15.856 5.472 16.72 5.776 17.472 6.384C18.224 6.992 18.6 7.936 18.6 9.216V14.184H20.04V16.512Z" fill="currentColor"></path><path d="M33.6714 16.512H29.1354V14.496C28.8314 15.12 28.3834 15.656 27.7914 16.104C27.1994 16.536 26.4154 16.752 25.4394 16.752C24.0154 16.752 22.8954 16.264 22.0794 15.288C21.2634 14.312 20.8554 12.984 20.8554 11.304C20.8554 9.688 21.2554 8.312 22.0554 7.176C22.8554 6.04 24.0634 5.472 25.6794 5.472C26.5594 5.472 27.2794 5.648 27.8394 6C28.3994 6.352 28.8314 6.8 29.1354 7.344V2.352H26.9754V0H32.2314V14.184H33.6714V16.512ZM29.1354 11.04V10.776C29.1354 9.88 28.8954 9.184 28.4154 8.688C27.9514 8.176 27.3674 7.92 26.6634 7.92C25.9754 7.92 25.3674 8.176 24.8394 8.688C24.3274 9.2 24.0714 10.008 24.0714 11.112C24.0714 12.152 24.3114 12.944 24.7914 13.488C25.2714 14.032 25.8394 14.304 26.4954 14.304C27.3114 14.304 27.9514 13.96 28.4154 13.272C28.8954 12.584 29.1354 11.84 29.1354 11.04Z" fill="currentColor"></path><path d="M47.9589 16.512H41.9829V14.184H43.4229V10.416C43.4229 9.488 43.2629 8.824 42.9429 8.424C42.6389 8.024 42.1829 7.824 41.5749 7.824C40.8389 7.824 40.2709 8.056 39.8709 8.52C39.4709 8.968 39.2629 9.56 39.2469 10.296V14.184H40.6869V16.512H34.7109V14.184H36.1509V8.04H34.5909V5.688H39.2469V7.344C39.9669 6.096 41.1269 5.472 42.7269 5.472C43.7509 5.472 44.6389 5.776 45.3909 6.384C46.1429 6.992 46.5189 7.936 46.5189 9.216V14.184H47.9589V16.512Z" fill="currentColor"></path></svg></a><p>Your blueprint for a better internet.</p><ul class="social-icons"><li><a class="icon icon-mastodon" href="https://mozilla.social/@mdn" target="_blank" rel="me noopener noreferrer"><span class="visually-hidden">MDN on Mastodon</span></a></li><li><a class="icon icon-twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="icon icon-github-mark-small" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on GitHub</span></a></li><li><a class="icon icon-feed" href="/en-US/blog/rss.xml" target="_blank"><span class="visually-hidden">MDN Blog RSS Feed</span></a></li></ul></div><div class="page-footer-nav-col-1"><h2 class="footer-nav-heading">MDN</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a href="/en-US/about">About</a></li><li class="footer-nav-item"><a href="/en-US/blog/">Blog</a></li><li class="footer-nav-item"><a href="https://www.mozilla.org/en-US/careers/listings/?team=ProdOps" target="_blank" rel="noopener noreferrer">Careers</a></li><li class="footer-nav-item"><a href="/en-US/advertising">Advertise with us</a></li></ul></div><div class="page-footer-nav-col-2"><h2 class="footer-nav-heading">Support</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/MDN/Community/Issues">Report an issue</a></li></ul></div><div class="page-footer-nav-col-3"><h2 class="footer-nav-heading">Our communities</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/community">MDN Community</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="https://discourse.mozilla.org/c/mdn/236" target="_blank" rel="noopener noreferrer">MDN Forum</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="/discord" target="_blank" rel="noopener noreferrer">MDN Chat</a></li></ul></div><div class="page-footer-nav-col-4"><h2 class="footer-nav-heading">Developers</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/Web">Web Technologies</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/Learn">Learn Web Development</a></li><li class="footer-nav-item"><a href="https://hacks.mozilla.org/" target="_blank" rel="noopener noreferrer">Hacks Blog</a></li></ul></div><div class="page-footer-moz"><a href="https://www.mozilla.org/" class="footer-moz-logo-link" target="_blank" rel="noopener noreferrer"><svg width="112" height="32" fill="none" xmlns="http://www.w3.org/2000/svg"><title id="mozilla-footer-logo-svg">Mozilla logo</title><path d="M41.753 14.218c-2.048 0-3.324 1.522-3.324 4.157 0 2.423 1.119 4.286 3.29 4.286 2.082 0 3.447-1.678 3.447-4.347 0-2.826-1.522-4.096-3.413-4.096Zm54.89 7.044c0 .901.437 1.618 1.645 1.618 1.427 0 2.949-1.024 3.044-3.352-.649-.095-1.365-.185-2.02-.185-1.426-.005-2.668.397-2.668 1.92Z" fill="currentColor"></path><path d="M0 0v32h111.908V0H0Zm32.56 25.426h-5.87v-7.884c0-2.423-.806-3.352-2.39-3.352-1.924 0-2.702 1.365-2.702 3.324v4.868h1.864v3.044h-5.864v-7.884c0-2.423-.806-3.352-2.39-3.352-1.924 0-2.702 1.365-2.702 3.324v4.868h2.669v3.044H6.642v-3.044h1.863v-7.918H6.642V11.42h5.864v2.11c.839-1.489 2.3-2.39 4.252-2.39 2.02 0 3.878.963 4.566 3.01.778-1.862 2.361-3.01 4.566-3.01 2.512 0 4.812 1.522 4.812 4.84v6.402h1.863v3.044h-.005Zm9.036.307c-4.314 0-7.296-2.635-7.296-7.106 0-4.096 2.484-7.481 7.514-7.481s7.481 3.38 7.481 7.29c0 4.472-3.228 7.297-7.699 7.297Zm22.578-.307H51.942l-.403-2.11 7.7-8.846h-4.376l-.621 2.17-2.888-.313.498-4.907h12.294l.313 2.11-7.767 8.852h4.533l.654-2.172 3.167.308-.872 4.908Zm7.99 0h-4.191v-5.03h4.19v5.03Zm0-8.976h-4.191v-5.03h4.19v5.03Zm2.618 8.976 6.054-21.358h3.945l-6.054 21.358h-3.945Zm8.136 0 6.048-21.358h3.945l-6.054 21.358h-3.939Zm21.486.307c-1.863 0-2.887-1.085-3.072-2.792-.805 1.427-2.232 2.792-4.498 2.792-2.02 0-4.314-1.085-4.314-4.006 0-3.447 3.323-4.253 6.518-4.253.778 0 1.584.034 2.3.124v-.465c0-1.427-.034-3.133-2.3-3.133-.84 0-1.488.061-2.143.402l-.453 1.578-3.195-.34.549-3.224c2.45-.996 3.692-1.27 5.992-1.27 3.01 0 5.556 1.55 5.556 4.75v6.083c0 .805.314 1.085.963 1.085.184 0 .375-.034.587-.095l.034 2.11a5.432 5.432 0 0 1-2.524.654Z" fill="currentColor"></path></svg></a><ul class="footer-moz-list"><li class="footer-moz-item"><a href="https://www.mozilla.org/privacy/websites/" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Website Privacy Notice</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/privacy/websites/#cookies" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Cookies</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/about/legal/terms/mozilla" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Legal</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/about/governance/policies/participation/" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Community Participation Guidelines</a></li></ul></div><div class="page-footer-legal"><p id="license" class="page-footer-legal-text">Visit<!-- --> <a href="https://www.mozilla.org" target="_blank" rel="noopener noreferrer">Mozilla Corporation’s</a> <!-- -->not-for-profit parent, the<!-- --> <a target="_blank" rel="noopener noreferrer" href="https://foundation.mozilla.org/">Mozilla Foundation</a>.<br/>Portions of this content are ©1998–<!-- -->2023<!-- --> by individual mozilla.org contributors. Content available under<!-- --> <a href="/en-US/docs/MDN/Writing_guidelines/Attrib_copyright_license">a Creative Commons license</a>.</p></div></div></footer></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Federated Credential Management (FedCM) API","mdn_url":"/en-US/docs/Web/API/FedCM_API","locale":"en-US","native":"English (US)","browserCompat":["api.IdentityCredential"],"sidebarHTML":"<ol><li><strong><em><a href=\"/en-US/docs/Web/API/FedCM_API\" aria-current=\"page\">FedCM API</a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/IdentityCredential\"><code>IdentityCredential</code></a></li><li><a href=\"/en-US/docs/Web/API/IdentityProvider\"><code>IdentityProvider</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/CredentialsContainer/get\"><code>CredentialsContainer.get()</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>The <strong>Federated Credential Management API</strong> (or <em>FedCM API</em>) provides a standard mechanism for identity providers (IdPs) to make identity federation services available on the web in a privacy-preserving way, without the need for third-party cookies and redirects. This includes a JavaScript API that enables the use of federated authentication for activities such as signing in or signing up on a website.</p>"}},{"type":"prose","value":{"id":"fedcm_concepts","title":"FedCM concepts","isH3":false,"content":"<p>Identity federation is the delegation of user authentication from a website requiring user sign-up or sign-in, such as an e-commerce or social networking site (also known as a relying party or RP), to a trusted third-party IdP. Users register an account with the IdP, which can then be used for signing in on multiple RPs. Identity federation via a small set of dedicated IdPs has improved web authentication in terms of security, consumer confidence, and user experience, as compared to each site managing its own sign-in needs with separate usernames and passwords.</p>\n<p>The problem is that traditional identity federation relies on <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a>s, redirects, and third-party cookies, which are also used for third-party tracking. Browsers are limiting the usage of these features in an effort to preserve user privacy, but a side effect is that this makes valid, non-tracking uses more difficult to implement, and this includes identity federation.</p>\n<p>Affected identity federation use cases that rely on third-party cookies:</p>\n<ul>\n  <li><a href=\"https://openid.net/specs/openid-connect-frontchannel-1_0.html\" class=\"external\" target=\"_blank\">OIDC front-channel logout</a>: This flow requires the IDP to embed several RP <code>&lt;iframe&gt;</code>s, which rely on RP cookies.</li>\n  <li>Social Widgets: In order to provide social widgets, the IdP third-party cookie must be provided from the RP top-level origin.</li>\n  <li>Personalized buttons: The display of personalized sign in information on a <a href=\"/en-US/docs/Web/HTML/Element/button\"><code>&lt;button&gt;</code></a> in the RP origin is implemented as an IdP <code>&lt;iframe&gt;</code> that requires third party cookies.</li>\n  <li>Session Refresh without top-level navigation or popups.</li>\n</ul>\n<p>FedCM aims to work around this problem, providing a dedicated mechanism for federated identity flows on the web, and enabling supporting browsers to provide special UI elements on RPs, allowing users to choose an IdP account to use for sign-in.</p>\n<p>There are two parts to using the FedCM API: IdP integration with FedCM and RP sign-in using the JavaScript API.</p>"}},{"type":"prose","value":{"id":"idp_integration_with_fedcm","title":"IdP integration with FedCM","isH3":false,"content":"<p>To integrate with FedCM, an IdP needs to do the following:</p>\n<ol>\n  <li>Provide a well-known file to identify the IdP.</li>\n  <li>Provide a config file and endpoints for accounts list and assertion issuance (and optionally, client metadata).</li>\n</ol>"}},{"type":"prose","value":{"id":"provide_a_well-known_file","title":"Provide a well-known file","isH3":true,"content":"<p>There is a potential privacy issue whereby an <a href=\"https://github.com/fedidcg/FedCM/issues/230\" class=\"external\" target=\"_blank\">IdP is able to discern whether a user visited an RP without explicit consent</a>. This has tracking implications, so an IdP is required to provide a well-known file to verify its identity and mitigate this issue.</p>\n<p>The well-known file must be served from the <a href=\"https://web.dev/articles/same-site-same-origin#site\" class=\"external\" target=\"_blank\">eTLD+1</a> of the IdP at <code>/.well-known/web-identity</code>.</p>\n<p>For example, if the IdP endpoints are served under <code>https://accounts.idp.example/</code>, they must serve a well-known file at <code>https://idp.example/.well-known/web-identity</code>. The well-known file's content should have the following JSON structure:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">json</span></p><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"provider_urls\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"https://accounts.idp.example/config.json\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The <code>provider_urls</code> member should contain an array of URLs pointing to valid IdP config files that can be used by RPs to interact with the IdP. The array length is currently limited to one.</p>"}},{"type":"prose","value":{"id":"provide_a_config_file","title":"Provide a config file","isH3":true,"content":"<p>The IdP config file provides a list of the endpoints the browser needs to process the identity federation flow and manage the sign-ins. IdPs will host both this config file and the required endpoints.</p>\n<p>The config file (hosted at <code>https://accounts.idp.example/config.json</code> in our example) should have the following JSON structure:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">json</span></p><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"accounts_endpoint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/accounts.php\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"client_metadata_endpoint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/client_metadata.php\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"id_assertion_endpoint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/assertion.php\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"branding\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"background_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0xFFEEAA\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://idp.example/icon.ico\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"size\"</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The properties are as follows:</p>\n<dl>\n  <dt id=\"accounts_endpoint\"><a href=\"#accounts_endpoint\"><code>accounts_endpoint</code></a></dt>\n  <dd>\n    <p>The URL for the accounts list endpoint, which returns a list of accounts that the user is currently signed in to on the IdP. The browser uses these to create a list of sign-in choices to show to the user in the browser-provided FedCM UI.</p>\n  </dd>\n  <dt id=\"client_metadata_endpoint\"><a href=\"#client_metadata_endpoint\"><code>client_metadata_endpoint</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>The URL for the client metadata endpoint, which provides URLs pointing to the RP's metadata and terms of service pages, to be used in the FedCM UI.</p>\n  </dd>\n  <dt id=\"id_assertion_endpoint\"><a href=\"#id_assertion_endpoint\"><code>id_assertion_endpoint</code></a></dt>\n  <dd>\n    <p>The URL for the ID assertion endpoint, which when sent valid user credentials should respond with a validation token that the RP can use to validate the authentication.</p>\n  </dd>\n  <dt id=\"branding\"><a href=\"#branding\"><code>branding</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>Contains branding information that will be used in the browser-supplied FedCM UI to customize its appearance as desired by the IdP.</p>\n  </dd>\n</dl>\n<h4 id=\"the_accounts_list_endpoint\">The accounts list endpoint</h4>\n<p>This endpoint returns a list of all the IdP accounts that the user is currently signed in with, with a JSON structure that matches the following:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">json</span></p><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"accounts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"john_doe\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"given_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John Doe\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"john_doe@idp.example\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"picture\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://idp.example/profile/123\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"approved_clients\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"123\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"456\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"789\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"login_hints\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"john_doe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"john_doe@idp.example\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"johnny\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"given_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Johnny\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Johnny\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"johnny@idp.example\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"picture\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://idp.example/profile/456\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"approved_clients\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"def\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ghi\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"login_hints\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"johnny\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"johnny@idp.example\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This includes the following information:</p>\n<dl>\n  <dt id=\"id\"><a href=\"#id\"><code>id</code></a></dt>\n  <dd>\n    <p>The unique ID of the user.</p>\n  </dd>\n  <dt id=\"name\"><a href=\"#name\"><code>name</code></a></dt>\n  <dd>\n    <p>The family name of the user.</p>\n  </dd>\n  <dt id=\"email\"><a href=\"#email\"><code>email</code></a></dt>\n  <dd>\n    <p>The email address of the user.</p>\n  </dd>\n  <dt id=\"given_name\"><a href=\"#given_name\"><code>given_name</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>The given name of the user.</p>\n  </dd>\n  <dt id=\"picture\"><a href=\"#picture\"><code>picture</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>The URL of the user's avatar image.</p>\n  </dd>\n  <dt id=\"approved_clients\"><a href=\"#approved_clients\"><code>approved_clients</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>An array of RP clients that the user has registered with.</p>\n  </dd>\n  <dt id=\"login_hints\"><a href=\"#login_hints\"><code>login_hints</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>An array of strings representing the account. These strings are used to filter the list of account options that the browser offers for the user to sign-in. This occurs when the <code>loginHint</code> property is provided within <a href=\"/en-US/docs/Web/API/CredentialsContainer/get#identity_object_structure\"><code>identity.providers</code></a> in a related <code>get()</code> call. Any account with a string in its <code>login_hints</code> array that matches the provided <code>loginHint</code> is included.</p>\n  </dd>\n</dl>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong>: If the user is not signed in to any IdP accounts, the endpoint should respond with <a href=\"/en-US/docs/Web/HTTP/Status/401\">HTTP 401 (Unauthorized)</a>.</p>\n</div>\n<h4 id=\"the_client_metadata_endpoint\">The client metadata endpoint</h4>\n<p>Provides URLs pointing to the RP's metadata and terms of service pages, to be used in the browser-supplied FedCM UI. This should follow the JSON structure seen below:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">json</span></p><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"privacy_policy_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://rp.example/privacy_policy.html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"terms_of_service_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://rp.example/terms_of_service.html\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"the_id_assertion_endpoint\">The ID assertion endpoint</h4>\n<p>When sent valid user credentials, this endpoint should respond with a validation token that the RP can use to validate the authentication:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">json</span></p><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"***********\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"rp_sign-in_using_the_javascript_api","title":"RP sign-in using the JavaScript API","isH3":false,"content":"<p>RPs can call <a href=\"/en-US/docs/Web/API/CredentialsContainer/get\" title=\"navigator.credentials.get()\"><code>navigator.credentials.get()</code></a> with an <code>identity</code> option to make a request for users to sign in to the RP with the IdP, using the available IdP config and endpoints (as described above). A typical request might look like this:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> identityCredential <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>credentials<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">identity</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token string\">\"signup\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">providers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">configURL</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://accounts.idp.example/config.json\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">clientId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"********\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">nonce</span><span class=\"token operator\">:</span> <span class=\"token string\">\"******\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">loginHint</span><span class=\"token operator\">:</span> <span class=\"token string\">\"user1@example.com\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The <code>identity.providers</code> property takes an array of objects containing the path to an IdP config file and the RP's client identifier issued by the IdP; the example above also includes a couple of optional features:</p>\n<ul>\n  <li><code>identity.context</code> specifies the context in which the user is authenticating with FedCM. For example, is it a first-time signup for this account, or a sign-in with an existing account?. The browser uses this information to vary the text in its FedCM UI to better suit the context.</li>\n  <li><code>identity.providers.nonce</code> provides a random nonce value that ensures the response is issued for this specific request, preventing <a href=\"/en-US/docs/Glossary/Replay_attack\">replay attacks</a>.</li>\n  <li><code>identity.providers.loginHint</code> provides a hint about the account option(s) the browser should present for user sign-in. This hint is matched against the <code>login_hints</code> values that the IdP provides from the <a href=\"#the_accounts_list_endpoint\">accounts list endpoint</a>.</li>\n</ul>\n<p>The browser requests the IdP config file and carries out the sign-in flow detailed below. For more information on the kind of interaction a user might expect from the browser-supplied UI, see <a href=\"https://developer.chrome.com/docs/privacy-sandbox/fedcm/#sign-into-rp\" class=\"external\" target=\"_blank\">Sign in to the relying party with the identity provider</a>.</p>"}},{"type":"prose","value":{"id":"fedcm_sign-in_flow","title":"FedCM sign-in flow","isH3":true,"content":"<ol>\n  <li>The RP invokes <a href=\"/en-US/docs/Web/API/CredentialsContainer/get\" title=\"navigator.credentials.get()\"><code>navigator.credentials.get()</code></a> to start off the sign-in flow.</li>\n  <li>\n    From the <code>configURL</code> provided in the <code>get()</code> call, the browser requests two files:\n    <ol>\n      <li>The well-known file (<code>/.well-known/web-identity</code>), available from <code>/.well-known/web-identity</code> at the <a href=\"https://web.dev/articles/same-site-same-origin#site\" class=\"external\" target=\"_blank\">eTLD+1</a> of the <code>configURL</code>.</li>\n      <li>The config file (<code>/config.json</code>), available at the <code>configURL</code>.</li>\n    </ol>These are both a <a href=\"/en-US/docs/Web/HTTP/Methods/GET\"><code>GET</code></a> requests, which don't have cookies and don't follow redirects. This effectively prevents the IdP from learning who made the request and which RP is attempting to connect.\n    For example, the config file request would look like so:\n    <div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">http</span></p><pre class=\"brush: http notranslate\"><code><span class=\"token request-line\"><span class=\"token method property\">GET</span> <span class=\"token request-target url\"><span class=\"token path\"><span class=\"token path-separator\">/</span>config.json</span></span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">accounts.idp.example</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Dest</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">webidentity</span></span>\n</code></pre></div>\n    <div class=\"notecard note\" id=\"sect3\">\n      <p><strong>Note:</strong> All requests sent from the browser via FedCM include a <code>Sec-Fetch-Dest: webidentity</code> header to prevent <a href=\"/en-US/docs/Glossary/CSRF\">CSRF</a> attacks. All IdP endpoints must confirm this header is included.</p>\n    </div>\n  </li>\n  <li>The IdP responds with the requested files. The config file URL is validated against the list of valid config URLs inside the well-known file.</li>\n  <li>\n    The browser makes a request to the <code>accounts_endpoint</code> inside the config file for the list of accounts that the user is currently signed in to on the IdP. This is a <code>GET</code> request with cookies, but without a <code>client_id</code> parameter or the <a href=\"/en-US/docs/Web/HTTP/Headers/Origin\"><code>Origin</code></a> header. This effectively prevents the IdP from learning which RP the user is trying to sign in to.\n    For example:\n    <div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">http</span></p><pre class=\"brush: http notranslate\"><code><span class=\"token request-line\"><span class=\"token method property\">GET</span> <span class=\"token request-target url\"><span class=\"token path\"><span class=\"token path-separator\">/</span>accounts.php</span></span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">accounts.idp.example</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Cookie</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">0x23223</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Dest</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">webidentity</span></span>\n</code></pre></div>\n  </li>\n  <li>The IdP responds with the account information.</li>\n  <li>\n    <span class=\"badge inline optional\">Optional</span> If included in the config file, the browser makes a request to the <code>client_metadata_endpoint</code> for the location of the RP's terms of service and privacy policy pages. This is a <code>GET</code> request sent with the <code>clientId</code> passed into the <code>get()</code> call as a parameter, without cookies.\n    For example:\n    <div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">http</span></p><pre class=\"brush: http notranslate\"><code><span class=\"token request-line\"><span class=\"token method property\">GET</span> <span class=\"token request-target url\"><span class=\"token path\"><span class=\"token path-separator\">/</span>client_metadata.php</span><span class=\"token query\"><span class=\"token query-delimiter\">?</span><span class=\"token pair\"><span class=\"token key\">client_id</span>=<span class=\"token value\">1234</span></span></span></span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">accounts.idp.example</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://rp.example/</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Dest</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">webidentity</span></span>\n</code></pre></div>\n  </li>\n  <li><span class=\"badge inline optional\">Optional</span> The IdP responds with the requested URLs.</li>\n  <li>The browser uses the information obtained by the previous two requests to create the UI asking the user for permission to sign in to the RP using their federated IdP account.</li>\n  <li>\n    If the user grants permission to do so, the browser sends some credentials to the <code>id_assertion_endpoint</code> and requests a validation token from the IdP.\n    The credentials are sent in an HTTP <a href=\"/en-US/docs/Web/HTTP/Methods/POST\"><code>POST</code></a> request with cookies and a content type of <code>application/x-www-form-urlencoded</code>. It should look something like this:\n    <div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">http</span></p><pre class=\"brush: http notranslate\"><code><span class=\"token request-line\"><span class=\"token method property\">POST</span> <span class=\"token request-target url\"><span class=\"token path\"><span class=\"token path-separator\">/</span>assertion.php</span></span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">accounts.idp.example</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Origin</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">https://rp.example/</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/x-www-form-urlencoded</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Cookie</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">0x23223</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Sec-Fetch-Dest</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">webidentity</span></span>\naccount_id=123&amp;client_id=client1234&amp;nonce=Ct60bD&amp;disclosure_text_shown=true\n</code></pre></div>The payload should contain the following:\n    <dl>\n      <dt id=\"client_id\"><a href=\"#client_id\"><code>client_id</code></a></dt>\n      <dd>\n        <p>The RP's client identifier.</p>\n      </dd>\n      <dt id=\"account_id\"><a href=\"#account_id\"><code>account_id</code></a></dt>\n      <dd>\n        <p>The unique ID of the user account to be signed in.</p>\n      </dd>\n      <dt id=\"nonce\"><a href=\"#nonce\"><code>nonce</code></a> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>The request nonce, provided by the RP.</p>\n      </dd>\n      <dt id=\"disclosure_text_shown\"><a href=\"#disclosure_text_shown\"><code>disclosure_text_shown</code></a></dt>\n      <dd>\n        <p>A string of <code>\"true\"</code> or <code>\"false\"</code> indicating whether the disclosure text was shown or not. The disclosure text is the information shown to the user (which can include the terms of service and privacy policy links, if provided) if the user is signed in to the IdP but doesn't have an account specifically on the current RP (in which case they'd need to choose to \"Continue as...\" their IdP identity and then create a corresponding account on the RP).</p>\n      </dd>\n    </dl>\n  </li>\n  <li>The IdP checks that the account ID sent by the RP matches the ID for the account that is already signed in, and that the <code>Origin</code> matches the origin of the RP, which will have been registered in advance with the IdP. If everything looks good, it responds with the validation token.</li>\n</ol>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>Note:</strong> The origin of the RP will be registered with the IdP in a completely separate process when the RP first integrates with the IdP. This process will be specific to each IdP.</p>\n</div>\n<p>When the flow is complete, the RP validates the validation token. If validation is successful, the <code>get()</code> promise resolves with an <a href=\"/en-US/docs/Web/API/IdentityCredential\"><code>IdentityCredential</code></a> object, which provides further RP functionality. Additionally, at this point the RP may register the user or let them sign in and start a new session.</p>"}},{"type":"prose","value":{"id":"features_available_via_identitycredential","title":"Features available via IdentityCredential","isH3":true,"content":"<p>The <a href=\"/en-US/docs/Web/API/IdentityCredential\"><code>IdentityCredential</code></a> object obtained from a successful FedCM sign-in provides access to the token used to validate the sign-in (see <a href=\"/en-US/docs/Web/API/IdentityCredential/token\"><code>IdentityCredential.token</code></a>).</p>"}},{"type":"prose","value":{"id":"permissions_policy_integration_and_iframe_support","title":"Permissions Policy integration and IFrame support","isH3":false,"content":"<p>The <a href=\"/en-US/docs/Web/HTTP/Headers/Permissions-Policy/identity-credentials-get\"><code>identity-credentials-get</code></a> <a href=\"/en-US/docs/Web/HTTP/Permissions_Policy\">Permissions-Policy</a> can be used to control permission to use FedCM, more specifically usage of the <a href=\"/en-US/docs/Web/API/CredentialsContainer/get\" title=\"navigator.credentials.get()\"><code>navigator.credentials.get()</code></a> method.</p>\n<p>Developers can explicitly grant permission for an <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> to use FedCM via the <code>allow</code> attribute:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3rd-party.example<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">allow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>identity-credentials-get<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>The availability of FedCM within <code>&lt;iframe&gt;</code>s enables a couple of use cases:</p>\n<ul>\n  <li>Larger sites won't want a third-party sign-in script to gain control over the top-level frame; instead they will want to add that script and invoke FedCM from within an <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a>.</li>\n  <li>Some <code>&lt;iframes&gt;</code> may themselves require federated authentication.</li>\n</ul>"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"identitycredential\"><a href=\"/en-US/docs/Web/API/IdentityCredential\"><code>IdentityCredential</code></a></dt>\n  <dd>\n    <p>Represents a user identity credential arising from successful federated authentication. A successful <a href=\"/en-US/docs/Web/API/CredentialsContainer/get\" title=\"navigator.credentials.get()\"><code>navigator.credentials.get()</code></a> call that includes an <code>identity</code> option fulfills with an <a href=\"/en-US/docs/Web/API/IdentityCredential\"><code>IdentityCredential</code></a> instance.</p>\n  </dd>\n  <dt id=\"identityprovider\"><a href=\"/en-US/docs/Web/API/IdentityProvider\"><code>IdentityProvider</code></a></dt>\n  <dd>\n    <p>Represents an IdP and provides access to related information. The static <a href=\"/en-US/docs/Web/API/IdentityProvider/getUserInfo_static\" title=\"IdentityProvider.getUserInfo()\"><code>IdentityProvider.getUserInfo()</code></a> method returns information about a user who was previously signed in, when they return to an IdP. This information can be used to display a personalized welcome message and sign-in button.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"extensions_to_other_interfaces","title":"Extensions to other interfaces","isH3":false,"content":"<dl>\n  <dt id=\"credentialscontainer.get\"><a href=\"/en-US/docs/Web/API/CredentialsContainer/get\"><code>CredentialsContainer.get()</code></a>, the <code>identity</code> option.</dt>\n  <dd>\n    <p><code>identity</code> is an object containing details of federated IdPs that a relying party (RP) website can use to sign users in. It causes a <code>get()</code> call to initiate a request for a user to sign in to an RP with an IdP.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<ul>\n  <li><a href=\"https://fedcm-rp-demo.glitch.me/\" class=\"external\" target=\"_blank\">FedCM sign-in example</a>\n    <ul>\n      <li><a href=\"https://glitch.com/edit/#!/fedcm-rp-demo?path=server.js%3A1%3A0\" class=\"external\" target=\"_blank\">RP source code</a></li>\n      <li><a href=\"https://glitch.com/edit/#!/fedcm-idp-demo?path=server.js%3A1%3A0\" class=\"external\" target=\"_blank\">IdP source code</a></li>\n    </ul>\n  </li>\n  <li><a href=\"https://fedcm-main-frame.glitch.me/\" class=\"external\" target=\"_blank\">FedCM <code>&lt;iframe&gt;</code> sign-in</a>\n    <ul>\n      <li><a href=\"https://glitch.com/edit/#!/fedcm-main-frame?path=index.html%3A1%3A0\" class=\"external\" target=\"_blank\">RP <code>&lt;iframe&gt;</code> page source code</a></li>\n      <li><a href=\"https://glitch.com/edit/#!/webid-fcm-idp-single?path=server.js%3A1%3A0\" class=\"external\" target=\"_blank\">IdP source code</a></li>\n    </ul>\n  </li>\n</ul>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://fedidcg.github.io/FedCM/#browser-api-identity-credential-interface","title":"Federated Credential Management API"}],"query":"api.IdentityCredential"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.IdentityCredential"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://developer.chrome.com/docs/privacy-sandbox/fedcm/\" class=\"external\" target=\"_blank\">Federated Credential Management API</a></li>\n</ul>"}}],"toc":[{"text":"FedCM concepts","id":"fedcm_concepts"},{"text":"IdP integration with FedCM","id":"idp_integration_with_fedcm"},{"text":"RP sign-in using the JavaScript API","id":"rp_sign-in_using_the_javascript_api"},{"text":"Permissions Policy integration and IFrame support","id":"permissions_policy_integration_and_iframe_support"},{"text":"Interfaces","id":"interfaces"},{"text":"Extensions to other interfaces","id":"extensions_to_other_interfaces"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The Federated Credential Management API (or FedCM API) provides a standard mechanism for identity providers (IdPs) to make identity federation services available on the web in a privacy-preserving way, without the need for third-party cookies and redirects. This includes a JavaScript API that enables the use of federated authentication for activities such as signing in or signing up on a website.","popularity":0.0053,"modified":"2023-10-25T17:27:32.000Z","source":{"folder":"en-us/web/api/fedcm_api","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/fedcm_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/835d6632d59993861a0458510402787f8a2c3cb3","filename":"index.md"},"short_title":"Federated Credential Management (FedCM) API","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/FedCM_API","title":"Federated Credential Management (FedCM) API"}],"pageTitle":"Federated Credential Management (FedCM) API - Web APIs | MDN","noIndexing":false}}</script></body></html>