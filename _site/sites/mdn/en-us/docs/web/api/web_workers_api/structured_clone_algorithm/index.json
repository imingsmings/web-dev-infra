{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{"macros":[{"id":"macro0","fixable":false,"suggestion":null,"explanation":"/en-US/docs/Web/API/CropTarget does not exist","name":"MacroBrokenLinkError","error":{},"errorStack":"Error: /en-US/docs/Web/API/CropTarget does not exist\n    at Object.recordNonFatalError (file:///Users/jason/Code/yari/kumascript/src/render.ts:88:13)\n    at Object.smartLink (file:///Users/jason/Code/yari/kumascript/src/api/web.ts:121:29)\n    at eval (\"/Users/jason/Code/yari/kumascript/macros/DOMxRef.ejs\":60:18)\n    at DOMxRef (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:703:17)\n    at /Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:260:40\n    at new Promise (<anonymous>)\n    at tryHandleCache (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:258:14)\n    at exports.renderFile (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:491:10)\n    at Templates.render (file:///Users/jason/Code/yari/kumascript/src/templates.ts:55:40)\n    at render (file:///Users/jason/Code/yari/kumascript/src/render.ts:181:56)","offset":6,"line":54,"column":7,"macroName":"domxref","sourceContext":"  |   <li>{{domxref(\"AudioData\")}}</li>\n  |   <li>{{domxref(\"Blob\")}}</li>\n> |   <li>{{domxref(\"CropTarget\")}}</li>\n          ^\n  |   <li>{{domxref(\"CryptoKey\")}}</li>\n  |   <li>{{domxref(\"DOMException\")}}: browsers must serialize the properties {{domxref(\"DOMException.name\",\"name\")}} and {{domxref(\"DOMException.message\",\"message\")}}. Other attributes may also be serialized/cloned.</li>","fatal":false,"filepath":"/Users/jason/Code/content/files/en-us/web/api/web_workers_api/structured_clone_algorithm/index.md","macroSource":"{{domxref(\"CropTarget\")}}"}]},"title":"The structured clone algorithm","mdn_url":"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\">Using Web Workers</a></li><li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Functions_and_classes_available_to_workers\">Functions and classes available to Web Workers</a></li><li><em><a href=\"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\" aria-current=\"page\">The structured clone algorithm</a></em></li><li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Transferable_objects\">Transferable objects</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope\"><code>DedicatedWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/SharedWorker\"><code>SharedWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/SharedWorkerGlobalScope\"><code>SharedWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/Worker\"><code>Worker</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerGlobalScope\"><code>WorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerLocation\"><code>WorkerLocation</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator\"><code>WorkerNavigator</code></a></li></ol></details></li></ol>","sidebarMacro":"DefaultAPISidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong>structured clone algorithm</strong> copies complex JavaScript objects.\n  It is used internally when invoking <a href=\"/en-US/docs/Web/API/structuredClone\"><code>structuredClone()</code></a>, to transfer data between <a href=\"/en-US/docs/Web/API/Worker\">Workers</a> via <a href=\"/en-US/docs/Web/API/Worker/postMessage\" title=\"postMessage()\"><code>postMessage()</code></a>, storing objects with <a href=\"/en-US/docs/Glossary/IndexedDB\">IndexedDB</a>, or copying objects for <a href=\"#see_also\">other APIs</a>.\n</p>\n<p>It clones by recursing through the input object while maintaining a map of previously visited references, to avoid infinitely traversing cycles.</p>"}},{"type":"prose","value":{"id":"things_that_dont_work_with_structured_clone","title":"Things that don't work with structured clone","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function\"><code>Function</code></a> objects cannot be duplicated by the structured clone algorithm; attempting to throws a <code>DataCloneError</code> exception.</li>\n  <li>Cloning DOM nodes likewise throws a <code>DataCloneError</code> exception.</li>\n  <li>Certain object properties are not preserved:\n    <ul>\n      <li>The <code>lastIndex</code> property of <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\"><code>RegExp</code></a> objects is not preserved.</li>\n      <li>\n        Property descriptors, setters, getters, and similar metadata-like features are not duplicated.\n        For example, if an object is marked readonly with a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor\">property descriptor</a>, it will be read/write in the duplicate, since that's the default.\n      </li>\n      <li>The prototype chain is not walked or duplicated.</li>\n    </ul>\n  </li>\n</ul>"}},{"type":"prose","value":{"id":"supported_types","title":"Supported types","isH3":false,"content":""}},{"type":"prose","value":{"id":"javascript_types","title":"JavaScript types","isH3":true,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\"><code>Array</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\"><code>ArrayBuffer</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean\"><code>Boolean</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView\"><code>DataView</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date\"><code>Date</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\"><code>Error</code></a> types (but see <a href=\"#error_types\">Error types</a> below).</li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\"><code>Map</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number\"><code>Number</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object\"><code>Object</code></a> objects: but only plain objects (e.g. from object literals).</li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Data_structures#primitive_values\">Primitive types</a>, except <code>symbol</code>.</li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\"><code>RegExp</code></a>: but note that <code>lastIndex</code> is not preserved.</li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\"><code>Set</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/String\"><code>String</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\"><code>TypedArray</code></a></li>\n</ul>\n<h4 id=\"error_types\">Error types</h4>\n<p>For <code>Error</code> types, the error name must be one of: <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\"><code>Error</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError\"><code>EvalError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError\"><code>RangeError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError\"><code>ReferenceError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError\"><code>SyntaxError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError\"><code>TypeError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError\"><code>URIError</code></a> (or will be set to \"Error\").</p>\n<p>Browsers must serialize the properties <code>name</code> and <code>message</code>, and are expected to serialize other \"interesting\" properties of the errors such as <code>stack</code>, <code>cause</code>, etc.</p>\n<p><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError\"><code>AggregateError</code></a> support is expected to be added to the specification in <a href=\"https://github.com/whatwg/html/pull/5749\" class=\"external\" target=\"_blank\">whatwg/html#5749</a> (and is already supported in some browsers).</p>"}},{"type":"prose","value":{"id":"webapi_types","title":"Web/API types","isH3":true,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/AudioData\"><code>AudioData</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Blob\"><code>Blob</code></a></li>\n  <li><a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\" data-flaw-src=\"{{domxref(&quot;CropTarget&quot;)}}\"><code>CropTarget</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/CryptoKey\"><code>CryptoKey</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a>: browsers must serialize the properties <a href=\"/en-US/docs/Web/API/DOMException/name\" title=\"name\"><code>name</code></a> and <a href=\"/en-US/docs/Web/API/DOMException/message\" title=\"message\"><code>message</code></a>. Other attributes may also be serialized/cloned.</li>\n  <li><a href=\"/en-US/docs/Web/API/DOMMatrix\"><code>DOMMatrix</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMMatrixReadOnly\"><code>DOMMatrixReadOnly</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMPoint\"><code>DOMPoint</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMPointReadOnly\"><code>DOMPointReadOnly</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMQuad\"><code>DOMQuad</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMRect\"><code>DOMRect</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/DOMRectReadOnly\"><code>DOMRectReadOnly</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/File\"><code>File</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/FileList\"><code>FileList</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/FileSystemDirectoryHandle\"><code>FileSystemDirectoryHandle</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/FileSystemFileHandle\"><code>FileSystemFileHandle</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/FileSystemHandle\"><code>FileSystemHandle</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/GPUCompilationInfo\"><code>GPUCompilationInfo</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/GPUCompilationMessage\"><code>GPUCompilationMessage</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/ImageBitmap\"><code>ImageBitmap</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/ImageData\"><code>ImageData</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/RTCCertificate\"><code>RTCCertificate</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/VideoFrame\"><code>VideoFrame</code></a></li>\n</ul>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data\" class=\"external\" target=\"_blank\">HTML Specification: Safe passing of structured data</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Transferable_objects\">Transferable objects</a></li>\n  <li><a href=\"/en-US/docs/Web/API/structuredClone\"><code>structuredClone()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Window/postMessage\"><code>window.postMessage()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></li>\n  <li><a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a></li>\n</ul>"}}],"toc":[{"text":"Things that don't work with structured clone","id":"things_that_dont_work_with_structured_clone"},{"text":"Supported types","id":"supported_types"},{"text":"See also","id":"see_also"}],"summary":"The structured clone algorithm copies complex JavaScript objects.\n  It is used internally when invoking structuredClone(), to transfer data between Workers via postMessage(), storing objects with IndexedDB, or copying objects for other APIs.","popularity":0.0262,"modified":"2023-11-07T14:40:30.000Z","source":{"folder":"en-us/web/api/web_workers_api/structured_clone_algorithm","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/web_workers_api/structured_clone_algorithm/index.md","last_commit_url":"https://github.com/mdn/content/commit/cfb06ef0d704c1c0b4e523df610458a51b4f2a69","filename":"index.md"},"short_title":"The structured clone algorithm","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Web_Workers_API","title":"Web Workers API"},{"uri":"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm","title":"The structured clone algorithm"}],"pageTitle":"The structured clone algorithm - Web APIs | MDN","noIndexing":false}}