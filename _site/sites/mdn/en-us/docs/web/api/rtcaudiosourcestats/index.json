{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{"macros":[{"id":"macro0","fixable":false,"suggestion":null,"explanation":"/en-US/docs/Web/API/RTCVideoSourceStats does not exist","name":"MacroBrokenLinkError","error":{},"errorStack":"Error: /en-US/docs/Web/API/RTCVideoSourceStats does not exist\n    at Object.recordNonFatalError (file:///Users/jason/Code/yari/kumascript/src/render.ts:88:13)\n    at Object.smartLink (file:///Users/jason/Code/yari/kumascript/src/api/web.ts:121:29)\n    at eval (\"/Users/jason/Code/yari/kumascript/macros/DOMxRef.ejs\":60:18)\n    at DOMxRef (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:703:17)\n    at /Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:260:40\n    at new Promise (<anonymous>)\n    at tryHandleCache (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:258:14)\n    at exports.renderFile (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:491:10)\n    at Templates.render (file:///Users/jason/Code/yari/kumascript/src/templates.ts:55:40)\n    at render (file:///Users/jason/Code/yari/kumascript/src/render.ts:181:56)","offset":7,"line":29,"column":86,"macroName":"domxref","sourceContext":"  |   </dd>\n  | </dl>\n> | <p>The following properties are present in both <code>RTCAudioSourceStats</code> and {{domxref(\"RTCVideoSourceStats\")}}:<!-- RTCMediaSourceStats  --></p>\n                                                                                         ^\n  | <dl>\n  |   <dt>{{domxref(\"RTCAudioSourceStats.trackIdentifier\", \"trackIdentifier\")}}</dt>","fatal":false,"filepath":"/Users/jason/Code/content/files/en-us/web/api/rtcaudiosourcestats/index.md","macroSource":"{{domxref(\"RTCVideoSourceStats\")}}"},{"id":"macro1","fixable":false,"suggestion":null,"explanation":"/en-US/docs/Web/API/RTCVideoSourceStats does not exist","name":"MacroBrokenLinkError","error":{},"errorStack":"Error: /en-US/docs/Web/API/RTCVideoSourceStats does not exist\n    at Object.recordNonFatalError (file:///Users/jason/Code/yari/kumascript/src/render.ts:88:13)\n    at Object.smartLink (file:///Users/jason/Code/yari/kumascript/src/api/web.ts:121:29)\n    at eval (\"/Users/jason/Code/yari/kumascript/macros/DOMxRef.ejs\":60:18)\n    at DOMxRef (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:703:17)\n    at /Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:260:40\n    at new Promise (<anonymous>)\n    at tryHandleCache (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:258:14)\n    at exports.renderFile (/Users/jason/Code/yari/node_modules/ejs/lib/ejs.js:491:10)\n    at Templates.render (file:///Users/jason/Code/yari/kumascript/src/templates.ts:55:40)\n    at render (file:///Users/jason/Code/yari/kumascript/src/render.ts:181:56)","offset":7,"line":53,"column":151,"macroName":"domxref","sourceContext":"  |   <dt>{{domxref(\"RTCAudioSourceStats.type\", \"type\")}}</dt>\n  |   <dd>\n> |     <p>A string with the value <code>\"media-source\"</code>, indicating that the object is an instance of either {{domxref(\"RTCAudioSourceStats\")}} or {{domxref(\"RTCVideoSourceStats\")}}.</p>\n                                                                                                                                                          ^\n  |   </dd>\n  | </dl>","fatal":false,"filepath":"/Users/jason/Code/content/files/en-us/web/api/rtcaudiosourcestats/index.md","macroSource":"{{domxref(\"RTCVideoSourceStats\")}}"}]},"title":"RTCAudioSourceStats","mdn_url":"/en-US/docs/Web/API/RTCAudioSourceStats","locale":"en-US","native":"English (US)","browserCompat":["api.RTCStatsReport.type_media-source"],"hasMathML":true,"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a></strong></li><li><strong><em><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats\" aria-current=\"page\"><code>RTCAudioSourceStats</code></a></em></strong></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/audioLevel\"><code>audioLevel</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/id\"><code>id</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/kind\"><code>kind</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/timestamp\"><code>timestamp</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/totalAudioEnergy\"><code>totalAudioEnergy</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/totalSamplesDuration\"><code>totalSamplesDuration</code></a><abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/trackIdentifier\"><code>trackIdentifier</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/type\"><code>type</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebRTC</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaDevices/getUserMedia\"><code>MediaDevices.getUserMedia()</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/mediaDevices\"><code>Navigator.mediaDevices</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCCertificate\"><code>RTCCertificate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFSender\"><code>RTCDTMFSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFToneChangeEvent\"><code>RTCDTMFToneChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannel\"><code>RTCDataChannel</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannelEvent\"><code>RTCDataChannelEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDtlsTransport\"><code>RTCDtlsTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCEncodedAudioFrame\"><code>RTCEncodedAudioFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCEncodedVideoFrame\"><code>RTCEncodedVideoFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCErrorEvent\"><code>RTCErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate\"><code>RTCIceCandidate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceTransport\"><code>RTCIceTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceErrorEvent\"><code>RTCPeerConnectionIceErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceEvent\"><code>RTCPeerConnectionIceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver\"><code>RTCRtpReceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver/transform\"><code>RTCRtpReceiver.transform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransform\"><code>RTCRtpScriptTransform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpScriptTransformer\"><code>RTCRtpScriptTransformer</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender/transform\"><code>RTCRtpSender.transform</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpTransceiver\"><code>RTCRtpTransceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSctpTransport\"><code>RTCSctpTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSessionDescription\"><code>RTCSessionDescription</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTrackEvent\"><code>RTCTrackEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTransformEvent\"><code>RTCTransformEvent</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a>'s <strong><code>RTCAudioSourceStats</code></strong> dictionary provides information about an audio track that is attached to one or more senders.</p>\n<p>These statistics can be obtained by iterating the <a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a> returned by <a href=\"/en-US/docs/Web/API/RTCRtpSender/getStats\"><code>RTCRtpSender.getStats()</code></a> or <a href=\"/en-US/docs/Web/API/RTCPeerConnection/getStats\"><code>RTCPeerConnection.getStats()</code></a> until you find a report with the <a href=\"#type\"><code>type</code></a> of <code>media-source</code> and a <a href=\"#kind\"><code>kind</code></a> of <code>audio</code>.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> For audio information about remotely sourced tracks (that are being received), see <a href=\"/en-US/docs/Web/API/RTCInboundRtpStreamStats\"><code>RTCInboundRtpStreamStats</code></a>.</p>\n</div>"}},{"type":"prose","value":{"id":"instance_properties","title":"Instance properties","isH3":false,"content":"<dl>\n  <dt id=\"audiolevel\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/audioLevel\" title=\"audioLevel\"><code>audioLevel</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>A number that represents the audio level of the media source.</p>\n  </dd>\n  <dt id=\"totalaudioenergy\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/totalAudioEnergy\" title=\"totalAudioEnergy\"><code>totalAudioEnergy</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>A number that represents the total audio energy of the media source over the lifetime of the stats object.</p>\n  </dd>\n  <dt id=\"totalsamplesduration\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/totalSamplesDuration\" title=\"totalSamplesDuration\"><code>totalSamplesDuration</code></a> <abbr class=\"icon icon-experimental\" title=\"Experimental. Expect behavior to change in the future.\">\n    <span class=\"visually-hidden\">Experimental</span>\n</abbr></dt>\n  <dd>\n    <p>A number that represents the total duration of all samples produced by the media source over the lifetime of the stats object.</p>\n  </dd>\n</dl>\n<p>The following properties are present in both <code>RTCAudioSourceStats</code> and <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\" data-flaw-src=\"{{domxref(&quot;RTCVideoSourceStats&quot;)}}\"><code>RTCVideoSourceStats</code></a>:<!-- RTCMediaSourceStats  --></p>\n<dl>\n  <dt id=\"trackidentifier\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/trackIdentifier\" title=\"trackIdentifier\"><code>trackIdentifier</code></a></dt>\n  <dd>\n    <p>A string that contains the <a href=\"/en-US/docs/Web/API/MediaStreamTrack/id\"><code>id</code></a> value of the <a href=\"/en-US/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a> associated with the audio source.</p>\n  </dd>\n  <dt id=\"kind\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/kind\" title=\"kind\"><code>kind</code></a></dt>\n  <dd>\n    <p>A string indicating whether this object represents stats for a video source or a media source. For an <code>RTCAudioSourceStats</code> this will always be <code>audio</code>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"common_instance_properties","title":"Common instance properties","isH3":true,"content":"<p>The following properties are common to all statistics objects.<!-- RTCStats --></p>\n<dl>\n  <dt id=\"id\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/id\" title=\"id\"><code>id</code></a></dt>\n  <dd>\n    <p>A string that uniquely identifies the object that is being monitored to produce this set of statistics.</p>\n  </dd>\n  <dt id=\"timestamp\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/timestamp\" title=\"timestamp\"><code>timestamp</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMHighResTimeStamp\"><code>DOMHighResTimeStamp</code></a> object indicating the time at which the sample was taken for this statistics object.</p>\n  </dd>\n  <dt id=\"type\"><a href=\"/en-US/docs/Web/API/RTCAudioSourceStats/type\" title=\"type\"><code>type</code></a></dt>\n  <dd>\n    <p>A string with the value <code>\"media-source\"</code>, indicating that the object is an instance of either <a href=\"/en-US/docs/Web/API/RTCAudioSourceStats\" aria-current=\"page\"><code>RTCAudioSourceStats</code></a> or <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\" data-flaw-src=\"{{domxref(&quot;RTCVideoSourceStats&quot;)}}\"><code>RTCVideoSourceStats</code></a>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"description","title":"Description","isH3":false,"content":"<p>\n  The interface provides statistics about an audio media source attached to one or more senders.\n  The information includes the current audio level, averaged over a short (implementation dependent) duration.\n</p>\n<p>\n  The statistics also include the accumulated total energy and total sample duration, at a particular timestamp.\n  The totals can be used to determine the average audio level over the lifetime of the stats object.\n  You can calculate a root mean square (RMS) value in the same units as <code>audioLevel</code> using the following formula:\n</p>\n<math display=\"block\">\n  <msqrt>\n    <mfrac>\n      <mi>totalAudioEnergy</mi>\n      <mi>totalSamplesDuration</mi>\n    </mfrac>\n  </msqrt>\n</math>\n<p>You can also use the accumulated totals to calculate the average audio level over an arbitrary time period.</p>\n<p>\n  The total audio energy of the stats object is accumulated by adding the energy of every sample over the lifetime of the stats object, while the total duration is accumulated by adding the duration of each sample.\n  The energy of each sample is determined using the following formula, where <code>sample_level</code> is the level of the sample, <code>max_level</code> is the highest-intensity encodable value, and <code>duration</code> is the duration of the sample in seconds:\n</p>\n<math display=\"block\">\n  <mrow>\n    <mi>duration</mi>\n    <mo>⁢</mo>\n    <msup>\n      <mrow>\n        <mo>(</mo>\n        <mfrac>\n          <mi>sample_level</mi>\n          <mi>max_level</mi>\n        </mfrac>\n        <mo>)</mo>\n      </mrow>\n      <mn>2</mn>\n    </msup>\n  </mrow>\n</math>\n<p>The average audio level between any two different <code>getStats()</code> calls, over any duration, can be calculated using the following equation:</p>\n<math display=\"block\">\n  <msqrt>\n    <mfrac>\n      <mrow>\n        <msub>\n          <mi>totalAudioEnergy</mi>\n          <mn>2</mn>\n        </msub>\n        <mo>-</mo>\n        <msub>\n          <mi>totalAudioEnergy</mi>\n          <mn>1</mn>\n        </msub>\n      </mrow>\n      <mrow>\n        <msub>\n          <mi>totalSamplesDuration</mi>\n          <mn>2</mn>\n        </msub>\n        <mo>-</mo>\n        <msub>\n          <mi>totalSamplesDuration</mi>\n          <mn>1</mn>\n        </msub>\n      </mrow>\n    </mfrac>\n  </msqrt>\n</math>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>This example shows how you might iterate the stats object returned from <code>RTCRtpSender.getStats()</code> to get the audio source stats, and then extract the <code>audioLevel</code>.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// where sender is an RTCRtpSender</span>\n<span class=\"token keyword\">const</span> stats <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> sender<span class=\"token punctuation\">.</span><span class=\"token function\">getStats</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> audioSourceStats <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\nstats<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">report</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>report<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"media-source\"</span> <span class=\"token operator\">&amp;&amp;</span> report<span class=\"token punctuation\">.</span>kind<span class=\"token operator\">===</span><span class=\"token string\">\"audio\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    audioSourceStats <span class=\"token operator\">=</span> report<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> audioLevel <span class=\"token operator\">=</span> audioSourceStats<span class=\"token operator\">?.</span>audioLevel<span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/webrtc-stats/#dom-rtcstatstype-media-source","title":"Identifiers for WebRTC's Statistics API"}],"query":"api.RTCStatsReport.type_media-source"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.RTCStatsReport.type_media-source"}}],"toc":[{"text":"Instance properties","id":"instance_properties"},{"text":"Description","id":"description"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The WebRTC API's RTCAudioSourceStats dictionary provides information about an audio track that is attached to one or more senders.","popularity":0,"modified":"2023-05-18T12:40:35.000Z","source":{"folder":"en-us/web/api/rtcaudiosourcestats","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/rtcaudiosourcestats/index.md","last_commit_url":"https://github.com/mdn/content/commit/341eeccc9019762fcb45ab4336a29ab37edb2905","filename":"index.md"},"short_title":"RTCAudioSourceStats","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/RTCAudioSourceStats","title":"RTCAudioSourceStats"}],"pageTitle":"RTCAudioSourceStats - Web APIs | MDN","noIndexing":false}}