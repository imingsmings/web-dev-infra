{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Animation: commitStyles() method","mdn_url":"/en-US/docs/Web/API/Animation/commitStyles","locale":"en-US","native":"English (US)","browserCompat":["api.Animation.commitStyles"],"sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Web_Animations_API\">Web Animations API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/Animation\"><code>Animation</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/Animation\"><code>Animation()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/currentTime\"><code>currentTime</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/effect\"><code>effect</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/finished\"><code>finished</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/id\"><code>id</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/pending\"><code>pending</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/playbackRate\"><code>playbackRate</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/playState\"><code>playState</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/ready\"><code>ready</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/replaceState\"><code>replaceState</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/startTime\"><code>startTime</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/timeline\"><code>timeline</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Instance methods</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/cancel\"><code>cancel()</code></a></li><li><em><code>commitStyles()</code> </em></li><li><a href=\"/en-US/docs/Web/API/Animation/finish\"><code>finish()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/pause\"><code>pause()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/persist\"><code>persist()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/play\"><code>play()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/reverse\"><code>reverse()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/updatePlaybackRate\"><code>updatePlaybackRate()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/cancel_event\"><code>cancel</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/finish_event\"><code>finish</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/remove_event\"><code>remove</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Web Animations</summary><ol><li><a href=\"/en-US/docs/Web/API/AnimationEffect\"><code>AnimationEffect</code></a></li><li><a href=\"/en-US/docs/Web/API/AnimationEvent\"><code>AnimationEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/AnimationPlaybackEvent\"><code>AnimationPlaybackEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/AnimationTimeline\"><code>AnimationTimeline</code></a></li><li><a href=\"/en-US/docs/Web/API/Document/getAnimations\"><code>Document.getAnimations()</code></a></li><li><a href=\"/en-US/docs/Web/API/Document/timeline\"><code>Document.timeline</code></a></li><li><a href=\"/en-US/docs/Web/API/DocumentTimeline\"><code>DocumentTimeline</code></a></li><li><a href=\"/en-US/docs/Web/API/Element/animate\"><code>Element.animate()</code></a></li><li><a href=\"/en-US/docs/Web/API/Element/getAnimations\"><code>Element.getAnimations()</code></a></li><li><a href=\"/en-US/docs/Web/API/KeyframeEffect\"><code>KeyframeEffect</code></a></li><li><a href=\"/en-US/docs/Web/API/ScrollTimeline\"><code>ScrollTimeline</code></a></li><li><a href=\"/en-US/docs/Web/API/ViewTimeline\"><code>ViewTimeline</code></a></li></ol></details></li></ol>","sidebarMacro":"APIRef","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <code>commitStyles()</code> method of the <a href=\"/en-US/docs/Web/API/Web_Animations_API\">Web Animations API</a>'s <a href=\"/en-US/docs/Web/API/Animation\"><code>Animation</code></a> interface writes the <a href=\"/en-US/docs/Web/CSS/computed_value\">computed values</a> of the animation's current styles into its target element's <a href=\"/en-US/docs/Web/HTML/Global_attributes#style\"><code>style</code></a> attribute. <code>commitStyles()</code> works even if the animation has been <a href=\"/en-US/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API#automatically_removing_filling_animations\">automatically removed</a>.</p>\n<p><code>commitStyles()</code> can be used in combination with <code>fill</code> to cause the final state of an animation to persist after the animation ends. The same effect could be achieved with <code>fill</code> alone, but <a href=\"https://drafts.csswg.org/web-animations-1/#fill-behavior\" class=\"external\" target=\"_blank\">using indefinitely filling animations is discouraged</a>. Animations <a href=\"/en-US/docs/Web/CSS/Cascade#cascading_order\">take precedence over all static styles</a>, so an indefinite filling animation can prevent the target element from ever being styled normally.</p>\n<p>Using <code>commitStyles()</code> writes the styling state into the element's <a href=\"/en-US/docs/Web/HTML/Global_attributes#style\"><code>style</code></a> attribute, where they can be modified and replaced as normal.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token function\">commitStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<p>None.</p>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>None (<a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined\"><code>undefined</code></a>).</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"committing_the_final_state_of_an_animation","title":"Committing the final state of an animation","isH3":true,"content":"<p>In this example we have two buttons, labeled \"Commit styles\" and \"Fill forwards\". Both buttons animate when you click them, and both buttons persist the final state of the animation.</p>\n<p>The difference, though, is that \"Fill forwards\" only uses <code>fill: \"forwards\"</code> to persist the animation's final state: this means that the browser has to maintain the animation's state indefinitely, or until it can be automatically removed.</p>\n<p>However, the \"Commit styles\" button waits for the animation to finish, then calls <code>commitStyles()</code>, then cancels the animation, so the finished style is captured as the value of the <code>style</code> attribute, rather than as the animation state.</p>\n<h4 id=\"html\">HTML</h4>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>commit-styles<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Commit styles<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fill-forwards<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Fill forwards<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: css hidden notranslate\"><code><span class=\"token selector\">button</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0.5rem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"javascript\">JavaScript</h4>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> commitStyles <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".commit-styles\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> offset1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\ncommitStyles<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Start the animation</span>\n  offset1 <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token operator\">-</span> offset1<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> animation <span class=\"token operator\">=</span> commitStyles<span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>offset1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">\"forwards\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Wait for the animation to finish</span>\n  <span class=\"token keyword\">await</span> animation<span class=\"token punctuation\">.</span>finished<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Commit animation state to style attribute</span>\n  animation<span class=\"token punctuation\">.</span><span class=\"token function\">commitStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Cancel the animation</span>\n  animation<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fillForwards <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".fill-forwards\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> offset2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\nfillForwards<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Start the animation</span>\n  offset2 <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token operator\">-</span> offset2<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> animation <span class=\"token operator\">=</span> fillForwards<span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>offset2<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">\"forwards\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"result\">Result</h4><div class=\"code-example\" id=\"sect1\"><p class=\"example-header\"></p><iframe class=\"sample-code-frame\" title=\"committing the final state of an animation sample\" id=\"frame_committing_the_final_state_of_an_animation\" src=\"http://localhost:5042/en-US/docs/Web/API/Animation/commitStyles/runner.html?id=committing_the_final_state_of_an_animation\" loading=\"lazy\"></iframe></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://drafts.csswg.org/web-animations-1/#dom-animation-commitstyles","title":"Web Animations"}],"query":"api.Animation.commitStyles"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.Animation.commitStyles"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Web_Animations_API\">Web Animations API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Animation\"><code>Animation</code></a> for other methods and properties you can use to control web page animation.</li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The commitStyles() method of the Web Animations API's Animation interface writes the computed values of the animation's current styles into its target element's style attribute. commitStyles() works even if the animation has been automatically removed.","popularity":0.0011,"modified":"2023-07-07T07:19:19.000Z","source":{"folder":"en-us/web/api/animation/commitstyles","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/animation/commitstyles/index.md","last_commit_url":"https://github.com/mdn/content/commit/acfe8c9f1f4145f77653a2bc64a9744b001358dc","filename":"index.md"},"short_title":"commitStyles()","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Animation","title":"Animation"},{"uri":"/en-US/docs/Web/API/Animation/commitStyles","title":"commitStyles()"}],"pageTitle":"Animation: commitStyles() method - Web APIs | MDN","noIndexing":false}}