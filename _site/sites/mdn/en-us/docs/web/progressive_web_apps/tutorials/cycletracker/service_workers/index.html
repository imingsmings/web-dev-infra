<!doctype html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="icon" href="/favicon-48x48.cbbd161b.png"/><link rel="apple-touch-icon" href="/apple-touch-icon.6803c6f0.png"/><meta name="theme-color" content="#ffffff"/><link rel="manifest" href="/manifest.56b1cedc.json"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"/><title>CycleTracker: Service workers - Progressive web apps | MDN</title><link rel="alternate" type="application/rss+xml" title="MDN Blog RSS Feed" href="https://developer.mozilla.org/en-US/blog/rss.xml" hreflang="en" /><meta name="robots" content="noindex, nofollow"><meta name="description" content="Thus far, we&apos;ve written the HTML, CSS, and JavaScript for CycleTracker. We added a manifest file defining colors, icons, URL, and other app features. We have a working web app! But it isn&apos;t yet a PWA. In this section, we will write the JavaScript required to convert our fully functional web application into a PWA that can be distributed as a standalone app and works seamlessly offline."/><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers"/><meta property="og:title" content="CycleTracker: Service workers - Progressive web apps | MDN"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:description" content="Thus far, we&apos;ve written the HTML, CSS, and JavaScript for CycleTracker. We added a manifest file defining colors, icons, URL, and other app features. We have a working web app! But it isn&apos;t yet a PWA. In this section, we will write the JavaScript required to convert our fully functional web application into a PWA that can be distributed as a standalone app and works seamlessly offline."/><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:height" content="1080"/><meta property="og:image:width" content="1920"/><meta property="og:image:alt" content="The MDN Web Docs logo, featuring a blue accent color, displayed on a solid black background."/><meta property="og:site_name" content="MDN Web Docs"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="MozDevNet"/><link rel="canonical" href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers"/><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.on-github,.page-footer,.place,.sidebar,.top-banner,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><script defer="defer" src="/static/js/main.8204838d.js"></script><link href="/static/css/main.3551aa81.css" rel="stylesheet"></head><body><script>if(document.body.addEventListener("load",(t=>{t.target.classList.contains("interactive")&&t.target.setAttribute("data-readystate","complete")}),{capture:!0}),window&&document.documentElement){const t={light:"#ffffff",dark:"#1b1b1b"};try{const e=window.localStorage.getItem("theme");e&&(document.documentElement.className=e,document.documentElement.style.backgroundColor=t[e])}catch(t){console.warn("Unable to read theme from localStorage",t)}}</script><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#top-nav-search-input">Skip to search</a></li><li><a id="skip-select-language" href="#languages-switcher-button">Skip to select language</a></li></ul><div class="page-wrapper  category-web document-page"><div class="top-banner loading"><section class="place top container"></section></div><div class="sticky-header-container"><header class="top-navigation 
      
      "><div class="container "><div class="top-navigation-wrap"><a href="/en-US/" class="logo" aria-label="MDN homepage"><svg id="mdn-docs-logo" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 694.9 104.4" style="enable-background:new 0 0 694.9 104.4" xml:space="preserve" role="img"><title>MDN Web Docs</title><path d="M40.3 0 11.7 92.1H0L28.5 0h11.8zm10.4 0v92.1H40.3V0h10.4zM91 0 62.5 92.1H50.8L79.3 0H91zm10.4 0v92.1H91V0h10.4z" class="logo-m"></path><path d="M627.9 95.6h67v8.8h-67v-8.8z" class="logo-_"></path><path d="M367 42h-4l-10.7 30.8h-5.5l-10.8-26h-.4l-10.5 26h-5.2L308.7 42h-3.8v-5.6H323V42h-6.5l6.8 20.4h.4l10.3-26h4.7l11.2 26h.5l5.7-20.3h-6.2v-5.6H367V42zm34.9 20c-.4 3.2-2 5.9-4.7 8.2-2.8 2.3-6.5 3.4-11.3 3.4-5.4 0-9.7-1.6-13.1-4.7-3.3-3.2-5-7.7-5-13.7 0-5.7 1.6-10.3 4.7-14s7.4-5.5 12.9-5.5c5.1 0 9.1 1.6 11.9 4.7s4.3 6.9 4.3 11.3c0 1.5-.2 3-.5 4.7h-25.6c.3 7.7 4 11.6 10.9 11.6 2.9 0 5.1-.7 6.5-2 1.5-1.4 2.5-3 3-4.9l6 .9zM394 51.3c.2-2.4-.4-4.7-1.8-6.9s-3.8-3.3-7-3.3c-3.1 0-5.3 1-6.9 3-1.5 2-2.5 4.4-2.8 7.2H394zm51 2.4c0 5-1.3 9.5-4 13.7s-6.9 6.2-12.7 6.2c-6 0-10.3-2.2-12.7-6.7-.1.4-.2 1.4-.4 2.9s-.3 2.5-.4 2.9h-7.3c.3-1.7.6-3.5.8-5.3.3-1.8.4-3.7.4-5.5V22.3h-6v-5.6H416v27c1.1-2.2 2.7-4.1 4.7-5.7 2-1.6 4.8-2.4 8.4-2.4 4.6 0 8.4 1.6 11.4 4.7 3 3.2 4.5 7.6 4.5 13.4zm-7.7.6c0-4.2-1-7.4-3-9.5-2-2.2-4.4-3.3-7.4-3.3-3.4 0-6 1.2-8 3.7-1.9 2.4-2.9 5-3 7.7V57c0 3 1 5.6 3 7.7s4.5 3.1 7.6 3.1c3.6 0 6.3-1.3 8.1-3.9 1.8-2.7 2.7-5.9 2.7-9.6zm69.2 18.5h-13.2v-7.2c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2 5.7 0 9.8 2.2 12.3 6.5V22.3h-8.6v-5.6h15.8v50.6h6v5.5zM493.2 56v-4.4c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm53.1-1.4c0 5.6-1.8 10.2-5.3 13.7s-8.2 5.3-13.9 5.3-10.1-1.7-13.4-5.1c-3.3-3.4-5-7.9-5-13.5 0-5.3 1.6-9.9 4.7-13.7 3.2-3.8 7.9-5.7 14.2-5.7s11 1.9 14.1 5.7c3 3.7 4.6 8.1 4.6 13.3zm-7.7-.2c0-4-1-7.2-3-9.5s-4.8-3.5-8.2-3.5c-3.6 0-6.4 1.2-8.3 3.7s-2.9 5.6-2.9 9.5c0 3.7.9 6.8 2.8 9.4 1.9 2.6 4.6 3.9 8.3 3.9 3.6 0 6.4-1.3 8.4-3.8 1.9-2.6 2.9-5.8 2.9-9.7zm45 5.8c-.4 3.2-1.9 6.3-4.4 9.1-2.5 2.9-6.4 4.3-11.8 4.3-5.2 0-9.4-1.6-12.6-4.8-3.2-3.2-4.8-7.7-4.8-13.7 0-5.5 1.6-10.1 4.7-13.9 3.2-3.8 7.6-5.7 13.2-5.7 2.3 0 4.6.3 6.7.8 2.2.5 4.2 1.5 6.2 2.9l1.5 9.5-5.9.7-1.3-6.1c-2.1-1.2-4.5-1.8-7.2-1.8-3.5 0-6.1 1.2-7.7 3.7-1.7 2.5-2.5 5.7-2.5 9.6 0 4.1.9 7.3 2.7 9.5 1.8 2.3 4.4 3.4 7.8 3.4 5.2 0 8.2-2.9 9.2-8.8l6.2 1.3zm34.7 1.9c0 3.6-1.5 6.5-4.6 8.5s-7 3-11.7 3c-5.7 0-10.6-1.2-14.6-3.6l1.2-8.8 5.7.6-.2 4.7c1.1.5 2.3.9 3.6 1.1s2.6.3 3.9.3c2.4 0 4.5-.4 6.5-1.3 1.9-.9 2.9-2.2 2.9-4.1 0-1.8-.8-3.1-2.3-3.8s-3.5-1.3-5.8-1.7-4.6-.9-6.9-1.4c-2.3-.6-4.2-1.6-5.7-2.9-1.6-1.4-2.3-3.5-2.3-6.3 0-4.1 1.5-6.9 4.6-8.5s6.4-2.4 9.9-2.4c2.6 0 5 .3 7.2.9 2.2.6 4.3 1.4 6.1 2.4l.8 8.8-5.8.7-.8-5.7c-2.3-1-4.7-1.6-7.2-1.6-2.1 0-3.7.4-5.1 1.1-1.3.8-2 2-2 3.8 0 1.7.8 2.9 2.3 3.6 1.5.7 3.4 1.2 5.7 1.6 2.2.4 4.5.8 6.7 1.4 2.2.6 4.1 1.6 5.7 3 1.4 1.6 2.2 3.7 2.2 6.6zM197.6 73.2h-17.1v-5.5h3.8V51.9c0-3.7-.7-6.3-2.1-7.9-1.4-1.6-3.3-2.3-5.7-2.3-3.2 0-5.6 1.1-7.2 3.4s-2.4 4.6-2.5 6.9v15.6h6v5.5h-17.1v-5.5h3.8V51.9c0-3.8-.7-6.4-2.1-7.9-1.4-1.5-3.3-2.3-5.6-2.3-3.2 0-5.5 1.1-7.2 3.3-1.6 2.2-2.4 4.5-2.5 6.9v15.8h6.9v5.5h-20.2v-5.5h6V42.4h-6.1v-5.6h13.4v6.4c1.2-2.1 2.7-3.8 4.7-5.2 2-1.3 4.4-2 7.3-2s5.3.7 7.5 2.1c2.2 1.4 3.7 3.5 4.5 6.4 1.1-2.5 2.7-4.5 4.9-6.1s4.8-2.4 7.9-2.4c3.5 0 6.5 1.1 8.9 3.3s3.7 5.6 3.7 10.2v18.2h6.1v5.5zm42.5 0h-13.2V66c-1.2 2.2-2.8 4.1-4.9 5.6-2.1 1.6-4.8 2.4-8.3 2.4-4.8 0-8.7-1.6-11.6-4.9-2.9-3.2-4.3-7.7-4.3-13.3 0-5 1.3-9.6 4-13.7 2.6-4.1 6.9-6.2 12.8-6.2s9.8 2.2 12.3 6.5V22.7h-8.6v-5.6h15.8v50.6h6v5.5zm-13.3-16.8V52c-.1-3-1.2-5.5-3.2-7.3s-4.4-2.8-7.2-2.8c-3.6 0-6.3 1.3-8.2 3.9-1.9 2.6-2.8 5.8-2.8 9.6 0 4.1 1 7.3 3 9.5s4.5 3.3 7.4 3.3c3.2 0 5.8-1.3 7.8-3.8 2.1-2.6 3.1-5.3 3.2-8zm61.5 16.8H269v-5.5h6V51.9c0-3.7-.7-6.3-2.2-7.9-1.4-1.6-3.4-2.3-5.7-2.3-3.1 0-5.6 1-7.4 3s-2.8 4.4-2.9 7v15.9h6v5.5h-19.3v-5.5h6V42.4h-6.2v-5.6h13.6V43c2.6-4.6 6.8-6.9 12.7-6.9 3.6 0 6.7 1.1 9.2 3.3s3.7 5.6 3.7 10.2v18.2h6v5.4h-.2z" class="logo-text"></path></svg></a><button title="Open main menu" type="button" class="button action has-icon main-menu-toggle" aria-haspopup="menu" aria-label="Open main menu" aria-expanded="false"><span class="button-wrap"><span class="icon icon-menu "></span><span class="visually-hidden">Open main menu</span></span></button></div><div class="top-navigation-main"><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container active"><button type="button" id="references-button" class="top-level-entry menu-toggle" aria-controls="references-menu" aria-expanded="false">References</button><a href="/en-US/docs/Web" class="top-level-entry">References</a><ul id="references-menu" class="submenu references hidden inline-submenu-lg" aria-labelledby="references-button"><li class="apis-link-container mobile-only "><a href="/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li><li class="html-link-container "><a href="/en-US/docs/Web/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Structure of content on the web</p></div></a></li><li class="css-link-container "><a href="/en-US/docs/Web/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Code used to describe document style</p></div></a></li><li class="javascript-link-container "><a href="/en-US/docs/Web/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">General-purpose scripting language</p></div></a></li><li class="http-link-container "><a href="/en-US/docs/Web/HTTP" class="submenu-item "><div class="submenu-icon http"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTTP</div><p class="submenu-item-description">Protocol for transmitting web resources</p></div></a></li><li class="apis-link-container "><a href="/en-US/docs/Web/API" class="submenu-item "><div class="submenu-icon apis"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web APIs</div><p class="submenu-item-description">Interfaces for building web applications</p></div></a></li><li class="apis-link-container "><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Extensions</div><p class="submenu-item-description">Developing extensions for web browsers</p></div></a></li><li class="apis-link-container desktop-only "><a href="/en-US/docs/Web" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Web Technology</div><p class="submenu-item-description">Web technology reference for developers</p></div></a></li></ul></li><li class="top-level-entry-container "><button type="button" id="guides-button" class="top-level-entry menu-toggle" aria-controls="guides-menu" aria-expanded="false">Guides</button><a href="/en-US/docs/Learn" class="top-level-entry">Guides</a><ul id="guides-menu" class="submenu guides hidden inline-submenu-lg" aria-labelledby="guides-button"><li class="apis-link-container mobile-only "><a href="/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">Overview / MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="apis-link-container desktop-only "><a href="/en-US/docs/Learn" class="submenu-item "><div class="submenu-icon learn"></div><div class="submenu-content-container"><div class="submenu-item-heading">MDN Learning Area</div><p class="submenu-item-description">Learn web development</p></div></a></li><li class="html-link-container "><a href="/en-US/docs/Learn/HTML" class="submenu-item "><div class="submenu-icon html"></div><div class="submenu-content-container"><div class="submenu-item-heading">HTML</div><p class="submenu-item-description">Learn to structure web content with HTML</p></div></a></li><li class="css-link-container "><a href="/en-US/docs/Learn/CSS" class="submenu-item "><div class="submenu-icon css"></div><div class="submenu-content-container"><div class="submenu-item-heading">CSS</div><p class="submenu-item-description">Learn to style content using CSS</p></div></a></li><li class="javascript-link-container "><a href="/en-US/docs/Learn/JavaScript" class="submenu-item "><div class="submenu-icon javascript"></div><div class="submenu-content-container"><div class="submenu-item-heading">JavaScript</div><p class="submenu-item-description">Learn to run scripts in the browser</p></div></a></li><li class=" "><a href="/en-US/docs/Web/Accessibility" class="submenu-item "><div class="submenu-icon"></div><div class="submenu-content-container"><div class="submenu-item-heading">Accessibility</div><p class="submenu-item-description">Learn to make the web accessible to all</p></div></a></li></ul></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/blog/">Blog</a></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/play">Play</a></li><li class="top-level-entry-container "><a class="top-level-entry menu-link" href="/en-US/plus/ai-help">AI Help <sup class="new beta">Beta</sup></a></li></ul></nav><div class="header-search"><form action="/en-US/search" class="search-form search-widget" id="top-nav-search-form" role="search"><label id="top-nav-search-label" for="top-nav-search-input" class="visually-hidden">Search MDN</label><input aria-activedescendant="" aria-autocomplete="list" aria-controls="top-nav-search-menu" aria-expanded="false" aria-labelledby="top-nav-search-label" autoComplete="off" id="top-nav-search-input" role="combobox" type="search" class="search-input-field" name="q" placeholder="   " required="" value=""/><button type="button" class="button action has-icon clear-search-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear search input</span></span></button><button type="submit" class="button action has-icon search-button"><span class="button-wrap"><span class="icon icon-search "></span><span class="visually-hidden">Search</span></span></button><div id="top-nav-search-menu" role="listbox" aria-labelledby="top-nav-search-label"></div></form></div><div class="theme-switcher-menu"><button type="button" class="button action has-icon theme-switcher-menu small" aria-haspopup="menu"><span class="button-wrap"><span class="icon icon-theme-os-default "></span>Theme</span></button></div><ul class="auth-container"><li><a href="?next=%2Fen-US%2Fdocs%2FWeb%2FProgressive_web_apps%2FTutorials%2FCycleTracker%2FService_workers" class="login-link" rel="nofollow">Log in</a></li><li><a href="?next=%2Fen-US%2Fdocs%2FWeb%2FProgressive_web_apps%2FTutorials%2FCycleTracker%2FService_workers" target="_self" class="button primary mdn-plus-subscribe-link"><span class="button-wrap">Sign up for free</span></a></li></ul></div></div></header><div class="article-actions-container"><div class="container"><button type="button" class="button action has-icon sidebar-button" aria-label="Expand sidebar" aria-expanded="false" aria-controls="sidebar-quicklinks"><span class="button-wrap"><span class="icon icon-sidebar "></span></span></button><nav class="breadcrumbs-container" aria-label="Breadcrumb"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Web"><span property="name">References</span></a><meta property="position" content="1"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Web/Progressive_web_apps"><span property="name">Progressive web apps</span></a><meta property="position" content="2"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Web/Progressive_web_apps/Tutorials"><span property="name">Tutorials</span></a><meta property="position" content="3"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker"><span property="name">CycleTracker</span></a><meta property="position" content="4"/></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers"><span property="name">Service workers</span></a><meta property="position" content="5"/></li></ol></nav></div></div></div><div class="main-wrapper"><div class="sidebar-container"><aside id="sidebar-quicklinks" class="sidebar" data-macro="PWASidebar"><button type="button" class="button action backdrop" aria-label="Collapse sidebar"><span class="button-wrap"></span></button><nav aria-label="Related Topics" class="sidebar-inner"><header class="sidebar-actions"><section class="sidebar-filter-container"><div class="sidebar-filter "><label id="sidebar-filter-label" class="sidebar-filter-label" for="sidebar-filter-input"><span class="icon icon-filter"></span><span class="visually-hidden">Filter sidebar</span></label><input id="sidebar-filter-input" autoComplete="off" class="sidebar-filter-input-field false" type="text" placeholder="Filter" value=""/><button type="button" class="button action has-icon clear-sidebar-filter-button"><span class="button-wrap"><span class="icon icon-cancel "></span><span class="visually-hidden">Clear filter input</span></span></button></div></section></header><div class="sidebar-inner-nav"><div class="in-nav-toc"><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#service_worker_responsibilities">Service worker responsibilities</a></li><li class="document-toc-item "><a class="document-toc-link" href="#complete_service_worker_file">Complete service worker file</a></li><li class="document-toc-item "><a class="document-toc-link" href="#register_the_service_worker">Register the service worker</a></li><li class="document-toc-item "><a class="document-toc-link" href="#debugging_service_workers">Debugging service workers</a></li><li class="document-toc-item "><a class="document-toc-link" href="#were_done!">We're done!</a></li></ul></section></div></div><div class="sidebar-body"><ol><li><a href="/en-US/docs/Web/Progressive_web_apps"><strong>Progressive web apps</strong></a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides"><strong>Guides</strong></a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides/What_is_a_progressive_web_app">What is a progressive web app?</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides/Installing">Installing and uninstalling web apps</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides/Making_PWAs_installable">Making PWAs installable</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation">Offline and background operation</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides/Caching">Caching</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Guides/Best_practices">Best practices for PWAs</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials"><strong>Tutorials</strong></a></li><li><ol><li><details open=""><summary>CycleTracker</summary><ol><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker">CycleTracker</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/HTML_and_CSS">Base HTML and CSS</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Secure_connection">Secure connection</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/JavaScript_functionality">JavaScript functionality</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Manifest_file">Manifest and iconography</a></li><li><em><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers" aria-current="page">Service workers</a></em></li></ol></details></li></ol></li><li><ol><li><details><summary>js13kGames</summary><ol><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames">js13kGames</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/App_structure">Progressive web app structure</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Offline_Service_workers">Making PWAs work offline with Service workers</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Installable_PWAs">How to make PWAs installable</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Re-engageable_Notifications_Push">How to make PWAs re-engageable using Notifications and Push</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Loading">Progressive loading</a></li></ol></details></li></ol></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to"><strong>How to</strong></a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Trigger_install_prompt">Trigger installation from your PWA</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Define_app_icons">Define your app icons</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Create_a_standalone_app">Create a standalone app</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Customize_your_app_colors">Customize your app's theme and background colors</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Display_badge_on_app_icon">Display a badge on the app icon</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Expose_common_actions_as_shortcuts">Expose common app actions as shortcuts</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Share_data_between_apps">Share data between apps</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/How_to/Associate_files_with_your_PWA">Associate files with your PWA</a></li><li><a href="/en-US/docs/Web/Progressive_web_apps/Reference"><strong>Reference</strong></a></li></ol></div></div></nav></aside><div class="toc-container"><aside class="toc"><nav><div class="document-toc-container"><section class="document-toc"><header><h2 class="document-toc-heading">In this article</h2></header><ul class="document-toc-list"><li class="document-toc-item "><a class="document-toc-link" href="#service_worker_responsibilities">Service worker responsibilities</a></li><li class="document-toc-item "><a class="document-toc-link" href="#complete_service_worker_file">Complete service worker file</a></li><li class="document-toc-item "><a class="document-toc-link" href="#register_the_service_worker">Register the service worker</a></li><li class="document-toc-item "><a class="document-toc-link" href="#debugging_service_workers">Debugging service workers</a></li><li class="document-toc-item "><a class="document-toc-link" href="#were_done!">We're done!</a></li></ul></section></div></nav></aside></div></div><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><header><h1>CycleTracker: Service workers</h1></header><div class="section-content"><ul class="prev-next">
    <li><a class="button secondary" href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Manifest_file"><span class="button-wrap"> Previous </span></a></li>
    <li><a class="button secondary" href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker"><span class="button-wrap"> Overview: CycleTracker</span></a></li>
    
</ul>
<p>Thus far, we've written the HTML, CSS, and JavaScript for CycleTracker. We added a manifest file defining colors, icons, URL, and other app features. We have a working web app! But it isn't yet a PWA. In this section, we will write the JavaScript required to convert our fully functional web application into a PWA that can be distributed as a standalone app and works seamlessly offline.</p>
<p>If you haven't already done so, copy the <a href="https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/index.html" class="external" target="_blank">HTML</a>, <a href="https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/style.css" class="external" target="_blank">CSS</a>, <a href="https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/app.js" class="external" target="_blank">JavaScript</a>, and <a href="https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/cycletracker.json" class="external" target="_blank">manifest</a> JSON file. Save them to files called <code>index.html</code>, <code>style.css</code>, <code>app.js</code>, and <code>cycletracker.json</code>, respectively.</p>
<p>In this section, we are creating <code>sw.js</code>, the service worker script, that will convert our Web App into a PWA. We already have one JavaScript file; the last line in the HTML file calls the <code>app.js</code>. This JavaScript provides all the functionality for the standard web application features. Instead of calling the <code>sw.js</code> file like we did the <code>app.js</code> file with the <code>src</code> attribute of <a href="/en-US/docs/Web/HTML/Element/script"><code>&lt;script&gt;</code></a>, we will create a relationship between the web app and its service worker by registering the service worker.</p>
<p>At the end of this lesson, you will have a fully functional PWA; a progressively enhanced web application that is fully installable that works even when the user is offline.</p></div><section aria-labelledby="service_worker_responsibilities"><h2 id="service_worker_responsibilities"><a href="#service_worker_responsibilities">Service worker responsibilities</a></h2><div class="section-content"><p>The service worker is what makes the application work offline while making sure the application is always up to date. To do this well, the service worker should include the following:</p>
<ul>
  <li>Version number (or other identifier).</li>
  <li>List of resources to cache.</li>
  <li>Cache version name.</li>
</ul>
<p>The service worker is also responsible for:</p>
<ul>
  <li>Installing the cache when the app is installed.</li>
  <li>Updating itself and the other application file as needed.</li>
  <li>Removing cached files that are no longer used.</li>
</ul>
<p>We achieve these tasks by reacting to three service worker events, including the</p>
<ul>
  <li><a href="/en-US/docs/Web/API/ServiceWorkerGlobalScope/fetch_event"><code>fetch</code></a>,</li>
  <li><a href="/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event"><code>install</code></a>, and</li>
  <li><a href="/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event"><code>activate</code></a> events.</li>
</ul></div></section><section aria-labelledby="version_number"><h3 id="version_number"><a href="#version_number">Version number</a></h3><div class="section-content"><p>Once the PWA is installed on the user's machine, the only way to inform the browser that there are updated files to be retrieved is for there to be a change in the service worker. If a change is made to any other PWA resource — if the HTML is updated, a bug is fixed in the CSS, a function is added to <code>app.js</code>, an image is compressed to reduce the file save, etc. — the service worker of your installed PWA will not know it needs to download updated resources. Only when the service worker is altered in any way, will the PWA know it may be time to update the cache; which is the service worker's task to initiate.</p>
<p>While changing any character may technically suffice, a PWA best practice is to create a version number constant that gets updated sequentially to indicate an update to the file. Updating a version number (or date), provides an official edit to the service worker even if nothing else is changed in the service worker itself and provides developers with a way of identifying app versions.</p>
<h4 id="task">Task</h4>
<p>Start a JavaScript file by including a version number:</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">VERSION</span> <span class="token operator">=</span> <span class="token string">"v1"</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Save the file as <code>sw.js</code></p></div></section><section aria-labelledby="offline_resource_list"><h3 id="offline_resource_list"><a href="#offline_resource_list">Offline resource list</a></h3><div class="section-content"><p>For a good offline experience, the list of cached files should include all the resources used within the PWA's offline experience. While the manifest file may have a multitude of icons listed in various sizes, the application cache only needs to include the assets used by the app in offline mode.</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">APP_STATIC_RESOURCES</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">"/"</span><span class="token punctuation">,</span>
  <span class="token string">"/index.html"</span><span class="token punctuation">,</span>
  <span class="token string">"/style.css"</span><span class="token punctuation">,</span>
  <span class="token string">"/app.js"</span><span class="token punctuation">,</span>
  <span class="token string">"/icon-512x512.png"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div>
<p>You don't need to include the various icons that are used by all the different operating systems and devices in the list. But do include any images that are used within the app, including assets to used within any splash pages that may be visible if the app is slow as the app loads or used in any "you need to connect to the internet for the full experience" type pages.</p>
<p>Do not include the service worker file in the list of resources to be cached.</p>
<h4 id="task_2">Task</h4>
<p>Add the list of resources to be cached for the CycleTracker PWA to <code>sw.js</code>.</p>
<h4 id="example_solution">Example solution</h4>
<p>We include the static resources created in other sections of this tutorial that CycleTracker needs to function when offline. Our current <code>sw.js</code> file is:</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">VERSION</span> <span class="token operator">=</span> <span class="token string">"v1"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">APP_STATIC_RESOURCES</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">"/"</span><span class="token punctuation">,</span>
  <span class="token string">"/index.html"</span><span class="token punctuation">,</span>
  <span class="token string">"/style.css"</span><span class="token punctuation">,</span>
  <span class="token string">"/app.js"</span><span class="token punctuation">,</span>
  <span class="token string">"/cycletrack.json"</span><span class="token punctuation">,</span>
  <span class="token string">"/icons/wheel.svg"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div>
<p>We included the <code>wheel.svg</code> icon, even though our current application doesn't use it, in case you are enhancing the PWA UI, such as displaying the logo when there is no period data.</p></div></section><section aria-labelledby="application_cache_name"><h3 id="application_cache_name"><a href="#application_cache_name">Application cache name</a></h3><div class="section-content"><p>We have a version number and we have the files that need to be cached. Before caching the files, we need to create a name of the cache that will be used to store the app's static resources. This cache name should be versioned to ensure that when the app is updated, a new cache will be created and the old one will be deleted.</p>
<h4 id="task_3">Task</h4>
<p>Use the <code>VERSION</code> number to create a versioned <code>CACHE_NAME</code>, adding it as a constant to <code>sw.js</code>.</p>
<h4 id="example_solution_2">Example solution</h4>
<p>We name our cache <code>period-tracker-</code> with the current <code>VERSION</code> appended. As the constant declaration is on a single line, we put it before the array of resources constant for better legibility.</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token keyword">const</span> <span class="token constant">VERSION</span> <span class="token operator">=</span> <span class="token string">"v1"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CACHE_NAME</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">period-tracker-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">VERSION</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">APP_STATIC_RESOURCES</span> <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div>
<p>We have successfully declared our constants; a unique identifier, the list of offline resources as an array, and the application's cache name that changes every time the identifier is updated. Now let's focus on installing, updating, and deleting unused cached resources.</p></div></section><section aria-labelledby="saving_the_cache_on_pwa_installation"><h3 id="saving_the_cache_on_pwa_installation"><a href="#saving_the_cache_on_pwa_installation">Saving the cache on PWA installation</a></h3><div class="section-content"><p>When a user installs a PWA or simply visits a website with a service worker, an <code>install</code> event is fired in the service worker scope. We want to listen for this event, filling the cache with the PWA's static resources upon installation. Every time the service worker version is updated, the browser installs the new service worker and the install event occurs.</p>
<p>The <code>install</code> event happens when the app is used for the first time, or when a new version of the service worker is detected by the browser. When an older service worker is being replaced by a new one, the old service worker is used as the PWA's service worker until the new service work is activated.</p>
<p>Only available in secure contexts, the <a href="/en-US/docs/Web/API/caches"><code>caches</code></a> global property returns a <a href="/en-US/docs/Web/API/CacheStorage"><code>CacheStorage</code></a> object associated with the current context. The <a href="/en-US/docs/Web/API/CacheStorage/open"><code>CacheStorage.open()</code></a> method returns a <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves to the <a href="/en-US/docs/Web/API/Cache"><code>Cache</code></a> object matching name of the cache, passed as a parameter.</p>
<p>The <a href="/en-US/docs/Web/API/Cache/addAll"><code>Cache.addAll()</code></a> method takes an array of URLs as a parameter, retrieves them, then adds the responses to the given cache. The <a href="/en-US/docs/Web/API/ExtendableEvent/waitUntil"><code>waitUntil()</code></a> method tells the browser that work is ongoing until the promise settles, and it shouldn't terminate the service worker if it wants that work to complete. While browsers are responsible for executing and terminating service workers when necessary, the <code>waitUntil</code> method is a request to the browser to not terminate the service worker while a task is being executed.</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"cacheName_identifier"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string">"/"</span><span class="token punctuation">,</span>
        <span class="token string">"/index.html"</span>
        <span class="token string">"/style.css"</span>
        <span class="token string">"/app.js"</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="task_4">Task</h4>
<p>Add an install event listener that retrieves and stores the files listed in <code>APP_STATIC_RESOURCES</code> into the cache named <code>CACHE_NAME</code>.</p>
<h4 id="example_solution_3">Example solution</h4>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token constant">APP_STATIC_RESOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></section><section aria-labelledby="updating_the_pwa_and_deleting_old_caches"><h3 id="updating_the_pwa_and_deleting_old_caches"><a href="#updating_the_pwa_and_deleting_old_caches">Updating the PWA and deleting old caches</a></h3><div class="section-content"><p>As mentioned, when an existing service worker is being replaced by a new one, the existing service worker is used as the PWA's service worker until the new service worker is activated. We use the <code>activate</code> event to delete old caches to avoid running out of space. We iterate over named <a href="/en-US/docs/Web/API/Cache"><code>Cache</code></a> objects, deleting all but the current one, and then set the service worker as the <a href="/en-US/docs/Web/API/ServiceWorkerContainer/controller"><code>controller</code></a> for the PWA.</p>
<p>We listen for the current service worker's global scope <a href="/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event"><code>activate</code></a> event.</p>
<p>We get the names of the existing named caches. We use the <a href="/en-US/docs/Web/API/CacheStorage/keys"><code>CacheStorage.keys()</code></a> method (again accessing <code>CacheStorage</code> through the global <a href="/en-US/docs/Web/API/caches"><code>caches</code></a> property) which returns a <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves with an array containing strings corresponding to all of the named <a href="/en-US/docs/Web/API/Cache"><code>Cache</code></a> objects in the order they were created.</p>
<p>We use the <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all()</code></a> method to iterate through that list of name cache promises. The <code>all()</code> method takes as input a list of iterable promises and returns a single <code>Promise</code>. For each name in the list of named caches, check if the cache is the currently active cache. If not, delete it with the <code>Cache</code> <a href="/en-US/docs/Web/API/Cache/delete"><code>delete()</code></a> method.</p>
<p>The last line, the <code>await clients.claim()</code> uses the <a href="/en-US/docs/Web/API/Clients/claim"><code>claim()</code></a> method of the <a href="/en-US/docs/Web/API/Clients"><code>Clients</code></a> interface to enable our service worker to set itself as the controller for our client; the "client" referring to a running instance of the PWA. The <code>claim()</code> method enables the service worker to "claim control" of all clients within its scope. This way, clients loaded in the same scope don't need to be reloaded.</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"activate"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
        names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">!==</span> <span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> caches<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> clients<span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="task_5">Task</h4>
<p>Add the above <code>activate</code> eventListener to your <code>sw.js</code> file.</p></div></section><section aria-labelledby="the_fetch_event"><h3 id="the_fetch_event"><a href="#the_fetch_event">The fetch event</a></h3><div class="section-content"><p>We can take advantage of the <a href="/en-US/docs/Web/API/ServiceWorkerGlobalScope/fetch_event"><code>fetch</code></a> event, to prevent an installed PWA from making requests if the user is online. Listening to the fetch event makes it possible to intercept all requests and respond with cached responses instead of going to the network. Most applications don't require this behavior. In fact, many business models want users to regularly make server requests for tracking and marketing purposes. So, while intercepting requests may be an anti-pattern for some, to improve the privacy of our CycleTracker app, we don't want the app to make unnecessary server requests.</p>
<p>As our PWA consists of a single page, for page navigation requests, we go back to the <code>index.html</code> home page. There are no other pages and we don't ever want to go to the server. If the Fetch API's <a href="/en-US/docs/Web/API/Request"><code>Request</code></a> readonly <a href="/en-US/docs/Web/API/Request/mode"><code>mode</code></a> property is <code>navigate</code>, meaning it's looking for a web page, we use the FetchEvent's <a href="/en-US/docs/Web/API/FetchEvent/respondWith"><code>respondWith()</code></a> method to prevent the browser's default fetch handling, providing our own response promise employing the <a href="/en-US/docs/Web/API/CacheStorage/match"><code>caches.match()</code></a> method.</p>
<p>For all other request modes, we open the caches as done in the <a href="#saving-the-cache-on-pwa-installation">install event response</a>, instead passing the event request to the same <code>match()</code> method. It checks if the request is a key for a stored <a href="/en-US/docs/Web/API/Response"><code>Response</code></a>. If yes, it returns the cached response. If not, we return a <a href="/en-US/docs/Web/HTTP/Status/404">404 status</a> as a response.</p>
<p>Using the <a href="/en-US/docs/Web/API/Response/Response"><code>Response()</code></a> constructor to pass a <code>null</code> body and a <code>status: 404</code> as options, doesn't mean there is an error in our PWA. Rather, everything we need should already be in the cache, and if it isn't, we're not going to the server to resolve this non-issue.</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"fetch"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// when seeking an HTML page</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">"navigate"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Return to the index.html page</span>
    event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// For every other request type</span>
  event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> cachedResponse <span class="token operator">=</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Return the cached response if it's available.</span>
        <span class="token keyword">return</span> cachedResponse<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Respond with a HTTP 404 response status.</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></section><section aria-labelledby="complete_service_worker_file"><h2 id="complete_service_worker_file"><a href="#complete_service_worker_file">Complete service worker file</a></h2><div class="section-content"><p>Your <code>sw.js</code> file should look similar to the following JavaScript. Note that when updating any of the resources listed in the <code>APP_STATIC_RESOURCES</code> array, the only constant or function that must be updated within this service worker is the value of <code>VERSION</code>.</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token comment">// The version of the cache.</span>
<span class="token keyword">const</span> <span class="token constant">VERSION</span> <span class="token operator">=</span> <span class="token string">"v1"</span><span class="token punctuation">;</span>

<span class="token comment">// The name of the cache</span>
<span class="token keyword">const</span> <span class="token constant">CACHE_NAME</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">period-tracker-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">VERSION</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// The static resources that the app needs to function.</span>
<span class="token keyword">const</span> <span class="token constant">APP_STATIC_RESOURCES</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">"/"</span><span class="token punctuation">,</span>
  <span class="token string">"/index.html"</span><span class="token punctuation">,</span>
  <span class="token string">"/app.js"</span><span class="token punctuation">,</span>
  <span class="token string">"/style.css"</span><span class="token punctuation">,</span>
  <span class="token string">"/icons/wheel.svg"</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// On install, cache the static resources</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token constant">APP_STATIC_RESOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// delete old caches on activate</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"activate"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
        names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">!==</span> <span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> caches<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> clients<span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// On fetch, intercept server requests</span>
<span class="token comment">// and respond with cached responses instead of going to network</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"fetch"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// As a single page app, direct app to always go to cached home page.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">"navigate"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// For all other requests, go to the cache first, and then the network.</span>
  event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> cachedResponse <span class="token operator">=</span> <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Return the cached response if it's available.</span>
        <span class="token keyword">return</span> cachedResponse<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// If resource isn't in the cache, return a 404.</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>When updating a service worker, the VERSION constant doesn't need to be updated, as any change in the content of the service worker script itself will trigger the browser to install the new service worker. However, it is a good practice to update the version number as it makes it easier for devs, including yourself, to see which version of the service worker is currently running in the browser, by <a href="#with_developer_tools">checking the name of the Cache in the Application tool</a> (or Sources tool).</p>
<p><strong>Note:</strong> Updating VERSION is important when making changes to any application resource, including the CSS, HTML, and JS code, and image assets. The version number, or any change to the service worker file, is the only way to force an update of the app for your users.</p></div></section><section aria-labelledby="register_the_service_worker"><h2 id="register_the_service_worker"><a href="#register_the_service_worker">Register the service worker</a></h2><div class="section-content"><p>Now that our service worker script is complete, we need to register the service worker.</p>
<p>We start by checking that the browser supports the <a href="/en-US/docs/Web/API/Service_Worker_API">Service Worker API</a> by using <a href="/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection#the_concept_of_feature_detection">feature detection</a> for the presence of the <a href="/en-US/docs/Web/API/ServiceWorker"><code>serviceWorker</code></a> property on the global <a href="/en-US/docs/Web/API/Navigator"><code>navigator</code></a> object:</p>
<div class="code-example"><p class="example-header"><span class="language-name">html</span></p><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// Does "serviceWorker" exist</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If yes, we register the service worker</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>If the property is supported, we can then use the <a href="/en-US/docs/Web/API/ServiceWorkerContainer/register"><code>register()</code></a> method of the service worker API's <a href="/en-US/docs/Web/API/ServiceWorkerContainer"><code>ServiceWorkerContainer</code></a> interface.</p>
<div class="code-example"><p class="example-header"><span class="language-name">html</span></p><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Register the app's service worker</span>
    <span class="token comment">// Passing the filename where that worker is defined.</span>
    navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"sw.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>While the above suffices for the CycleTracker app needs, the <code>register()</code> method does return a <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves with a <a href="/en-US/docs/Web/API/ServiceWorkerRegistration"><code>ServiceWorkerRegistration</code></a> object. For a more robust application, error check the registration:</p>
<div class="code-example"><p class="example-header"><span class="language-name">js</span></p><pre class="brush: js notranslate"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"sw.js"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Service worker registration successful:"</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Service worker registration failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Service workers are not supported."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></section><section aria-labelledby="task_6"><h3 id="task_6"><a href="#task_6">Task</a></h3><div class="section-content"><p>Open <code>index.html</code> and add the following <a href="/en-US/docs/Web/HTML/Element/script"><code>&lt;script&gt;</code></a> after the script to include <code>app.js</code> and before the closing <code>&lt;/body&gt;</code> tag.</p>
<div class="code-example"><p class="example-header"><span class="language-name">html</span></p><pre class="brush: html notranslate"><code><span class="token comment">&lt;!-- Register the app's service worker. --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"sw.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>You can try the fully functioning <a href="https://mdn.github.io/pwa-examples/cycletracker/service_workers" class="external" target="_blank">CycleTracker period tracking web app</a> and view the <a href="https://github.com/mdn/pwa-examples/tree/main/cycletracker/service_workers" class="external" target="_blank">web app source code</a> on GitHub. Yes, it works, and it is now, officially, a PWA!</p></div></section><section aria-labelledby="debugging_service_workers"><h2 id="debugging_service_workers"><a href="#debugging_service_workers">Debugging service workers</a></h2><div class="section-content"><p>Because of the way we have set up the service worker, once it is registered, every request will pull from the cache instead of loading new content. When developing, you will be editing your code frequently. You likely want to test your edits in the browser regularly; likely with every save.</p></div></section><section aria-labelledby="by_updating_the_version_number_and_doing_a_hard_reset"><h3 id="by_updating_the_version_number_and_doing_a_hard_reset"><a href="#by_updating_the_version_number_and_doing_a_hard_reset">By updating the version number and doing a hard reset</a></h3><div class="section-content"><p>To get a new cache, you can change the <a href="#version-number">version number</a> and then do a hard browser refresh. The way you do a hard refresh depends on the browser and operating system:</p>
<ul>
  <li>On Windows: Ctrl+F5, Shift+F5, or Ctrl+Shift+R.</li>
  <li>On MacOS: Shift+Command+R.</li>
  <li>Safari on MacOS: Option+Command+E to empty the cache, then Option+Command+R.</li>
  <li>On Mobile: Go to the browser (Android) or operating system (Samsung, iOS) settings, under advanced setting find the browser (iOS) or website data (Android, Samsung) site settings, and delete the data for CycleTracker, before reloading the page.</li>
</ul></div></section><section aria-labelledby="with_developer_tools"><h3 id="with_developer_tools"><a href="#with_developer_tools">With developer tools</a></h3><div class="section-content"><p>You likely don't want to update the version number with every save. Until you are ready to launch a new version of your PWA to production and give everyone a new version of your PWA, instead of changing the version number on save, you can unregister the service worker.</p>
<p>You can unregister a service worker by clicking on the <code>unregister</code> button in the <a href="/en-US/docs/Learn/Common_questions/Tools_and_setup/What_are_browser_developer_tools">browser developer tools</a>. Hard refreshing the page will re-register the service worker and create a new cache.</p>
<p>
  <img src="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/firefox_sw.jpg" alt="Firefox developer tools application panel with a stopped service worker and an unregister button" width="563" height="829" loading="lazy">
</p>
<p>In some developer tools, you can manually unregister a service worker, or you can select the service workers "update on reload" option which sets the developer tools to reset and re-activate the service worker on every reload as long as the developer tools are open. There is also an option to bypass the service worker and load resources from the network. This panel includes features we are not covering in this tutorial, but will be helpful as you create more advanced PWAs that include <a href="/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation#periodic_background_sync">syncing</a> and <a href="/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation#push">push</a>, which are both covered in the <a href="/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation">offline and background operation guide</a>.</p>
<p>
  <img src="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/edge_sw.jpg" alt="Edge developer tools showing the application panel set to a service worker" width="853" height="1013" loading="lazy">
</p>
<p>The service worker window within the DevTools' application panel, provides a link to access to pop up window containing a list of all the registered service workers for the browser; not just the service worker for the application opened in the current tab. Each service worker list of workers has buttons to stop, start, or unregister that individual service worker.</p>
<p>
  <img src="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/edge_sw_list.jpg" alt="Two service workers exist at localhost:8080. The can be be unregistered from the list of service workers" width="568" height="948" loading="lazy">
</p>
<p>In other words, as you are working on your PWA, you don't have to update the version number for every app view. But remember, when you are done with all your changes, update the service worker VERSION value before distributing the updated version of your PWA. If you forget, no one who has already installed your app or even visited your online PWA without installing it will ever get to see your changes!</p></div></section><section aria-labelledby="were_done!"><h2 id="were_done!"><a href="#were_done!">We're done!</a></h2><div class="section-content"><p>At its core, a PWA is a web application that can be installed and that is progressively enhanced to work offline. We created a fully functional web application. We then added the two features - a manifest file and a service worker - required to convert it to a PWA. If you want to share your app with others, make it available via a secure connection. Alternatively, if you just want to use the cycle tracker yourself, <a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Secure_connection">create a local development environment</a>, <a href="/en-US/docs/Web/Progressive_web_apps/Guides/Installing">install the PWA</a>, and enjoy! Once installed, you no longer need to run localhost.</p>
<p>Congratulations!</p><ul class="prev-next">
    <li><a class="button secondary" href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Manifest_file"><span class="button-wrap"> Previous </span></a></li>
    <li><a class="button secondary" href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker"><span class="button-wrap"> Overview: CycleTracker</span></a></li>
    
</ul></div></section><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a content problem with this page?</h3><ul><li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/progressive_web_apps/tutorials/cycletracker/service_workers/index.md" title="This will take you to GitHub, where you&#x27;ll need to sign in first." target="_blank" rel="noopener noreferrer">Edit the page on GitHub</a>.</li><li><a href="https://github.com/mdn/content/issues/new?template=page-report.yml&amp;mdn-url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FProgressive_web_apps%2FTutorials%2FCycleTracker%2FService_workers&amp;metadata=%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EPage+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fprogressive_web_apps%2Ftutorials%2Fcycletracker%2Fservice_workers%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FProgressive_web_apps%2FTutorials%2FCycleTracker%2FService_workers%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fprogressive_web_apps%2Ftutorials%2Fcycletracker%2Fservice_workers%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F64004c6e412ab23aed39aa70fabd6bea926a61f8%0A*+Document+last+modified%3A+2023-12-05T09%3A25%3A34.000Z%0A%0A%3C%2Fdetails%3E" title="This will take you to GitHub to file a new issue." target="_blank" rel="noopener noreferrer">Report the content issue</a>.</li><li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/progressive_web_apps/tutorials/cycletracker/service_workers/index.md?plain=1" title="Folder: en-us/web/progressive_web_apps/tutorials/cycletracker/service_workers (Opens in a new tab)" target="_blank" rel="noopener noreferrer">View the source on GitHub</a>.</li></ul>Want to get more involved?<!-- --> <a href="https://github.com/mdn/content/blob/main/CONTRIBUTING.md" title="This will take you to our contribution guidelines on GitHub." target="_blank" rel="noopener noreferrer">Learn how to contribute</a>.</div><p class="last-modified-date">This page was last modified on<!-- --> <time dateTime="2023-12-05T09:25:34.000Z">Dec 5, 2023</time> by<!-- --> <a href="/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/contributors.txt">MDN contributors</a>.</p></div></aside></article></main></div></div><footer id="nav-footer" class="page-footer"><div class="page-footer-grid"><div class="page-footer-logo-col"><a href="/" class="mdn-footer-logo" aria-label="MDN homepage"><svg width="48" height="17" viewBox="0 0 48 17" fill="none" xmlns="http://www.w3.org/2000/svg"><title id="mdn-footer-logo-svg">MDN logo</title><path d="M20.04 16.512H15.504V10.416C15.504 9.488 15.344 8.824 15.024 8.424C14.72 8.024 14.264 7.824 13.656 7.824C12.92 7.824 12.384 8.064 12.048 8.544C11.728 9.024 11.568 9.64 11.568 10.392V14.184H13.008V16.512H8.472V10.416C8.472 9.488 8.312 8.824 7.992 8.424C7.688 8.024 7.232 7.824 6.624 7.824C5.872 7.824 5.336 8.064 5.016 8.544C4.696 9.024 4.536 9.64 4.536 10.392V14.184H6.6V16.512H0V14.184H1.44V8.04H0.024V5.688H4.536V7.32C5.224 6.088 6.32 5.472 7.824 5.472C8.608 5.472 9.328 5.664 9.984 6.048C10.64 6.432 11.096 7.016 11.352 7.8C11.992 6.248 13.168 5.472 14.88 5.472C15.856 5.472 16.72 5.776 17.472 6.384C18.224 6.992 18.6 7.936 18.6 9.216V14.184H20.04V16.512Z" fill="currentColor"></path><path d="M33.6714 16.512H29.1354V14.496C28.8314 15.12 28.3834 15.656 27.7914 16.104C27.1994 16.536 26.4154 16.752 25.4394 16.752C24.0154 16.752 22.8954 16.264 22.0794 15.288C21.2634 14.312 20.8554 12.984 20.8554 11.304C20.8554 9.688 21.2554 8.312 22.0554 7.176C22.8554 6.04 24.0634 5.472 25.6794 5.472C26.5594 5.472 27.2794 5.648 27.8394 6C28.3994 6.352 28.8314 6.8 29.1354 7.344V2.352H26.9754V0H32.2314V14.184H33.6714V16.512ZM29.1354 11.04V10.776C29.1354 9.88 28.8954 9.184 28.4154 8.688C27.9514 8.176 27.3674 7.92 26.6634 7.92C25.9754 7.92 25.3674 8.176 24.8394 8.688C24.3274 9.2 24.0714 10.008 24.0714 11.112C24.0714 12.152 24.3114 12.944 24.7914 13.488C25.2714 14.032 25.8394 14.304 26.4954 14.304C27.3114 14.304 27.9514 13.96 28.4154 13.272C28.8954 12.584 29.1354 11.84 29.1354 11.04Z" fill="currentColor"></path><path d="M47.9589 16.512H41.9829V14.184H43.4229V10.416C43.4229 9.488 43.2629 8.824 42.9429 8.424C42.6389 8.024 42.1829 7.824 41.5749 7.824C40.8389 7.824 40.2709 8.056 39.8709 8.52C39.4709 8.968 39.2629 9.56 39.2469 10.296V14.184H40.6869V16.512H34.7109V14.184H36.1509V8.04H34.5909V5.688H39.2469V7.344C39.9669 6.096 41.1269 5.472 42.7269 5.472C43.7509 5.472 44.6389 5.776 45.3909 6.384C46.1429 6.992 46.5189 7.936 46.5189 9.216V14.184H47.9589V16.512Z" fill="currentColor"></path></svg></a><p>Your blueprint for a better internet.</p><ul class="social-icons"><li><a class="icon icon-mastodon" href="https://mozilla.social/@mdn" target="_blank" rel="me noopener noreferrer"><span class="visually-hidden">MDN on Mastodon</span></a></li><li><a class="icon icon-twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="icon icon-github-mark-small" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on GitHub</span></a></li><li><a class="icon icon-feed" href="/en-US/blog/rss.xml" target="_blank"><span class="visually-hidden">MDN Blog RSS Feed</span></a></li></ul></div><div class="page-footer-nav-col-1"><h2 class="footer-nav-heading">MDN</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a href="/en-US/about">About</a></li><li class="footer-nav-item"><a href="/en-US/blog/">Blog</a></li><li class="footer-nav-item"><a href="https://www.mozilla.org/en-US/careers/listings/?team=ProdOps" target="_blank" rel="noopener noreferrer">Careers</a></li><li class="footer-nav-item"><a href="/en-US/advertising">Advertise with us</a></li></ul></div><div class="page-footer-nav-col-2"><h2 class="footer-nav-heading">Support</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/MDN/Community/Issues">Report an issue</a></li></ul></div><div class="page-footer-nav-col-3"><h2 class="footer-nav-heading">Our communities</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/community">MDN Community</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="https://discourse.mozilla.org/c/mdn/236" target="_blank" rel="noopener noreferrer">MDN Forum</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="/discord" target="_blank" rel="noopener noreferrer">MDN Chat</a></li></ul></div><div class="page-footer-nav-col-4"><h2 class="footer-nav-heading">Developers</h2><ul class="footer-nav-list"><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/Web">Web Technologies</a></li><li class="footer-nav-item"><a class="footer-nav-link" href="/en-US/docs/Learn">Learn Web Development</a></li><li class="footer-nav-item"><a href="https://hacks.mozilla.org/" target="_blank" rel="noopener noreferrer">Hacks Blog</a></li></ul></div><div class="page-footer-moz"><a href="https://www.mozilla.org/" class="footer-moz-logo-link" target="_blank" rel="noopener noreferrer"><svg width="112" height="32" fill="none" xmlns="http://www.w3.org/2000/svg"><title id="mozilla-footer-logo-svg">Mozilla logo</title><path d="M41.753 14.218c-2.048 0-3.324 1.522-3.324 4.157 0 2.423 1.119 4.286 3.29 4.286 2.082 0 3.447-1.678 3.447-4.347 0-2.826-1.522-4.096-3.413-4.096Zm54.89 7.044c0 .901.437 1.618 1.645 1.618 1.427 0 2.949-1.024 3.044-3.352-.649-.095-1.365-.185-2.02-.185-1.426-.005-2.668.397-2.668 1.92Z" fill="currentColor"></path><path d="M0 0v32h111.908V0H0Zm32.56 25.426h-5.87v-7.884c0-2.423-.806-3.352-2.39-3.352-1.924 0-2.702 1.365-2.702 3.324v4.868h1.864v3.044h-5.864v-7.884c0-2.423-.806-3.352-2.39-3.352-1.924 0-2.702 1.365-2.702 3.324v4.868h2.669v3.044H6.642v-3.044h1.863v-7.918H6.642V11.42h5.864v2.11c.839-1.489 2.3-2.39 4.252-2.39 2.02 0 3.878.963 4.566 3.01.778-1.862 2.361-3.01 4.566-3.01 2.512 0 4.812 1.522 4.812 4.84v6.402h1.863v3.044h-.005Zm9.036.307c-4.314 0-7.296-2.635-7.296-7.106 0-4.096 2.484-7.481 7.514-7.481s7.481 3.38 7.481 7.29c0 4.472-3.228 7.297-7.699 7.297Zm22.578-.307H51.942l-.403-2.11 7.7-8.846h-4.376l-.621 2.17-2.888-.313.498-4.907h12.294l.313 2.11-7.767 8.852h4.533l.654-2.172 3.167.308-.872 4.908Zm7.99 0h-4.191v-5.03h4.19v5.03Zm0-8.976h-4.191v-5.03h4.19v5.03Zm2.618 8.976 6.054-21.358h3.945l-6.054 21.358h-3.945Zm8.136 0 6.048-21.358h3.945l-6.054 21.358h-3.939Zm21.486.307c-1.863 0-2.887-1.085-3.072-2.792-.805 1.427-2.232 2.792-4.498 2.792-2.02 0-4.314-1.085-4.314-4.006 0-3.447 3.323-4.253 6.518-4.253.778 0 1.584.034 2.3.124v-.465c0-1.427-.034-3.133-2.3-3.133-.84 0-1.488.061-2.143.402l-.453 1.578-3.195-.34.549-3.224c2.45-.996 3.692-1.27 5.992-1.27 3.01 0 5.556 1.55 5.556 4.75v6.083c0 .805.314 1.085.963 1.085.184 0 .375-.034.587-.095l.034 2.11a5.432 5.432 0 0 1-2.524.654Z" fill="currentColor"></path></svg></a><ul class="footer-moz-list"><li class="footer-moz-item"><a href="https://www.mozilla.org/privacy/websites/" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Website Privacy Notice</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/privacy/websites/#cookies" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Cookies</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/about/legal/terms/mozilla" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Legal</a></li><li class="footer-moz-item"><a href="https://www.mozilla.org/about/governance/policies/participation/" class="footer-moz-link" target="_blank" rel="noopener noreferrer">Community Participation Guidelines</a></li></ul></div><div class="page-footer-legal"><p id="license" class="page-footer-legal-text">Visit<!-- --> <a href="https://www.mozilla.org" target="_blank" rel="noopener noreferrer">Mozilla Corporation’s</a> <!-- -->not-for-profit parent, the<!-- --> <a target="_blank" rel="noopener noreferrer" href="https://foundation.mozilla.org/">Mozilla Foundation</a>.<br/>Portions of this content are ©1998–<!-- -->2023<!-- --> by individual mozilla.org contributors. Content available under<!-- --> <a href="/en-US/docs/MDN/Writing_guidelines/Attrib_copyright_license">a Creative Commons license</a>.</p></div></div></footer></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"CycleTracker: Service workers","mdn_url":"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><a href=\"/en-US/docs/Web/Progressive_web_apps\"><strong>Progressive web apps</strong></a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides\"><strong>Guides</strong></a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/What_is_a_progressive_web_app\">What is a progressive web app?</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Installing\">Installing and uninstalling web apps</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Making_PWAs_installable\">Making PWAs installable</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation\">Offline and background operation</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Caching\">Caching</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Best_practices\">Best practices for PWAs</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials\"><strong>Tutorials</strong></a></li><li><ol><li><details open=\"\"><summary>CycleTracker</summary><ol><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker\">CycleTracker</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/HTML_and_CSS\">Base HTML and CSS</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Secure_connection\">Secure connection</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/JavaScript_functionality\">JavaScript functionality</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Manifest_file\">Manifest and iconography</a></li><li><em><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers\" aria-current=\"page\">Service workers</a></em></li></ol></details></li></ol></li><li><ol><li><details><summary>js13kGames</summary><ol><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames\">js13kGames</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/App_structure\">Progressive web app structure</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Offline_Service_workers\">Making PWAs work offline with Service workers</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Installable_PWAs\">How to make PWAs installable</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Re-engageable_Notifications_Push\">How to make PWAs re-engageable using Notifications and Push</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Loading\">Progressive loading</a></li></ol></details></li></ol></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to\"><strong>How to</strong></a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Trigger_install_prompt\">Trigger installation from your PWA</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Define_app_icons\">Define your app icons</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Create_a_standalone_app\">Create a standalone app</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Customize_your_app_colors\">Customize your app's theme and background colors</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Display_badge_on_app_icon\">Display a badge on the app icon</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Expose_common_actions_as_shortcuts\">Expose common app actions as shortcuts</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Share_data_between_apps\">Share data between apps</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/How_to/Associate_files_with_your_PWA\">Associate files with your PWA</a></li><li><a href=\"/en-US/docs/Web/Progressive_web_apps/Reference\"><strong>Reference</strong></a></li></ol>","sidebarMacro":"PWASidebar","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<ul class=\"prev-next\">\n    <li><a class=\"button secondary\" href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Manifest_file\"><span class=\"button-wrap\"> Previous </span></a></li>\n    <li><a class=\"button secondary\" href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker\"><span class=\"button-wrap\"> Overview: CycleTracker</span></a></li>\n    \n</ul>\n<p>Thus far, we've written the HTML, CSS, and JavaScript for CycleTracker. We added a manifest file defining colors, icons, URL, and other app features. We have a working web app! But it isn't yet a PWA. In this section, we will write the JavaScript required to convert our fully functional web application into a PWA that can be distributed as a standalone app and works seamlessly offline.</p>\n<p>If you haven't already done so, copy the <a href=\"https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/index.html\" class=\"external\" target=\"_blank\">HTML</a>, <a href=\"https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/style.css\" class=\"external\" target=\"_blank\">CSS</a>, <a href=\"https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/app.js\" class=\"external\" target=\"_blank\">JavaScript</a>, and <a href=\"https://github.com/mdn/pwa-examples/tree/main/cycletracker/manifest_file/cycletracker.json\" class=\"external\" target=\"_blank\">manifest</a> JSON file. Save them to files called <code>index.html</code>, <code>style.css</code>, <code>app.js</code>, and <code>cycletracker.json</code>, respectively.</p>\n<p>In this section, we are creating <code>sw.js</code>, the service worker script, that will convert our Web App into a PWA. We already have one JavaScript file; the last line in the HTML file calls the <code>app.js</code>. This JavaScript provides all the functionality for the standard web application features. Instead of calling the <code>sw.js</code> file like we did the <code>app.js</code> file with the <code>src</code> attribute of <a href=\"/en-US/docs/Web/HTML/Element/script\"><code>&lt;script&gt;</code></a>, we will create a relationship between the web app and its service worker by registering the service worker.</p>\n<p>At the end of this lesson, you will have a fully functional PWA; a progressively enhanced web application that is fully installable that works even when the user is offline.</p>"}},{"type":"prose","value":{"id":"service_worker_responsibilities","title":"Service worker responsibilities","isH3":false,"content":"<p>The service worker is what makes the application work offline while making sure the application is always up to date. To do this well, the service worker should include the following:</p>\n<ul>\n  <li>Version number (or other identifier).</li>\n  <li>List of resources to cache.</li>\n  <li>Cache version name.</li>\n</ul>\n<p>The service worker is also responsible for:</p>\n<ul>\n  <li>Installing the cache when the app is installed.</li>\n  <li>Updating itself and the other application file as needed.</li>\n  <li>Removing cached files that are no longer used.</li>\n</ul>\n<p>We achieve these tasks by reacting to three service worker events, including the</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/fetch_event\"><code>fetch</code></a>,</li>\n  <li><a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event\"><code>install</code></a>, and</li>\n  <li><a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event\"><code>activate</code></a> events.</li>\n</ul>"}},{"type":"prose","value":{"id":"version_number","title":"Version number","isH3":true,"content":"<p>Once the PWA is installed on the user's machine, the only way to inform the browser that there are updated files to be retrieved is for there to be a change in the service worker. If a change is made to any other PWA resource — if the HTML is updated, a bug is fixed in the CSS, a function is added to <code>app.js</code>, an image is compressed to reduce the file save, etc. — the service worker of your installed PWA will not know it needs to download updated resources. Only when the service worker is altered in any way, will the PWA know it may be time to update the cache; which is the service worker's task to initiate.</p>\n<p>While changing any character may technically suffice, a PWA best practice is to create a version number constant that gets updated sequentially to indicate an update to the file. Updating a version number (or date), provides an official edit to the service worker even if nothing else is changed in the service worker itself and provides developers with a way of identifying app versions.</p>\n<h4 id=\"task\">Task</h4>\n<p>Start a JavaScript file by including a version number:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">VERSION</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"v1\"</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Save the file as <code>sw.js</code></p>"}},{"type":"prose","value":{"id":"offline_resource_list","title":"Offline resource list","isH3":true,"content":"<p>For a good offline experience, the list of cached files should include all the resources used within the PWA's offline experience. While the manifest file may have a multitude of icons listed in various sizes, the application cache only needs to include the assets used by the app in offline mode.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">APP_STATIC_RESOURCES</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/index.html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/style.css\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/app.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/icon-512x512.png\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>You don't need to include the various icons that are used by all the different operating systems and devices in the list. But do include any images that are used within the app, including assets to used within any splash pages that may be visible if the app is slow as the app loads or used in any \"you need to connect to the internet for the full experience\" type pages.</p>\n<p>Do not include the service worker file in the list of resources to be cached.</p>\n<h4 id=\"task_2\">Task</h4>\n<p>Add the list of resources to be cached for the CycleTracker PWA to <code>sw.js</code>.</p>\n<h4 id=\"example_solution\">Example solution</h4>\n<p>We include the static resources created in other sections of this tutorial that CycleTracker needs to function when offline. Our current <code>sw.js</code> file is:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">VERSION</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"v1\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">APP_STATIC_RESOURCES</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/index.html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/style.css\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/app.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/cycletrack.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/icons/wheel.svg\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We included the <code>wheel.svg</code> icon, even though our current application doesn't use it, in case you are enhancing the PWA UI, such as displaying the logo when there is no period data.</p>"}},{"type":"prose","value":{"id":"application_cache_name","title":"Application cache name","isH3":true,"content":"<p>We have a version number and we have the files that need to be cached. Before caching the files, we need to create a name of the cache that will be used to store the app's static resources. This cache name should be versioned to ensure that when the app is updated, a new cache will be created and the old one will be deleted.</p>\n<h4 id=\"task_3\">Task</h4>\n<p>Use the <code>VERSION</code> number to create a versioned <code>CACHE_NAME</code>, adding it as a constant to <code>sw.js</code>.</p>\n<h4 id=\"example_solution_2\">Example solution</h4>\n<p>We name our cache <code>period-tracker-</code> with the current <code>VERSION</code> appended. As the constant declaration is on a single line, we put it before the array of resources constant for better legibility.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">VERSION</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"v1\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CACHE_NAME</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">period-tracker-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">VERSION</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">APP_STATIC_RESOURCES</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We have successfully declared our constants; a unique identifier, the list of offline resources as an array, and the application's cache name that changes every time the identifier is updated. Now let's focus on installing, updating, and deleting unused cached resources.</p>"}},{"type":"prose","value":{"id":"saving_the_cache_on_pwa_installation","title":"Saving the cache on PWA installation","isH3":true,"content":"<p>When a user installs a PWA or simply visits a website with a service worker, an <code>install</code> event is fired in the service worker scope. We want to listen for this event, filling the cache with the PWA's static resources upon installation. Every time the service worker version is updated, the browser installs the new service worker and the install event occurs.</p>\n<p>The <code>install</code> event happens when the app is used for the first time, or when a new version of the service worker is detected by the browser. When an older service worker is being replaced by a new one, the old service worker is used as the PWA's service worker until the new service work is activated.</p>\n<p>Only available in secure contexts, the <a href=\"/en-US/docs/Web/API/caches\"><code>caches</code></a> global property returns a <a href=\"/en-US/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a> object associated with the current context. The <a href=\"/en-US/docs/Web/API/CacheStorage/open\"><code>CacheStorage.open()</code></a> method returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves to the <a href=\"/en-US/docs/Web/API/Cache\"><code>Cache</code></a> object matching name of the cache, passed as a parameter.</p>\n<p>The <a href=\"/en-US/docs/Web/API/Cache/addAll\"><code>Cache.addAll()</code></a> method takes an array of URLs as a parameter, retrieves them, then adds the responses to the given cache. The <a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\"><code>waitUntil()</code></a> method tells the browser that work is ongoing until the promise settles, and it shouldn't terminate the service worker if it wants that work to complete. While browsers are responsible for executing and terminating service workers when necessary, the <code>waitUntil</code> method is a request to the browser to not terminate the service worker while a task is being executed.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"install\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cacheName_identifier\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cache<span class=\"token punctuation\">.</span><span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"/index.html\"</span>\n        <span class=\"token string\">\"/style.css\"</span>\n        <span class=\"token string\">\"/app.js\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"task_4\">Task</h4>\n<p>Add an install event listener that retrieves and stores the files listed in <code>APP_STATIC_RESOURCES</code> into the cache named <code>CACHE_NAME</code>.</p>\n<h4 id=\"example_solution_3\">Example solution</h4>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"install\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cache<span class=\"token punctuation\">.</span><span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span><span class=\"token constant\">APP_STATIC_RESOURCES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"updating_the_pwa_and_deleting_old_caches","title":"Updating the PWA and deleting old caches","isH3":true,"content":"<p>As mentioned, when an existing service worker is being replaced by a new one, the existing service worker is used as the PWA's service worker until the new service worker is activated. We use the <code>activate</code> event to delete old caches to avoid running out of space. We iterate over named <a href=\"/en-US/docs/Web/API/Cache\"><code>Cache</code></a> objects, deleting all but the current one, and then set the service worker as the <a href=\"/en-US/docs/Web/API/ServiceWorkerContainer/controller\"><code>controller</code></a> for the PWA.</p>\n<p>We listen for the current service worker's global scope <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event\"><code>activate</code></a> event.</p>\n<p>We get the names of the existing named caches. We use the <a href=\"/en-US/docs/Web/API/CacheStorage/keys\"><code>CacheStorage.keys()</code></a> method (again accessing <code>CacheStorage</code> through the global <a href=\"/en-US/docs/Web/API/caches\"><code>caches</code></a> property) which returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves with an array containing strings corresponding to all of the named <a href=\"/en-US/docs/Web/API/Cache\"><code>Cache</code></a> objects in the order they were created.</p>\n<p>We use the <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\"><code>Promise.all()</code></a> method to iterate through that list of name cache promises. The <code>all()</code> method takes as input a list of iterable promises and returns a single <code>Promise</code>. For each name in the list of named caches, check if the cache is the currently active cache. If not, delete it with the <code>Cache</code> <a href=\"/en-US/docs/Web/API/Cache/delete\"><code>delete()</code></a> method.</p>\n<p>The last line, the <code>await clients.claim()</code> uses the <a href=\"/en-US/docs/Web/API/Clients/claim\"><code>claim()</code></a> method of the <a href=\"/en-US/docs/Web/API/Clients\"><code>Clients</code></a> interface to enable our service worker to set itself as the controller for our client; the \"client\" referring to a running instance of the PWA. The <code>claim()</code> method enables the service worker to \"claim control\" of all clients within its scope. This way, clients loaded in the same scope don't need to be reloaded.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"activate\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> names <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>\n        names<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">!==</span> <span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">await</span> clients<span class=\"token punctuation\">.</span><span class=\"token function\">claim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"task_5\">Task</h4>\n<p>Add the above <code>activate</code> eventListener to your <code>sw.js</code> file.</p>"}},{"type":"prose","value":{"id":"the_fetch_event","title":"The fetch event","isH3":true,"content":"<p>We can take advantage of the <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/fetch_event\"><code>fetch</code></a> event, to prevent an installed PWA from making requests if the user is online. Listening to the fetch event makes it possible to intercept all requests and respond with cached responses instead of going to the network. Most applications don't require this behavior. In fact, many business models want users to regularly make server requests for tracking and marketing purposes. So, while intercepting requests may be an anti-pattern for some, to improve the privacy of our CycleTracker app, we don't want the app to make unnecessary server requests.</p>\n<p>As our PWA consists of a single page, for page navigation requests, we go back to the <code>index.html</code> home page. There are no other pages and we don't ever want to go to the server. If the Fetch API's <a href=\"/en-US/docs/Web/API/Request\"><code>Request</code></a> readonly <a href=\"/en-US/docs/Web/API/Request/mode\"><code>mode</code></a> property is <code>navigate</code>, meaning it's looking for a web page, we use the FetchEvent's <a href=\"/en-US/docs/Web/API/FetchEvent/respondWith\"><code>respondWith()</code></a> method to prevent the browser's default fetch handling, providing our own response promise employing the <a href=\"/en-US/docs/Web/API/CacheStorage/match\"><code>caches.match()</code></a> method.</p>\n<p>For all other request modes, we open the caches as done in the <a href=\"#saving-the-cache-on-pwa-installation\">install event response</a>, instead passing the event request to the same <code>match()</code> method. It checks if the request is a key for a stored <a href=\"/en-US/docs/Web/API/Response\"><code>Response</code></a>. If yes, it returns the cached response. If not, we return a <a href=\"/en-US/docs/Web/HTTP/Status/404\">404 status</a> as a response.</p>\n<p>Using the <a href=\"/en-US/docs/Web/API/Response/Response\"><code>Response()</code></a> constructor to pass a <code>null</code> body and a <code>status: 404</code> as options, doesn't mean there is an error in our PWA. Rather, everything we need should already be in the cache, and if it isn't, we're not going to the server to resolve this non-issue.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code>self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// when seeking an HTML page</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">\"navigate\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Return to the index.html page</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// For every other request type</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> cachedResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Return the cached response if it's available.</span>\n        <span class=\"token keyword\">return</span> cachedResponse<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// Respond with a HTTP 404 response status.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"complete_service_worker_file","title":"Complete service worker file","isH3":false,"content":"<p>Your <code>sw.js</code> file should look similar to the following JavaScript. Note that when updating any of the resources listed in the <code>APP_STATIC_RESOURCES</code> array, the only constant or function that must be updated within this service worker is the value of <code>VERSION</code>.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// The version of the cache.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">VERSION</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"v1\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The name of the cache</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CACHE_NAME</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">period-tracker-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">VERSION</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The static resources that the app needs to function.</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">APP_STATIC_RESOURCES</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/index.html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/app.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/style.css\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"/icons/wheel.svg\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// On install, cache the static resources</span>\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"install\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      cache<span class=\"token punctuation\">.</span><span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span><span class=\"token constant\">APP_STATIC_RESOURCES</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// delete old caches on activate</span>\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"activate\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> names <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>\n        names<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">!==</span> <span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">await</span> clients<span class=\"token punctuation\">.</span><span class=\"token function\">claim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// On fetch, intercept server requests</span>\n<span class=\"token comment\">// and respond with cached responses instead of going to network</span>\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// As a single page app, direct app to always go to cached home page.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">\"navigate\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// For all other requests, go to the cache first, and then the network.</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> cachedResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Return the cached response if it's available.</span>\n        <span class=\"token keyword\">return</span> cachedResponse<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// If resource isn't in the cache, return a 404.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>When updating a service worker, the VERSION constant doesn't need to be updated, as any change in the content of the service worker script itself will trigger the browser to install the new service worker. However, it is a good practice to update the version number as it makes it easier for devs, including yourself, to see which version of the service worker is currently running in the browser, by <a href=\"#with_developer_tools\">checking the name of the Cache in the Application tool</a> (or Sources tool).</p>\n<p><strong>Note:</strong> Updating VERSION is important when making changes to any application resource, including the CSS, HTML, and JS code, and image assets. The version number, or any change to the service worker file, is the only way to force an update of the app for your users.</p>"}},{"type":"prose","value":{"id":"register_the_service_worker","title":"Register the service worker","isH3":false,"content":"<p>Now that our service worker script is complete, we need to register the service worker.</p>\n<p>We start by checking that the browser supports the <a href=\"/en-US/docs/Web/API/Service_Worker_API\">Service Worker API</a> by using <a href=\"/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection#the_concept_of_feature_detection\">feature detection</a> for the presence of the <a href=\"/en-US/docs/Web/API/ServiceWorker\"><code>serviceWorker</code></a> property on the global <a href=\"/en-US/docs/Web/API/Navigator\"><code>navigator</code></a> object:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token comment\">// Does \"serviceWorker\" exist</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"serviceWorker\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If yes, we register the service worker</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>If the property is supported, we can then use the <a href=\"/en-US/docs/Web/API/ServiceWorkerContainer/register\"><code>register()</code></a> method of the service worker API's <a href=\"/en-US/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a> interface.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"serviceWorker\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Register the app's service worker</span>\n    <span class=\"token comment\">// Passing the filename where that worker is defined.</span>\n    navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sw.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>While the above suffices for the CycleTracker app needs, the <code>register()</code> method does return a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves with a <a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a> object. For a more robust application, error check the registration:</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">js</span></p><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"serviceWorker\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sw.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">registration</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Service worker registration successful:\"</span><span class=\"token punctuation\">,</span> registration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Service worker registration failed: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Service workers are not supported.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"task_6","title":"Task","isH3":true,"content":"<p>Open <code>index.html</code> and add the following <a href=\"/en-US/docs/Web/HTML/Element/script\"><code>&lt;script&gt;</code></a> after the script to include <code>app.js</code> and before the closing <code>&lt;/body&gt;</code> tag.</p>\n<div class=\"code-example\"><p class=\"example-header\"><span class=\"language-name\">html</span></p><pre class=\"brush: html notranslate\"><code><span class=\"token comment\">&lt;!-- Register the app's service worker. --&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"serviceWorker\"</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sw.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>You can try the fully functioning <a href=\"https://mdn.github.io/pwa-examples/cycletracker/service_workers\" class=\"external\" target=\"_blank\">CycleTracker period tracking web app</a> and view the <a href=\"https://github.com/mdn/pwa-examples/tree/main/cycletracker/service_workers\" class=\"external\" target=\"_blank\">web app source code</a> on GitHub. Yes, it works, and it is now, officially, a PWA!</p>"}},{"type":"prose","value":{"id":"debugging_service_workers","title":"Debugging service workers","isH3":false,"content":"<p>Because of the way we have set up the service worker, once it is registered, every request will pull from the cache instead of loading new content. When developing, you will be editing your code frequently. You likely want to test your edits in the browser regularly; likely with every save.</p>"}},{"type":"prose","value":{"id":"by_updating_the_version_number_and_doing_a_hard_reset","title":"By updating the version number and doing a hard reset","isH3":true,"content":"<p>To get a new cache, you can change the <a href=\"#version-number\">version number</a> and then do a hard browser refresh. The way you do a hard refresh depends on the browser and operating system:</p>\n<ul>\n  <li>On Windows: Ctrl+F5, Shift+F5, or Ctrl+Shift+R.</li>\n  <li>On MacOS: Shift+Command+R.</li>\n  <li>Safari on MacOS: Option+Command+E to empty the cache, then Option+Command+R.</li>\n  <li>On Mobile: Go to the browser (Android) or operating system (Samsung, iOS) settings, under advanced setting find the browser (iOS) or website data (Android, Samsung) site settings, and delete the data for CycleTracker, before reloading the page.</li>\n</ul>"}},{"type":"prose","value":{"id":"with_developer_tools","title":"With developer tools","isH3":true,"content":"<p>You likely don't want to update the version number with every save. Until you are ready to launch a new version of your PWA to production and give everyone a new version of your PWA, instead of changing the version number on save, you can unregister the service worker.</p>\n<p>You can unregister a service worker by clicking on the <code>unregister</code> button in the <a href=\"/en-US/docs/Learn/Common_questions/Tools_and_setup/What_are_browser_developer_tools\">browser developer tools</a>. Hard refreshing the page will re-register the service worker and create a new cache.</p>\n<p>\n  <img src=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/firefox_sw.jpg\" alt=\"Firefox developer tools application panel with a stopped service worker and an unregister button\" width=\"563\" height=\"829\" loading=\"lazy\">\n</p>\n<p>In some developer tools, you can manually unregister a service worker, or you can select the service workers \"update on reload\" option which sets the developer tools to reset and re-activate the service worker on every reload as long as the developer tools are open. There is also an option to bypass the service worker and load resources from the network. This panel includes features we are not covering in this tutorial, but will be helpful as you create more advanced PWAs that include <a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation#periodic_background_sync\">syncing</a> and <a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation#push\">push</a>, which are both covered in the <a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Offline_and_background_operation\">offline and background operation guide</a>.</p>\n<p>\n  <img src=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/edge_sw.jpg\" alt=\"Edge developer tools showing the application panel set to a service worker\" width=\"853\" height=\"1013\" loading=\"lazy\">\n</p>\n<p>The service worker window within the DevTools' application panel, provides a link to access to pop up window containing a list of all the registered service workers for the browser; not just the service worker for the application opened in the current tab. Each service worker list of workers has buttons to stop, start, or unregister that individual service worker.</p>\n<p>\n  <img src=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers/edge_sw_list.jpg\" alt=\"Two service workers exist at localhost:8080. The can be be unregistered from the list of service workers\" width=\"568\" height=\"948\" loading=\"lazy\">\n</p>\n<p>In other words, as you are working on your PWA, you don't have to update the version number for every app view. But remember, when you are done with all your changes, update the service worker VERSION value before distributing the updated version of your PWA. If you forget, no one who has already installed your app or even visited your online PWA without installing it will ever get to see your changes!</p>"}},{"type":"prose","value":{"id":"were_done!","title":"We're done!","isH3":false,"content":"<p>At its core, a PWA is a web application that can be installed and that is progressively enhanced to work offline. We created a fully functional web application. We then added the two features - a manifest file and a service worker - required to convert it to a PWA. If you want to share your app with others, make it available via a secure connection. Alternatively, if you just want to use the cycle tracker yourself, <a href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Secure_connection\">create a local development environment</a>, <a href=\"/en-US/docs/Web/Progressive_web_apps/Guides/Installing\">install the PWA</a>, and enjoy! Once installed, you no longer need to run localhost.</p>\n<p>Congratulations!</p><ul class=\"prev-next\">\n    <li><a class=\"button secondary\" href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Manifest_file\"><span class=\"button-wrap\"> Previous </span></a></li>\n    <li><a class=\"button secondary\" href=\"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker\"><span class=\"button-wrap\"> Overview: CycleTracker</span></a></li>\n    \n</ul>"}}],"toc":[{"text":"Service worker responsibilities","id":"service_worker_responsibilities"},{"text":"Complete service worker file","id":"complete_service_worker_file"},{"text":"Register the service worker","id":"register_the_service_worker"},{"text":"Debugging service workers","id":"debugging_service_workers"},{"text":"We're done!","id":"were_done!"}],"summary":"Thus far, we've written the HTML, CSS, and JavaScript for CycleTracker. We added a manifest file defining colors, icons, URL, and other app features. We have a working web app! But it isn't yet a PWA. In this section, we will write the JavaScript required to convert our fully functional web application into a PWA that can be distributed as a standalone app and works seamlessly offline.","popularity":0.0027,"modified":"2023-12-05T09:25:34.000Z","source":{"folder":"en-us/web/progressive_web_apps/tutorials/cycletracker/service_workers","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/progressive_web_apps/tutorials/cycletracker/service_workers/index.md","last_commit_url":"https://github.com/mdn/content/commit/64004c6e412ab23aed39aa70fabd6bea926a61f8","filename":"index.md"},"short_title":"Service workers","parents":[{"uri":"/en-US/docs/Web","title":"References"},{"uri":"/en-US/docs/Web/Progressive_web_apps","title":"Progressive web apps"},{"uri":"/en-US/docs/Web/Progressive_web_apps/Tutorials","title":"Tutorials"},{"uri":"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker","title":"CycleTracker"},{"uri":"/en-US/docs/Web/Progressive_web_apps/Tutorials/CycleTracker/Service_workers","title":"Service workers"}],"pageTitle":"CycleTracker: Service workers - Progressive web apps | MDN","noIndexing":false}}</script></body></html>