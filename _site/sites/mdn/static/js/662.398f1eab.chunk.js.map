{"version":3,"file":"static/js/662.398f1eab.chunk.js","mappings":"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","sources":["sitemap/index.tsx"],"sourcesContent":["import React from \"react\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport useSWR from \"swr\";\n\nimport { WRITER_MODE, WRITER_MODE_HOSTNAMES } from \"../env\";\nimport { useLocale } from \"../hooks\";\nimport { Loading } from \"../ui/atoms/loading\";\nimport { MainContentContainer } from \"../ui/atoms/page-content\";\n\nimport \"./index.scss\";\nimport NoteCard from \"../ui/molecules/notecards\";\n\ninterface SearchIndexDoc {\n  url: string;\n  title: string;\n}\n\nexport default function Sitemap() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const locale = useLocale();\n\n  // Because you can load this app with something like `/en-us/_sitemap/Web/`\n  // we have to pretend that didn't happen and force it to be `/en-US/_sitemap/Web`\n  const pathname = location.pathname.endsWith(\"/\")\n    ? location.pathname.slice(0, -1)\n    : location.pathname;\n\n  // `pathname` is going to be something like `/en-US/_sitemap/Web/Foo`.\n  // Transform that to be just `en-us/docs/web/foo`.\n  const searchPathname = pathname\n    .replace(`/${locale}/_sitemap`, `/${locale}/docs`)\n    .toLowerCase();\n\n  React.useEffect(() => {\n    document.title = \"Sitemap\";\n  }, []);\n\n  const { data, error } = useSWR<SearchIndexDoc[] | null, Error | null>(\n    `/${locale}/search-index.json`,\n    async (url) => {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`${response.status} on ${response.url}`);\n      }\n      return (await response.json()) as SearchIndexDoc[];\n    },\n    {\n      revalidateOnFocus: false,\n    }\n  );\n\n  const [docs, setDocs] = React.useState<SearchIndexDoc[] | null>(null);\n  React.useEffect(() => {\n    if (data) {\n      const theseDocs = [...data].sort((a, b) => a.url.localeCompare(b.url));\n      setDocs(theseDocs);\n    }\n  }, [data]);\n\n  const [childCounts, setChildCounts] = React.useState<Map<string, number>>(\n    new Map()\n  );\n  React.useEffect(() => {\n    const counts = new Map<string, number>();\n    if (docs) {\n      for (const { url } of docs) {\n        const split = url.split(\"/\");\n        const root = split.slice(0, 3);\n        split.slice(3).forEach((portion, i) => {\n          root.push(portion);\n          const key = root.join(\"/\");\n          counts.set(key, (counts.get(key) || 0) + 1);\n        });\n      }\n      setChildCounts(counts);\n    }\n  }, [docs]);\n\n  const [thisDoc, setThisDoc] = React.useState<SearchIndexDoc | null>(null);\n  React.useEffect(() => {\n    if (docs) {\n      const newThisDoc = docs.find((doc) => {\n        return doc.url.toLowerCase() === searchPathname;\n      });\n      setThisDoc(newThisDoc || null);\n    }\n  }, [searchPathname, docs]);\n\n  const [searchFilter, setSearchFilter] = React.useState(\"\");\n  React.useEffect(() => {\n    setSearchFilter(\"\");\n  }, [pathname]);\n  const [searchSubmitted, setSearchSubmitted] = React.useState(false);\n\n  const [filtered, setFiltered] = React.useState<SearchIndexDoc[] | null>(null);\n  React.useEffect(() => {\n    if (docs) {\n      const depth = searchPathname.split(\"/\").length;\n      const newFiltered = docs.filter((doc) => {\n        if (\n          doc.url.toLowerCase().startsWith(searchPathname) &&\n          depth + 1 === doc.url.split(\"/\").length\n        ) {\n          const baseName = doc.url.split(\"/\").slice(-1)[0].toLowerCase();\n          if (!baseName.startsWith(searchFilter.toLowerCase())) {\n            return false;\n          }\n          return true;\n        }\n        return false;\n      });\n      setFiltered(newFiltered);\n    }\n  }, [searchPathname, docs, searchFilter]);\n\n  const [highlightIndex, setHighlightIndex] = React.useState(0);\n  React.useEffect(() => {\n    setHighlightIndex(0);\n  }, [searchFilter]);\n\n  React.useEffect(() => {\n    if (searchSubmitted) {\n      if (filtered && filtered.length >= 1) {\n        const slug = filtered[highlightIndex].url.split(\"/\").slice(3);\n        setSearchFilter(\"\");\n        setSearchSubmitted(false);\n        navigate(`/${locale}/_sitemap/${slug.join(\"/\")}`);\n      }\n    }\n  }, [locale, filtered, searchSubmitted, navigate, highlightIndex]);\n\n  function changeHighlight(direction: \"up\" | \"down\") {\n    if (direction === \"up\") {\n      let nextNumber = highlightIndex - 1;\n      if (filtered) {\n        nextNumber =\n          ((nextNumber % filtered.length) + filtered.length) % filtered.length;\n      }\n      setHighlightIndex(nextNumber);\n    } else {\n      let nextNumber = highlightIndex + 1;\n      if (filtered) {\n        nextNumber = nextNumber % filtered.length;\n      }\n      setHighlightIndex(nextNumber);\n    }\n  }\n\n  const [opening, setOpening] = React.useState<string | null>(null);\n  const [editorOpeningError, setEditorOpeningError] =\n    React.useState<Error | null>(null);\n  React.useEffect(() => {\n    let unsetOpeningTimer: ReturnType<typeof setTimeout>;\n    if (opening) {\n      unsetOpeningTimer = setTimeout(() => {\n        setOpening(null);\n      }, 3000);\n    }\n    return () => {\n      if (unsetOpeningTimer) {\n        clearTimeout(unsetOpeningTimer);\n      }\n    };\n  }, [opening]);\n\n  async function openInYourEditor(url: string) {\n    console.log(`Going to try to open ${url} in your editor`);\n    setOpening(url);\n    const sp = new URLSearchParams();\n    sp.set(\"url\", url);\n    try {\n      const response = await fetch(`/_open?${sp.toString()}`);\n      if (!response.ok) {\n        if (response.status >= 500) {\n          setEditorOpeningError(\n            new Error(`${response.status}: ${response.statusText}`)\n          );\n        } else {\n          const body = await response.text();\n          setEditorOpeningError(new Error(`${response.status}: ${body}`));\n        }\n      }\n    } catch (err: any) {\n      setEditorOpeningError(err);\n    }\n  }\n\n  return (\n    <MainContentContainer>\n      <div id=\"sitemap\">\n        {error && (\n          <NoteCard type=\"error\">\n            <h4>Error</h4>\n            <p>\n              <code>{error.toString()}</code>\n            </p>\n          </NoteCard>\n        )}\n\n        {editorOpeningError && (\n          <NoteCard type=\"error\">\n            <h4>Error opening in your editor</h4>\n            <p>\n              <code>{editorOpeningError.toString()}</code>\n            </p>\n          </NoteCard>\n        )}\n\n        {!data && !error && <Loading />}\n        <div className=\"opening-in-your-editor\">\n          {opening && (\n            <>\n              Opening{\" \"}\n              <code>{opening.slice(opening.length - 50, opening.length)}</code>{\" \"}\n              in your editor...\n            </>\n          )}\n        </div>\n        {filtered && (\n          <Breadcrumb\n            pathname={pathname}\n            thisDoc={thisDoc}\n            openInYourEditor={openInYourEditor}\n          />\n        )}\n        {filtered && (\n          <FilterForm\n            pathname={pathname}\n            searchFilter={searchFilter}\n            onUpdate={(text: string, submitted: boolean) => {\n              setSearchFilter(text);\n              setSearchSubmitted(submitted);\n            }}\n            onGoUp={() => {\n              // Navigate to the parent! ...if possible\n              const split = pathname.split(\"/\");\n              if (split.length >= 4) {\n                const parentPathname = split.slice(0, -1);\n                navigate(parentPathname.join(\"/\"));\n              }\n            }}\n            onChangeHighlight={changeHighlight}\n          />\n        )}\n        {filtered &&\n          filtered.length === 0 &&\n          (searchFilter ? (\n            <em>nothing found</em>\n          ) : (\n            <em>has no further sub-documents</em>\n          ))}\n        {filtered && !searchFilter && <GoBackUp pathname={pathname} />}\n        {filtered && filtered.length > 0 && (\n          <ShowTree\n            filtered={filtered}\n            childCounts={childCounts}\n            highlightIndex={highlightIndex}\n            openInYourEditor={openInYourEditor}\n          />\n        )}\n        <p className=\"footer-note\">\n          Note, this sitemap only shows documents. Not any other applications.\n        </p>\n      </div>\n    </MainContentContainer>\n  );\n}\n\nfunction GoBackUp({ pathname }: { pathname: string }) {\n  const parentPath = pathname.split(\"/\").slice(0, -1);\n  if (parentPath.length <= 2) {\n    return null;\n  }\n  const parentBasename = parentPath[parentPath.length - 1];\n\n  return (\n    <p>\n      <Link to={parentPath.join(\"/\")}>\n        ↖️ Back up to{\" \"}\n        {parentPath.length <= 3 ? <em>root</em> : <code>{parentBasename}</code>}\n      </Link>\n    </p>\n  );\n}\n\nfunction FilterForm({\n  pathname,\n  searchFilter,\n  onUpdate,\n  onGoUp,\n  onChangeHighlight,\n}: {\n  pathname: string;\n  searchFilter: string;\n  onUpdate: (text: string, submitted: boolean) => void;\n  onGoUp: () => void;\n  onChangeHighlight: (s: \"up\" | \"down\") => void;\n}) {\n  const [hideTip, setHideTip] = React.useState(false);\n\n  const [countBackspaces, setCountBackspaces] = React.useState(0);\n  React.useEffect(() => {\n    if (countBackspaces >= 2) {\n      setCountBackspaces(0);\n      onGoUp();\n    }\n  }, [countBackspaces, onGoUp]);\n\n  const inputRef = React.useRef<null | HTMLInputElement>(null);\n\n  const focusSearch = React.useCallback(\n    (event: KeyboardEvent) => {\n      if (inputRef.current && event.target) {\n        const target = event.target as HTMLElement;\n\n        if (target === inputRef.current) {\n          if (event.key === \"ArrowDown\") {\n            onChangeHighlight(\"down\");\n          } else if (event.key === \"ArrowUp\") {\n            onChangeHighlight(\"up\");\n          }\n        }\n\n        if (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\") {\n          if (event.key === \"Backspace\" && event.target === inputRef.current) {\n            if (!searchFilter.trim()) {\n              setCountBackspaces((s) => s + 1);\n            }\n          } else {\n            setCountBackspaces(0);\n          }\n\n          if (event.key === \"Escape\") {\n            inputRef.current.blur();\n          }\n        } else {\n          if (event.key === \"T\" || event.key === \"t\") {\n            inputRef.current.focus();\n            setCountBackspaces(0);\n          }\n        }\n      }\n    },\n    [onChangeHighlight, searchFilter]\n  );\n\n  React.useEffect(() => {\n    window.document.addEventListener(\"keyup\", focusSearch);\n    return () => {\n      window.document.removeEventListener(\"keyup\", focusSearch);\n    };\n  }, [focusSearch]);\n  const prefixPathname = pathname.replace(`/_sitemap`, \"/docs\");\n\n  return (\n    <form\n      className=\"filter-form\"\n      onSubmit={(event) => {\n        event.preventDefault();\n        onUpdate(searchFilter.trim(), true);\n      }}\n    >\n      <code>{prefixPathname}</code>/\n      <input\n        type=\"search\"\n        ref={inputRef}\n        value={searchFilter}\n        onChange={(event) => {\n          onUpdate(event.target.value, false);\n        }}\n        onFocus={() => {\n          setHideTip(true);\n        }}\n        onBlur={() => {\n          setHideTip(false);\n        }}\n      />{\" \"}\n      {!hideTip && (\n        <small className=\"keyboard-tip\">\n          Tip! press <kbd>t</kbd> on your keyboard to focus on search filter\n        </small>\n      )}\n    </form>\n  );\n}\n\nfunction Breadcrumb({\n  pathname,\n  thisDoc,\n  openInYourEditor,\n}: {\n  pathname: string;\n  thisDoc: SearchIndexDoc | null;\n  openInYourEditor: (url: string) => void;\n}) {\n  const locale = useLocale();\n  const split = pathname.split(\"/\").slice(3);\n  const root = pathname.split(\"/\").slice(0, 2);\n  root.push(\"_sitemap\");\n\n  const isReadOnly = !WRITER_MODE_HOSTNAMES.includes(window.location.hostname);\n\n  return (\n    <>\n      <ul className=\"breadcrumb\">\n        <li className=\"first\">\n          {split.length ? <Link to={root.join(\"/\")}>root</Link> : <em>root</em>}\n        </li>\n        {split.map((portion, i) => {\n          const last = i === split.length - 1;\n          root.push(portion);\n          return (\n            <li key={`${portion}${i}`} className={last ? \"last\" : undefined}>\n              {last ? (\n                <code>{portion}</code>\n              ) : (\n                <Link to={root.join(\"/\")}>\n                  <code>{portion}</code>\n                </Link>\n              )}\n            </li>\n          );\n        })}\n        <li className=\"this-doc\">\n          <b>Go to:</b>{\" \"}\n          {thisDoc ? (\n            <>\n              <Link to={thisDoc.url}>\n                <em>{thisDoc.title}</em>\n              </Link>{\" \"}\n              {WRITER_MODE && !isReadOnly && (\n                <small>\n                  (\n                  <a\n                    href={thisDoc.url}\n                    role=\"img\"\n                    aria-label=\"Editor pen\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      openInYourEditor(thisDoc.url);\n                    }}\n                    title=\"Open in your editor\"\n                  >\n                    Edit\n                  </a>\n                  )\n                </small>\n              )}\n            </>\n          ) : (\n            <Link to={`/${locale}/`}>Home page</Link>\n          )}\n        </li>\n      </ul>\n    </>\n  );\n}\n\nfunction ShowTree({\n  filtered,\n  childCounts,\n  highlightIndex,\n  openInYourEditor,\n}: {\n  filtered: SearchIndexDoc[];\n  childCounts: Map<string, number>;\n  highlightIndex: number;\n  openInYourEditor: (url: string) => void;\n}) {\n  const locale = useLocale();\n  const isReadOnly = !WRITER_MODE_HOSTNAMES.includes(window.location.hostname);\n  return (\n    <div className=\"tree\">\n      <ul>\n        {filtered.map((doc, i) => {\n          const countChild = childCounts.get(doc.url) || 0;\n          return (\n            <li\n              key={doc.url}\n              className={highlightIndex === i ? \"highlight\" : undefined}\n            >\n              <Link\n                to={doc.url.replace(\"/docs/\", \"/_sitemap/\")}\n                title={doc.title}\n              >\n                <code>{doc.url.replace(`/${locale}/docs`, \"\")}</code>\n              </Link>{\" \"}\n              <small>\n                (\n                {countChild === 1\n                  ? \"1 document\"\n                  : `${countChild.toLocaleString()} documents`}\n                {\" | \"}\n                <Link to={doc.url} title={`Go to: ${doc.title}`}>\n                  View\n                </Link>\n                {!isReadOnly && \" | \"}\n                {!isReadOnly && (\n                  <Link\n                    to={doc.url}\n                    title={`Edit: ${doc.title}`}\n                    onClick={(event) => {\n                      event.preventDefault();\n                      openInYourEditor(doc.url);\n                    }}\n                  >\n                    Edit\n                  </Link>\n                )}\n                )\n              </small>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n"],"names":["Sitemap","location","useLocation","navigate","useNavigate","locale","useLocale","pathname","endsWith","slice","searchPathname","replace","concat","toLowerCase","React","document","title","data","error","useSWR","async","response","fetch","url","ok","Error","status","json","revalidateOnFocus","docs","setDocs","theseDocs","sort","a","b","localeCompare","childCounts","setChildCounts","Map","counts","split","root","forEach","portion","i","push","key","join","set","get","thisDoc","setThisDoc","newThisDoc","find","doc","searchFilter","setSearchFilter","searchSubmitted","setSearchSubmitted","filtered","setFiltered","depth","length","newFiltered","filter","startsWith","highlightIndex","setHighlightIndex","slug","opening","setOpening","editorOpeningError","setEditorOpeningError","openInYourEditor","console","log","sp","URLSearchParams","toString","statusText","body","text","err","unsetOpeningTimer","setTimeout","clearTimeout","_jsx","MainContentContainer","children","_jsxs","id","NoteCard","type","Loading","className","_Fragment","Breadcrumb","FilterForm","onUpdate","submitted","onGoUp","parentPathname","onChangeHighlight","direction","nextNumber","GoBackUp","ShowTree","_ref","parentPath","parentBasename","Link","to","_ref2","hideTip","setHideTip","countBackspaces","setCountBackspaces","inputRef","focusSearch","event","current","target","tagName","trim","s","blur","focus","window","addEventListener","removeEventListener","prefixPathname","onSubmit","preventDefault","ref","value","onChange","onFocus","onBlur","_ref3","isReadOnly","WRITER_MODE_HOSTNAMES","includes","hostname","map","last","undefined","WRITER_MODE","href","role","onClick","_ref4","countChild","toLocaleString"],"sourceRoot":""}