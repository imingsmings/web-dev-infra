"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[57],{8057:(e,l,s)=>{s.r(l),s.d(l,{default:()=>z});var n=s(6167),t=s(1369),i=s(358),r=s(5897),c=s(7798),a=s(5610),o=s(5523),d=s(2974),h=s(4001),x=s(7557),j=s(9312),u=s(3950),m=s(5105),p=s(2205),v=s(3384),f=s(1646),N=s.n(f),y=s(8208),w=s.n(y),S=s(621),C=s(3493),g=s(7579),k=s(7878);function _(){const{collectionId:e}=(0,c.UO)(),{data:l,error:s}=(0,a.Kx)(e),{data:n,error:r,isLoading:d,size:j,setSize:m,atEnd:p,mutate:f}=(0,a.Ce)(e);(0,h.ZY)();const N="Default"===(null===l||void 0===l?void 0:l.name)?"Saved Articles":null===l||void 0===l?void 0:l.name;document.title="".concat(N||"Collections"," | ").concat(v.SP);const y="Default"===(null===l||void 0===l?void 0:l.name)?"The default collection.":null===l||void 0===l?void 0:l.description;return l?(0,k.jsxs)("div",{className:"collections collections-collection",children:[(0,k.jsx)("header",{children:(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(o.rU,{to:"../",className:"exit",children:"\u2190 Back"}),(0,k.jsx)("h1",{children:N}),(0,k.jsxs)("span",{className:"count",children:[l.article_count," ",1===l.article_count?"article":"articles"]}),y&&(0,k.jsx)("p",{children:y})]})}),(0,k.jsxs)(t.Z,{children:[(null===n||void 0===n?void 0:n.flat(1).map((e=>(0,k.jsx)(b,{item:e,mutate:f},e.id))))||d&&(0,k.jsx)(x.g,{}),!p&&(0,k.jsx)("div",{className:"pagination",children:(0,k.jsx)(i.z,{type:"primary",onClickHandler:()=>{m(j+1)},isDisabled:d,children:d?"Loading...":r?"Error (try again)":"Show more"})})]})]}):(0,k.jsxs)("div",{className:"collections collections-collection",children:[(0,k.jsx)("header",{children:(0,k.jsx)(t.Z,{children:(0,k.jsx)(o.rU,{to:"../",className:"exit",children:"\u2190 Back"})})}),(0,k.jsx)(t.Z,{children:s?(0,k.jsxs)(u.Z,{type:"error",children:[(0,k.jsx)("h4",{children:"Error"}),(0,k.jsx)("p",{children:s.message}),(0,k.jsx)(i.z,{href:"../",type:"secondary",children:"Go Back"})]}):(0,k.jsx)(x.g,{})})]})}function E(){let[e,l]=(0,n.useState)(0),[s,r]=(0,n.useState)(!1),c=(0,S.Ap)(10,e,r);return(0,h.ZY)(),(0,k.jsxs)("div",{className:"collections collections-collection",children:[(0,k.jsx)("header",{children:(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(o.rU,{to:"../",className:"exit",children:"\u2190 Back"}),(0,k.jsx)("h1",{children:c.name}),(0,k.jsxs)("span",{className:"count",children:[c.article_count," ",1===c.article_count?"article":"articles"]}),(0,k.jsx)("p",{children:c.description})]})}),(0,k.jsxs)(t.Z,{children:[c.items.map((e=>(0,k.jsx)(b,{addNoteEnabled:!1,item:e},e.id))),!s&&(0,k.jsx)("div",{className:"pagination",children:(0,k.jsx)(i.z,{type:"primary",onClickHandler:()=>{l(e+10)},children:"Show more"})})]})]})}function b(e){var l;let{addNoteEnabled:s=!0,item:t,mutate:r}=e;const[c,a]=(0,n.useState)(),[x,u]=(0,n.useState)(),v=(0,h.bU)(),f=(0,C.dY)();(0,n.useEffect)((()=>{const e=t.notes&&(0,j.$R)(t.notes,0,180);a(e),u(e)}),[t.notes]);const N=t.parents.slice(0,-1).map((e=>(0,j.mr)(e.title))).filter(((e,l,s)=>e!==s[l+1])),y=e=>{const l=e.currentTarget.closest("article");[null===l||void 0===l?void 0:l.querySelector(".article-actions-toggle"),null===l||void 0===l?void 0:l.querySelector(".bookmark-button")].forEach((e=>{if(e instanceof HTMLElement){if("none"===getComputedStyle(e).display)return;e.click()}}))},{data:w}=(0,d.ZP)("".concat(t.url,"/metadata.json"),(async e=>{const l=await fetch(e);if(!l.ok)throw Error(l.statusText);return await l.json()}),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),S=(0,j.w8)(t.url);return(0,k.jsxs)("article",{className:S?"category-".concat(S):void 0,children:[(0,k.jsxs)("header",{children:[(0,k.jsx)("h2",{children:(0,k.jsx)(o.rU,{to:t.url,children:(0,j.mr)(t.title)})}),(0,k.jsx)(p.Y,{doc:w,showTranslations:!1,item:"collection_id"in t?t:void 0,scopedMutator:r})]}),(0,k.jsx)("div",{className:"breadcrumbs",children:N.join(" > ")}),w&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:w.summary}),(0,k.jsxs)("aside",{children:[(0,k.jsx)(m.Op,{value:w.modified,locale:v}),","," ",(0,k.jsx)(m.IY,{url:t.url})]})]}),x?(0,k.jsxs)("div",{className:"note",children:[(0,k.jsx)("div",{children:w&&(0,k.jsx)(i.z,{icon:"edit",type:"action",onClickHandler:e=>(f(g.wH.ACTIONS_NOTE_EDIT),y(e)),children:(0,k.jsx)("span",{className:"visually-hidden",children:"Edit note"})})}),(0,k.jsxs)("div",{className:"text",children:[(0,k.jsx)("p",{className:null!==(l=t.notes)&&void 0!==l&&l.includes("{")?"code":"",children:x.trimEnd()}),c!==t.notes&&(x!==t.notes?(0,k.jsxs)(k.Fragment,{children:["\u2026 ",(0,k.jsx)(i.z,{type:"link",onClickHandler:()=>u(t.notes),children:"See full note"})]}):(0,k.jsxs)(k.Fragment,{children:[" ",(0,k.jsx)(i.z,{type:"link",onClickHandler:()=>u(c),children:"Show less"})]}))]})]}):w&&s?(0,k.jsx)(i.z,{extraClasses:"add-note",icon:"edit",type:"action",onClickHandler:e=>(f(g.wH.ACTIONS_NOTE_ADD),y(e)),children:"Add note"}):null]},t.url)}N().extend(w());var O=s(1569),D=s(6288),H=s(3797),T=s(4441);N().extend(w());const Z={revalidateOnFocus:!1,revalidateIfStale:!1};function z(){return(0,k.jsx)(d.J$,{value:Z,children:(0,k.jsxs)(c.Z5,{children:[(0,k.jsx)(c.AW,{path:"/",element:(0,k.jsx)(A,{})}),(0,k.jsx)(c.AW,{path:"frequently-viewed",element:(0,k.jsx)(E,{})}),(0,k.jsx)(c.AW,{path:":collectionId",element:(0,k.jsx)(_,{})})]})})}function A(){document.title="Collections | ".concat(v.SP);const{data:e,isLoading:l,error:s}=(0,a.bX)(),[c,o]=(0,n.useState)(!1),d=(0,C.dY)();let h=null===e||void 0===e?void 0:e.map((e=>(0,k.jsx)(I,{collection:e},e.id)));const j=(0,k.jsx)(L,{},"frequently-viewed");return h&&j&&h.splice(1,0,j),(0,k.jsxs)("div",{className:"collections collections-overview",children:[(0,k.jsx)("header",{className:"plus-header-mandala",children:(0,k.jsxs)(t.Z,{children:[(0,k.jsxs)("h1",{children:[(0,k.jsxs)("div",{className:"mandala-icon-wrapper",children:[(0,k.jsx)(H.Z,{}),(0,k.jsx)(T.J,{name:"bookmark-filled"})]}),(0,k.jsx)("span",{children:"Collections"})]}),(0,k.jsxs)("p",{children:["Save and group your favorite MDN articles to easily find them later on.",(0,k.jsx)("br",{}),(0,k.jsx)("a",{rel:"noreferrer noopener",target:"_blank",href:"https://survey.alchemer.com/s3/6988450/Feature-Preview-User-Feedback-Multiple-Collections",children:"We'd love to hear your feedback!"})]}),(0,k.jsx)(i.z,{onClickHandler:()=>{d(g.wH.BANNER_NEW),o(!0)},isDisabled:l,children:"New Collection"}),(0,k.jsx)(r.Z,{show:c,setShow:o,source:g.wH.NEW_MODAL_SUBMIT_COLLECTIONS_PAGE})]})}),(0,k.jsx)(t.Z,{children:l?(0,k.jsx)(x.g,{}):e?h:s?(0,k.jsxs)(u.Z,{type:"error",children:[(0,k.jsx)("h4",{children:"Error"}),(0,k.jsx)("p",{children:s.message})]}):"Create a new collection..."})]})}function I(e){let{collection:l}=e;const[s,t]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),{mutator:m,error:p,resetError:v,isPending:f}=(0,a.xV)(),y=async e=>{e.preventDefault(),f||(v(),x(!1))};return"Default"===l.name?(0,k.jsx)(U,{collection:l}):(0,k.jsxs)("article",{children:[(0,k.jsxs)("header",{children:[(0,k.jsx)("h2",{children:(0,k.jsx)(o.rU,{to:l.id,children:(0,j.mr)(l.name)})}),"Default"!==l.name?(0,k.jsxs)(O.T,{className:"dropdown is-flush-right",isOpen:s,setIsOpen:t,children:[(0,k.jsx)(i.z,{type:"action",icon:"ellipses","aria-controls":"collection-dropdown","aria-haspopup":"menu","aria-expanded":s||void 0,onClickHandler:()=>{t(!s)}}),(0,k.jsx)(O.h,{children:(0,k.jsxs)("ul",{className:"dropdown-list",id:"collection-dropdown",children:[(0,k.jsx)("li",{className:"dropdown-item",children:(0,k.jsx)(i.z,{type:"action",title:"Edit",onClickHandler:()=>{d(!0),t(!1)},children:"Edit"})}),(0,k.jsx)("li",{className:"dropdown-item",children:(0,k.jsx)(i.z,{type:"action",title:"Delete",onClickHandler:()=>{x(!0),t(!1)},children:"Delete"})})]})})]}):null,(0,k.jsx)(r.Z,{editingCollection:l,show:c,setShow:d,source:g.wH.NEW_MODAL_SUBMIT_COLLECTIONS_PAGE}),(0,k.jsxs)(D.Z,{isOpen:h,size:"small",onRequestClose:y,extraOverlayClassName:f?"wait":"",children:[(0,k.jsxs)("header",{className:"modal-header",children:[(0,k.jsx)("h2",{className:"modal-heading",children:"Delete collection"}),(0,k.jsx)(i.z,{onClickHandler:y,type:"action",icon:"cancel",extraClasses:"close-button"})]}),(0,k.jsxs)("div",{className:"modal-body",children:[p&&(0,k.jsx)(u.Z,{type:"error",children:(0,k.jsxs)("p",{children:["Error: ",p.message]})}),(0,k.jsxs)("p",{children:['Are you sure you want to delete your collection "',l.name,'"?']}),(0,k.jsxs)("div",{className:"mdn-form-item is-button-row",children:[(0,k.jsx)(i.z,{onClickHandler:async e=>{e.preventDefault(),f||(await m(l),x(!1))},isDisabled:f,children:f?"Deleting...":"Delete"}),(0,k.jsx)(i.z,{onClickHandler:y,type:"secondary",isDisabled:f,children:"Cancel"})]})]})]})]}),l.description&&(0,k.jsx)("p",{children:(0,j.mr)(l.description)}),(0,k.jsxs)("footer",{children:[(0,k.jsxs)(o.rU,{to:l.id,className:"count",children:[l.article_count," ",1===l.article_count?"article":"articles"]}),(0,k.jsxs)("time",{dateTime:N()(l.updated_at).toISOString(),children:["Edited ",N()(l.updated_at).fromNow().toString()]})]})]},l.id)}function U(e){let{collection:l}=e;return(0,k.jsxs)("article",{className:"default",children:[(0,k.jsx)("header",{children:(0,k.jsx)("h2",{children:(0,k.jsx)(o.rU,{to:l.id,children:"Saved Articles"})})}),(0,k.jsx)("p",{children:"The default collection."}),(0,k.jsxs)("footer",{children:[(0,k.jsxs)(o.rU,{to:l.id,className:"count",children:[l.article_count," ",1===l.article_count?"article":"articles"]}),(0,k.jsxs)("time",{dateTime:N()(l.updated_at).toISOString(),children:["Edited ",N()(l.updated_at).fromNow().toString()]})]})]},l.id)}function L(){const e=(0,S.Ap)();return e.items.length?(0,k.jsxs)("article",{className:"default",children:[(0,k.jsx)("header",{children:(0,k.jsx)("h2",{children:(0,k.jsx)(o.rU,{to:"frequently-viewed",children:e.name})})}),(0,k.jsx)("p",{children:e.description}),(0,k.jsxs)("footer",{children:[(0,k.jsxs)(o.rU,{to:"frequently-viewed",className:"count",children:[e.article_count," ",1===e.article_count?"article":"articles"]}),(0,k.jsxs)("time",{dateTime:N()(e.updated_at).toISOString(),children:["Updated ",N()(e.updated_at).fromNow().toString()]})]})]},e.name):null}}}]);
//# sourceMappingURL=57.c9adad8f.chunk.js.map