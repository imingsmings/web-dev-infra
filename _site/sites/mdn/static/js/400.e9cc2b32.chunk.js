"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[400],{5400:(e,t,s)=>{s.r(t),s.d(t,{AIHelpInner:()=>O,RoleIcon:()=>W,default:()=>_});var n=s(3147),a=s.n(n),r=s(6167),o=s(3023),i=s(5038),l=s(5102),c=s(2974);let u=function(e){return e.User="user",e.Assistant="assistant",e}({}),d=function(e){return e.Pending="pending",e.InProgress="in-progress",e.Complete="complete",e.Stopped="stopped",e}({});function h(e,t){let s=[...e];const{type:n}=t,a=e.length-1;switch(n){case"new":{const{message:e}=t;s.push(e);break}case"update":{const{message:n}=t;s[a]={...e[a],...n};break}case"append-content":{const{content:n}=t;s[a]={...e[a],content:e[a].content+n};break}case"set-sources":{const{sources:n}=t;s[a]={...e[a],sources:n};break}case"reset":s=[];break;default:throw new Error("Unknown message action '".concat(n,"'"))}return s}class p{static get value(){var e;return JSON.parse(null!==(e=window.localStorage.getItem(this.KEY))&&void 0!==e?e:"{}")}static mutate(e){window.localStorage.setItem(this.KEY,JSON.stringify({...this.value,...e}))}static getMessages(){var e,t;return null!==(e=null===(t=this.value)||void 0===t?void 0:t.messages)&&void 0!==e?e:[]}static setMessages(e){this.mutate({messages:e})}}p.KEY="ai-help";var m=s(7579),f=s(8242),g=s(119),x=s(7878);function j(){return(0,x.jsx)(g.U,{gleanPrefix:m.RD,children:"Want to use AI Help?"})}function v(e){let{limit:t}=e;return(0,x.jsxs)("div",{className:"login-banner",children:[(0,x.jsxs)("span",{children:[(0,x.jsxs)("span",{children:["You have reached the limit of ",t," questions per day."]}),(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[(0,x.jsx)("strong",{children:"Want to ask more?"})," Upgrade to MDN Plus 5 or MDN Supporter 10."]})]}),(0,x.jsx)("ul",{className:"auth-container",children:(0,x.jsx)("li",{children:(0,x.jsx)(f.D,{gleanContext:"".concat(m.RD,": upsell-button"),toPlans:!0})})})]})}var w=s(6441),y=s(1369),b=s(3384),N=s(4001),k=s(4441),S=s(3797),H=s(9002),I=s(358),C=s(3493);const L="thumbs";function T(){try{var e,t,s;return JSON.parse(null!==(e=null===(t=window)||void 0===t||null===(s=t.localStorage)||void 0===s?void 0:s.getItem(L))&&void 0!==e?e:"{}")}catch(n){return console.warn("Unable to read thumbs state to localStorage",n),{}}}function A(e){let{feature:t,question:s="Is this feature useful?",confirmation:n="Thank you for your feedback! \u2764\ufe0f",upLabel:a="This feature is useful.",downLabel:o="This feature is not useful.",permanent:i=!1}=e;const[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),h=(0,C.dY)();(0,r.useEffect)((()=>{c(!i&&function(e){try{return e in T()}catch(t){return!1}}(t))}),[t,i,c]);const p=e=>{h("".concat(m.Rt,": ").concat(t," -> ").concat("up"===e?1:0)),d(!0),i||function(e,t){try{var s,n;null===(s=window)||void 0===s||null===(n=s.localStorage)||void 0===n||n.setItem(L,JSON.stringify({...T(),[e]:{submitted_at:Date.now(),value:t}}))}catch(a){console.warn("Unable to write thumbs state to localStorage",a)}}(t,"up"===e)};return(0,x.jsx)(x.Fragment,{children:!l&&(0,x.jsx)("section",{className:"glean-thumbs",children:u?n&&(0,x.jsx)("span",{className:"confirmation",children:n}):(0,x.jsxs)(x.Fragment,{children:[s&&(0,x.jsx)("span",{className:"question",children:s}),(0,x.jsx)(R,{upLabel:a,downLabel:o,onThumbsUp:()=>p("up"),onThumbsDown:()=>p("down")})]})})})}function R(e){let{upLabel:t="Thumbs up",downLabel:s="Thumbs down",onThumbsUp:n,onThumbsDown:a,size:r}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.z,{type:"action",extraClasses:"thumbs",icon:"thumbs-up",size:r,onClickHandler:n,title:t,children:(0,x.jsx)("span",{className:"visually-hidden",children:t})}),(0,x.jsx)(I.z,{type:"action",extraClasses:"thumbs",icon:"thumbs-down",size:r,onClickHandler:a,title:s,children:(0,x.jsx)("span",{className:"visually-hidden",children:s})})]})}var q=s(3950),D=s(7557),M=s(7798);var P=s(6288),E=s(5965);const U=[{category:"css",query:"How to center a div with CSS?"},{category:"html",query:"How do I create a form in HTML?"},{category:"js",query:"How can I sort an Array in JavaScript?"},{category:"apis",query:"How can I use the Fetch API to make HTTP requests in JavaScript?"},{category:"http",query:"How can I redirect using HTTP?"},{category:"learn",query:"What are some accessibility best practices?"}];function _(){document.title="AI Help | ".concat(b.SP),(0,N.ZY)();const e=(0,w.v$)(),{setViewed:t}=(0,N.P9)();return(0,r.useEffect)((()=>t(b.tE.PLUS_AI_HELP))),(0,x.jsxs)("div",{className:"ai-help",children:[(0,x.jsx)("header",{className:"plus-header-mandala",children:(0,x.jsxs)(y.Z,{children:[(0,x.jsxs)("h1",{children:[(0,x.jsxs)("div",{className:"mandala-icon-wrapper",children:[(0,x.jsx)(S.Z,{}),(0,x.jsx)(k.J,{name:"chatgpt"})]}),(0,x.jsx)("span",{children:"AI Help"})]}),(0,x.jsxs)("p",{children:["Get answers using generative AI based on MDN content.",(0,x.jsx)("br",{}),(0,x.jsx)("a",{href:null!==e&&void 0!==e&&e.isAuthenticated?"https://survey.alchemer.com/s3/7418589/MDN-AI-Help-Feedback":"https://survey.alchemer.com/s3/7405739/MDN-AI-Help",target:"_blank",rel:"noreferrer noopener",className:"external",children:"We'd love to hear your feedback!"})]})]})}),(0,x.jsx)(y.Z,{children:(0,x.jsx)("div",{className:"notecard experimental",children:(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"This is a beta feature."}),(0,x.jsx)("br",{}),"May occasionally generate incorrect answers. Please always verify information independently.",(0,x.jsx)("br",{}),(0,x.jsx)("a",{href:"/en-US/blog/introducing-ai-help/",children:(0,x.jsx)("strong",{children:"Learn more"})})]})})}),(0,x.jsx)(y.Z,{children:null!==e&&void 0!==e&&e.isAuthenticated?(0,x.jsx)(O,{}):(0,x.jsx)(j,{})})]})}const z="Sorry, I don't know how to help with that.",J="Sorry, I don\u2019t know how to help with that.\n\nPlease keep in mind that I am only limited to answer based on the MDN documentation.";function O(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null),s=(0,r.useRef)(null),n=(0,r.useRef)(null),[f,g]=(0,r.useState)(""),[j,w]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),{hash:N}=(0,M.TH)(),k=(0,C.dY)(),{isLoading:S,isResponding:H,hasError:L,datas:T,messages:R,quota:E,reset:_,stop:O,submit:F}=function(){let{messageTemplate:e=(e=>e)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,r.useRef)(),[s,n]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[i,m]=(0,r.useState)(!1),[f,g]=(0,r.useReducer)(((e,t)=>null===t?[]:[...e,t]),[]),[x,j]=(0,r.useReducer)(h,void 0,(()=>p.getMessages())),[v,w]=(0,r.useState)(void 0),y=function(){const{data:e}=(0,c.ZP)("/api/v1/plus/ai/ask/quota",(async e=>{const t=await fetch(e);if(!t.ok){const s=await t.text();throw new Error("".concat(t.status," on ").concat(e,": ").concat(s))}return(await t.json()).quota}));return e}();(0,r.useEffect)((()=>{!s&&!a&&x.length>0&&p.setMessages(x)}),[s,a,x]),(0,r.useEffect)((()=>{void 0!==y&&w(y)}),[y]);const b=(0,r.useCallback)((e=>{n(!1),o(!1),m(!0),console.error(e)}),[]),N=(0,r.useCallback)((e=>{try{if(g(e),n(!1),j({type:"update",message:{status:d.InProgress}}),o(!0),"metadata"===e.type){const{sources:t,quota:s}=e;return Array.isArray(t)&&j({type:"set-sources",sources:t}),void("undefined"!==typeof s&&w(s))}if(!e.id)return void console.warn("Received unsupported message",{data:e});const t=e,[{delta:{content:s},finish_reason:a}]=t.choices;if(s&&j({type:"append-content",content:s}),a){"stop"!==a&&console.warn("Got unexpected finish_reason",{finish_reason:a});const e="stop"===a?d.Complete:d.Stopped;o(!1),j({type:"update",message:{status:e}})}}catch(t){b(t)}}),[b]);function k(){var e;null===(e=t.current)||void 0===e||e.close(),t.current=void 0,n(!1),o(!1),m(!1),g(null)}return{submit:(0,r.useCallback)((s=>{j({type:"new",message:{status:d.Complete,role:u.User,content:s}}),j({type:"new",message:{status:d.Pending,role:u.Assistant,content:""}}),o(!1),m(!1),n(!0);const a=x.filter((e=>{let{status:t}=e;return t===d.Complete})).map((e=>{let{role:t,content:s}=e;return{role:t,content:s}})).concat({role:u.User,content:e(s)}),r=new l.L("/api/v1/plus/ai/ask",{headers:{"Content-Type":"application/json"},withCredentials:!0,payload:JSON.stringify({messages:a})});r.addEventListener("error",b),r.addEventListener("message",(e=>{const t=JSON.parse(e.data);N(t)})),r.stream(),t.current=r,n(!0)}),[x,e,b,N]),datas:f,stop:function(){k(),j({type:"update",message:{status:d.Stopped}})},reset:function(){k(),j({type:"reset"})},messages:x,isLoading:s,isResponding:a,hasError:i,quota:v}}(),G=void 0===E,Z=!G&&null!==E,B=R.length>0;function K(e){return!!e&&e.remaining<=0}const{autoScroll:$,setAutoScroll:Q}=function(e,t){let{bodyRef:s,footerRef:n}=t;const[a,o]=(0,r.useState)(!0),i=(0,r.useRef)(0),l=(0,r.useRef)(0);return(0,r.useEffect)((()=>{var e,t;const r=null!==(e=s.current)&&void 0!==e?e:s.current=document.querySelector(".ai-help-body"),c=null!==(t=n.current)&&void 0!==t?t:n.current=document.querySelector(".ai-help-footer");if(!r||!c)return;window.setTimeout((()=>{const{offsetTop:e,offsetHeight:t}=r,s=e+t+c.offsetHeight-window.innerHeight,n=l.current<t&&i.current<s;l.current=t,i.current=window.scrollY,a&&n&&window.scrollTo(0,s)}));const u=()=>{const{offsetTop:e,offsetHeight:t}=r,{innerHeight:s,scrollY:n}=window,l=e+t+c.offsetHeight,u=n<=l&&l<=n+s,d=n-i.current;a&&d<0&&!u?o(!1):!a&&d>0&&u&&o(!0),i.current=n};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)}),[a,s,e,n]),{autoScroll:a,setAutoScroll:o}}(R,{bodyRef:s,footerRef:n});return(0,r.useEffect)((()=>{const e=t.current;e&&window.setTimeout((()=>e.focus()))}),[G,B]),G?(0,x.jsx)(D.g,{}):(0,x.jsxs)("section",{className:["ai-help-inner",f.trim()&&"has-input"].filter(Boolean).join(" "),children:[B&&(0,x.jsx)("div",{ref:s,className:"ai-help-body",children:(0,x.jsx)("ul",{className:"ai-help-messages",children:R.map(((e,t)=>(0,x.jsxs)("li",{className:["ai-help-message","role-".concat(e.role),"status-".concat(e.status)].join(" "),children:[(0,x.jsx)("div",{className:"ai-help-message-role",children:(0,x.jsx)(W,{role:e.role})}),(0,x.jsx)("div",{className:["ai-help-message-content",!e.content&&"empty"].filter(Boolean).join(" "),children:"user"===e.role?e.content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.U,{remarkPlugins:[i.Z],components:{a:e=>{var t;let{node:s,...n}=e;var a;return((a=null!==(t=n.href)&&void 0!==t?t:"").startsWith("//")||!a.startsWith("/"))&&(n={...n,className:"external",rel:"noopener noreferrer",target:"_blank"}),(0,x.jsx)("a",{...n})},pre:e=>{let{node:t,className:s,children:n,...a}=e;const o=r.Children.toArray(n).map((e=>{var t,s;return null===(t=/language-(\w+)/.exec((null===e||void 0===e||null===(s=e.props)||void 0===s?void 0:s.className)||""))||void 0===t?void 0:t[1]})).find(Boolean);return o?(0,x.jsxs)("div",{className:"code-example",children:[(0,x.jsx)("p",{className:"example-header",children:(0,x.jsx)("span",{className:"language-name",children:o})}),(0,x.jsx)("pre",{className:"brush: ".concat(o),children:n})]}):(0,x.jsx)("pre",{...a,className:s,children:n})},code:e=>{let{className:t,children:s,...n}=e;const r=/language-(\w+)/.exec(t||""),o=a().languages[null===r||void 0===r?void 0:r[1]];return o?(0,x.jsx)("code",{...n,className:t,dangerouslySetInnerHTML:{__html:a().highlight(String(s),o)}}):(0,x.jsx)("code",{...n,className:t,children:s})}},children:e.content.replace(z,J)}),"complete"===e.status&&!e.content.includes(z)&&(0,x.jsxs)(x.Fragment,{children:[e.sources&&e.sources.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{children:"MDN content that I've consulted that you might want to check:"}),(0,x.jsx)("ul",{children:e.sources.map(((e,t)=>{let{url:s,title:n}=e;return(0,x.jsx)("li",{children:(0,x.jsx)("a",{href:s,children:n})},t)}))})]}),(0,x.jsxs)("section",{className:"ai-help-feedback",children:[(0,x.jsx)(A,{feature:"ai-help-answer",question:"Was this answer useful?",upLabel:"Yes, this answer was useful.",downLabel:"No, this answer was not useful.",permanent:!0}),(0,x.jsx)(Y,{messages:R,currentMessage:e,children:"Report an issue with this answer on GitHub"})]})]})]})}),0===t&&(0,x.jsx)("div",{className:"ai-help-actions",children:(0,x.jsx)(I.z,{type:"action",isDisabled:K(E),extraClasses:"ai-help-reset-button",onClickHandler:()=>{k("".concat(m.RD,": reset")),g(""),w(!1),_(),window.setTimeout((()=>window.scrollTo(0,0)))},children:"+ New chat"})})]},t)))})}),L&&(0,x.jsxs)(q.Z,{extraClasses:"ai-help-error",type:"error",children:[(0,x.jsx)("h4",{children:"Error"}),(0,x.jsx)("p",{children:"An error occurred. Please try again."})]}),(0,x.jsxs)("div",{ref:n,className:"ai-help-footer",children:[(S||H)&&(0,x.jsxs)("div",{className:"ai-help-footer-actions",children:[(0,x.jsx)(I.z,{type:"action",extraClasses:"ai-help-stop-button",onClickHandler:()=>{k("".concat(m.RD,": stop")),O()},children:"\u23f9 Stop answering"}),(0,x.jsx)(I.z,{type:"action",isDisabled:$,extraClasses:"ai-help-scroll-button",onClickHandler:()=>Q(!0),children:"\u2193 Enable auto-scroll"})]}),K(E)?(0,x.jsx)(v,{limit:E.limit}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("form",{ref:e,className:"ai-help-input-form",onSubmit:e=>{e.preventDefault();const t=1+R.filter((e=>e.role===u.User)).length;k("".concat(m.RD,": submit ").concat(j?"example":"question"," ").concat(t)),f.trim()&&(F(f.trim()),g(""),w(!1),Q(!0))},children:[(0,x.jsx)("input",{ref:t,disabled:S||H,type:"text",onChange:e=>{g(e.target.value),w(!1)},value:f,placeholder:(V=S?"Requesting answer...":H?"Receiving answer...":"Ask your question",Z?"".concat(V," (").concat(E.remaining," ").concat(1===E.remaining?"question":"questions"," remaining today)"):V)}),(0,x.jsx)(I.z,{type:"action",icon:"send",buttonType:"submit",title:"Submit question",isDisabled:!f,children:(0,x.jsx)("span",{className:"visually-hidden",children:"Submit question"})})]}),(0,x.jsxs)("div",{className:"ai-help-footer-text",children:[(0,x.jsxs)("span",{children:["Results based on MDN's most recent documentation and powered by GPT-3.5, an LLM by"," ",(0,x.jsx)("a",{href:"https://platform.openai.com/docs/api-reference/models",className:"external",target:"_blank",rel:"noreferrer noopener",children:"OpenAI"}),". Please verify information independently as LLM responses may not be 100% accurate. Read our"," ",(0,x.jsx)(I.z,{type:"link",onClickHandler:()=>b(!0),children:"full guidance"})," ","for more details."]}),(0,x.jsxs)(P.Z,{isOpen:y,onRequestClose:()=>b(!1),children:[(0,x.jsxs)("header",{className:"modal-header",children:[(0,x.jsx)("h2",{className:"modal-heading",children:"AI Help Usage Guidance"}),(0,x.jsx)(I.z,{onClickHandler:()=>b(!1),type:"action",icon:"cancel",extraClasses:"close-button"})]}),(0,x.jsxs)("div",{className:"modal-body",children:[(0,x.jsxs)("p",{children:["Our AI Help feature employs GPT-3.5, a Large Language Model (LLM) developed by"," ",(0,x.jsx)("a",{href:"https://platform.openai.com/docs/api-reference/models",className:"external",target:"_blank",rel:"noreferrer noopener",children:"OpenAI"}),". While it's designed to offer helpful and relevant information drawn from MDN's comprehensive documentation, it's important to bear in mind that it is an LLM and may not produce perfectly accurate information in every circumstance."]}),(0,x.jsx)("p",{children:"We strongly advise all users to cross-verify the information generated by this AI Help feature, particularly for complex or critical topics. While we strive for accuracy and relevance, the nature of AI means that responses may vary in precision."}),(0,x.jsx)("p",{children:"The AI Help feature provides links at the end of its responses to support further reading and verification within the MDN documentation. These links are intended to facilitate deeper understanding and context."}),(0,x.jsx)("p",{children:"As you use the AI Help feature, keep in mind its nature as an LLM. It's not perfect, but it's here to assist you as best as it can. We're excited to have you try AI Help, and we hope it makes your MDN experience even better."})]})]})]})]})]}),!B&&!f&&!K(E)&&(0,x.jsxs)("section",{className:"ai-help-examples",children:[(0,x.jsx)("header",{children:"Examples"}),U.map(((e,s)=>{let{category:n,query:a}=e;return(0,x.jsx)("button",{type:"button",className:["ai-help-example","category-".concat(n)].join(" "),onClick:()=>{var e;k("".concat(m.RD,": example")),g(a),w(!0),null===(e=t.current)||void 0===e||e.focus(),window.setTimeout((()=>window.scrollTo(0,0)))},children:a},s)}))]}),"#debug"===N&&(0,x.jsx)("pre",{children:JSON.stringify(T,null,2)})]});var V}function W(e){let{role:t}=e;const s=(0,w.v$)();switch(t){case"user":return(0,x.jsx)(H.q,{userData:s});case"assistant":return(0,x.jsx)(k.J,{name:"chatgpt"})}}function Y(e){var t,s;let{messages:n,currentMessage:a,children:r}=e;const o=n.indexOf(a),i=n.slice(0,o).filter((e=>e.role===u.User)).map((e=>{let{content:t}=e;return t})),l=i.at(-1),c=new URL("https://github.com/");c.pathname="/".concat(E.NE,"/issues/new");const d=new URLSearchParams;return d.set("title","[AI Help] Question: ".concat(l)),d.set("questions",i.map((e=>"1. ".concat(e))).join("\n")),d.set("answer",a.content),d.set("sources",null!==(t=null===(s=a.sources)||void 0===s?void 0:s.map((e=>"- [".concat(e.title,"](https://developer.mozilla.org").concat(e.url,")"))).join("\n"))&&void 0!==t?t:"(None)"),d.set("template","ai-help-answer.yml"),c.search=d.toString(),(0,x.jsx)("a",{href:c.href,className:"external",title:"This will take you to GitHub to file a new issue.",target:"_blank",rel:"noopener noreferrer",children:r})}},119:(e,t,s)=>{s.d(t,{U:()=>i});var n=s(3493),a=s(8229),r=s(6509),o=s(7878);function i(e){let{children:t,className:s="login-banner",gleanPrefix:i}=e;const l=(0,r.J)(),c=(0,n.dY)();return(0,o.jsxs)("div",{className:s,children:[(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{children:t})," ",(0,o.jsxs)("strong",{children:["Upgrade to"," ",(0,o.jsx)("a",{className:"plus-link",href:l,onClick:()=>c("".concat(i,": banner-link")),children:"MDN Plus"})," ","for free."]})]}),(0,o.jsx)(a.P,{logInGleanContext:"".concat(i,": banner-login"),signUpGleanContext:"".concat(i,": banner-signup")})]})}}}]);
//# sourceMappingURL=400.e9cc2b32.chunk.js.map