{"version":3,"file":"static/js/507.003bb4be.chunk.js","mappings":"+MAgBe,SAASA,IACtB,MAAMC,GAAYC,EAAAA,EAAAA,OAIXC,EAASC,GAAcC,EAAAA,cAC5BC,GA+BF,OA1BAD,EAAAA,WAAgB,KACd,GAAIJ,EACF,IACE,MAAMM,EAAOC,aAAaC,QALK,oBAMzBC,EAAiBC,KAAKC,MAAML,GAAQ,MACpCM,EAAsB,GAC5B,IAAK,MAAMC,KAASJ,EAClBG,EAAWE,KAAK,CACdC,IAAKF,EAAME,IACXC,MAAOH,EAAMG,MACbC,UAAWJ,EAAMI,YAIrBd,EAAWS,EACb,CAAE,MAAOM,GAEPC,QAAQC,KACN,6DACAF,GAEFf,EAAW,KACb,CACF,GACC,CAACH,KAGFqB,EAAAA,EAAAA,MAAA,WACEC,GAAG,4BACH,kBAAgB,4BAA2BC,SAAA,EAE3CC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,mCACSlB,IAAZH,GACCsB,EAAAA,EAAAA,KAACC,EAAM,CAAAF,SAAC,sCACM,OAAZrB,GACFsB,EAAAA,EAAAA,KAACC,EAAM,CAAAF,SAAC,kCACNrB,EAAQwB,QACVL,EAAAA,EAAAA,MAAA,SAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAAD,UACEF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,cACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,eAGRC,EAAAA,EAAAA,KAAA,SAAAD,SACGrB,EAAQyB,KAAKC,IAEVP,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,UACEF,EAAAA,EAAAA,MAACQ,EAAAA,GAAI,CAACC,GAAIF,EAAMb,IAAIQ,SAAA,CACjBK,EAAMZ,MAAM,KAACQ,EAAAA,EAAAA,KAAA,SAAAD,SAAQK,EAAMb,YAGhCS,EAAAA,EAAAA,KAAA,MAAAD,SAAKQ,IAAM,IAAIC,KAAKJ,EAAMX,YAAYgB,cAN/BL,EAAMb,aAavBS,EAAAA,EAAAA,KAACC,EAAM,CAAAF,SAAC,iDAIhB,CAEA,SAASE,EAAMS,GAAgB,IAAf,SAAEX,GAAUW,EAC1B,OAAOV,EAAAA,EAAAA,KAAA,KAAGW,UAAU,eAAcZ,SAAEA,GACtC,CAvFAQ,IAAAA,OAAaK,I","sources":["writers-homepage/viewed-documents.tsx"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\n\nimport \"./viewed-documents.scss\";\nimport { usePageVisibility } from \"../hooks\";\n\ndayjs.extend(relativeTime);\n\ntype Entry = {\n  url: string;\n  title: string;\n  timestamp: number;\n};\n\nexport default function ViewedDocuments() {\n  const isVisible = usePageVisibility();\n  // undefined - list is still being loaded\n  // null - list could not be loaded (e.g., if localStorage is disabled)\n  // Entry[] - list was loaded (but could be empty)\n  const [entries, setEntries] = React.useState<Entry[] | null | undefined>(\n    undefined\n  );\n\n  const VIEWED_DOCUMENTS_STORAGE_KEY = \"viewed-documents\";\n\n  React.useEffect(() => {\n    if (isVisible) {\n      try {\n        const data = localStorage.getItem(VIEWED_DOCUMENTS_STORAGE_KEY);\n        const previousVisits = JSON.parse(data || \"[]\");\n        const newEntries: Entry[] = [];\n        for (const visit of previousVisits) {\n          newEntries.push({\n            url: visit.url,\n            title: visit.title,\n            timestamp: visit.timestamp,\n          });\n        }\n\n        setEntries(newEntries);\n      } catch (err) {\n        // If localStorage is not supported, there are no viewed documents\n        console.warn(\n          \"Failed to read recently viewed documents from localStorage\",\n          err\n        );\n        setEntries(null);\n      }\n    }\n  }, [isVisible]);\n\n  return (\n    <article\n      id=\"recently-viewed-documents\"\n      aria-labelledby=\"recently-viewed-documents\"\n    >\n      <h3>Recently viewed documents</h3>\n      {entries === undefined ? (\n        <Banner>Loading recently viewed documents</Banner>\n      ) : entries === null ? (\n        <Banner>This feature requires cookies</Banner>\n      ) : entries.length ? (\n        <table>\n          <thead>\n            <tr>\n              <th>Document</th>\n              <th>When</th>\n            </tr>\n          </thead>\n          <tbody>\n            {entries.map((entry) => {\n              return (\n                <tr key={entry.url}>\n                  <td>\n                    <Link to={entry.url}>\n                      {entry.title} <small>{entry.url}</small>\n                    </Link>\n                  </td>\n                  <td>{dayjs(new Date(entry.timestamp)).fromNow()}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      ) : (\n        <Banner>No recently viewed documents at the moment</Banner>\n      )}\n    </article>\n  );\n}\n\nfunction Banner({ children }) {\n  return <p className=\"notification\">{children}</p>;\n}\n"],"names":["ViewedDocuments","isVisible","usePageVisibility","entries","setEntries","React","undefined","data","localStorage","getItem","previousVisits","JSON","parse","newEntries","visit","push","url","title","timestamp","err","console","warn","_jsxs","id","children","_jsx","Banner","length","map","entry","Link","to","dayjs","Date","fromNow","_ref","className","relativeTime"],"sourceRoot":""}