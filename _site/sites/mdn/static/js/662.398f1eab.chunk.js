"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[662],{8662:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var s=n(6167),r=n(7798),o=n(5523),c=n(2974),l=n(5965),i=n(4001),a=n(7557),u=n(3444),h=n(3950),d=n(7878);function p(){const e=(0,r.TH)(),t=(0,r.s0)(),n=(0,i.bU)(),o=e.pathname.endsWith("/")?e.pathname.slice(0,-1):e.pathname,l=o.replace("/".concat(n,"/_sitemap"),"/".concat(n,"/docs")).toLowerCase();s.useEffect((()=>{document.title="Sitemap"}),[]);const{data:p,error:g}=(0,c.ZP)("/".concat(n,"/search-index.json"),(async e=>{const t=await fetch(e);if(!t.ok)throw new Error("".concat(t.status," on ").concat(t.url));return await t.json()}),{revalidateOnFocus:!1}),[w,E]=s.useState(null);s.useEffect((()=>{if(p){const e=[...p].sort(((e,t)=>e.url.localeCompare(t.url)));E(e)}}),[p]);const[y,k]=s.useState(new Map);s.useEffect((()=>{const e=new Map;if(w){for(const{url:t}of w){const n=t.split("/"),s=n.slice(0,3);n.slice(3).forEach(((t,n)=>{s.push(t);const r=s.join("/");e.set(r,(e.get(r)||0)+1)}))}k(e)}}),[w]);const[S,U]=s.useState(null);s.useEffect((()=>{if(w){const e=w.find((e=>e.url.toLowerCase()===l));U(e||null)}}),[l,w]);const[b,C]=s.useState("");s.useEffect((()=>{C("")}),[o]);const[v,N]=s.useState(!1),[F,L]=s.useState(null);s.useEffect((()=>{if(w){const e=l.split("/").length,t=w.filter((t=>{if(t.url.toLowerCase().startsWith(l)&&e+1===t.url.split("/").length){return!!t.url.split("/").slice(-1)[0].toLowerCase().startsWith(b.toLowerCase())}return!1}));L(t)}}),[l,w,b]);const[T,I]=s.useState(0);s.useEffect((()=>{I(0)}),[b]),s.useEffect((()=>{if(v&&F&&F.length>=1){const e=F[T].url.split("/").slice(3);C(""),N(!1),t("/".concat(n,"/_sitemap/").concat(e.join("/")))}}),[n,F,v,t,T]);const[D,_]=s.useState(null),[G,A]=s.useState(null);async function H(e){console.log("Going to try to open ".concat(e," in your editor")),_(e);const t=new URLSearchParams;t.set("url",e);try{const e=await fetch("/_open?".concat(t.toString()));if(!e.ok)if(e.status>=500)A(new Error("".concat(e.status,": ").concat(e.statusText)));else{const t=await e.text();A(new Error("".concat(e.status,": ").concat(t)))}}catch(n){A(n)}}return s.useEffect((()=>{let e;return D&&(e=setTimeout((()=>{_(null)}),3e3)),()=>{e&&clearTimeout(e)}}),[D]),(0,d.jsx)(u.Z,{children:(0,d.jsxs)("div",{id:"sitemap",children:[g&&(0,d.jsxs)(h.Z,{type:"error",children:[(0,d.jsx)("h4",{children:"Error"}),(0,d.jsx)("p",{children:(0,d.jsx)("code",{children:g.toString()})})]}),G&&(0,d.jsxs)(h.Z,{type:"error",children:[(0,d.jsx)("h4",{children:"Error opening in your editor"}),(0,d.jsx)("p",{children:(0,d.jsx)("code",{children:G.toString()})})]}),!p&&!g&&(0,d.jsx)(a.g,{}),(0,d.jsx)("div",{className:"opening-in-your-editor",children:D&&(0,d.jsxs)(d.Fragment,{children:["Opening"," ",(0,d.jsx)("code",{children:D.slice(D.length-50,D.length)})," ","in your editor..."]})}),F&&(0,d.jsx)(m,{pathname:o,thisDoc:S,openInYourEditor:H}),F&&(0,d.jsx)(j,{pathname:o,searchFilter:b,onUpdate:(e,t)=>{C(e),N(t)},onGoUp:()=>{const e=o.split("/");if(e.length>=4){const n=e.slice(0,-1);t(n.join("/"))}},onChangeHighlight:function(e){if("up"===e){let e=T-1;F&&(e=(e%F.length+F.length)%F.length),I(e)}else{let e=T+1;F&&(e%=F.length),I(e)}}}),F&&0===F.length&&(b?(0,d.jsx)("em",{children:"nothing found"}):(0,d.jsx)("em",{children:"has no further sub-documents"})),F&&!b&&(0,d.jsx)(f,{pathname:o}),F&&F.length>0&&(0,d.jsx)(x,{filtered:F,childCounts:y,highlightIndex:T,openInYourEditor:H}),(0,d.jsx)("p",{className:"footer-note",children:"Note, this sitemap only shows documents. Not any other applications."})]})})}function f(e){let{pathname:t}=e;const n=t.split("/").slice(0,-1);if(n.length<=2)return null;const s=n[n.length-1];return(0,d.jsx)("p",{children:(0,d.jsxs)(o.rU,{to:n.join("/"),children:["\u2196\ufe0f Back up to"," ",n.length<=3?(0,d.jsx)("em",{children:"root"}):(0,d.jsx)("code",{children:s})]})})}function j(e){let{pathname:t,searchFilter:n,onUpdate:r,onGoUp:o,onChangeHighlight:c}=e;const[l,i]=s.useState(!1),[a,u]=s.useState(0);s.useEffect((()=>{a>=2&&(u(0),o())}),[a,o]);const h=s.useRef(null),p=s.useCallback((e=>{if(h.current&&e.target){const t=e.target;t===h.current&&("ArrowDown"===e.key?c("down"):"ArrowUp"===e.key&&c("up")),"INPUT"===t.tagName||"TEXTAREA"===t.tagName?("Backspace"===e.key&&e.target===h.current?n.trim()||u((e=>e+1)):u(0),"Escape"===e.key&&h.current.blur()):"T"!==e.key&&"t"!==e.key||(h.current.focus(),u(0))}}),[c,n]);s.useEffect((()=>(window.document.addEventListener("keyup",p),()=>{window.document.removeEventListener("keyup",p)})),[p]);const f=t.replace("/_sitemap","/docs");return(0,d.jsxs)("form",{className:"filter-form",onSubmit:e=>{e.preventDefault(),r(n.trim(),!0)},children:[(0,d.jsx)("code",{children:f}),"/",(0,d.jsx)("input",{type:"search",ref:h,value:n,onChange:e=>{r(e.target.value,!1)},onFocus:()=>{i(!0)},onBlur:()=>{i(!1)}})," ",!l&&(0,d.jsxs)("small",{className:"keyboard-tip",children:["Tip! press ",(0,d.jsx)("kbd",{children:"t"})," on your keyboard to focus on search filter"]})]})}function m(e){let{pathname:t,thisDoc:n,openInYourEditor:s}=e;const r=(0,i.bU)(),c=t.split("/").slice(3),a=t.split("/").slice(0,2);a.push("_sitemap");const u=!l.Fj.includes(window.location.hostname);return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("ul",{className:"breadcrumb",children:[(0,d.jsx)("li",{className:"first",children:c.length?(0,d.jsx)(o.rU,{to:a.join("/"),children:"root"}):(0,d.jsx)("em",{children:"root"})}),c.map(((e,t)=>{const n=t===c.length-1;return a.push(e),(0,d.jsx)("li",{className:n?"last":void 0,children:n?(0,d.jsx)("code",{children:e}):(0,d.jsx)(o.rU,{to:a.join("/"),children:(0,d.jsx)("code",{children:e})})},"".concat(e).concat(t))})),(0,d.jsxs)("li",{className:"this-doc",children:[(0,d.jsx)("b",{children:"Go to:"})," ",n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.rU,{to:n.url,children:(0,d.jsx)("em",{children:n.title})})," ",l.Xq&&!u&&(0,d.jsxs)("small",{children:["(",(0,d.jsx)("a",{href:n.url,role:"img","aria-label":"Editor pen",onClick:e=>{e.preventDefault(),s(n.url)},title:"Open in your editor",children:"Edit"}),")"]})]}):(0,d.jsx)(o.rU,{to:"/".concat(r,"/"),children:"Home page"})]})]})})}function x(e){let{filtered:t,childCounts:n,highlightIndex:s,openInYourEditor:r}=e;const c=(0,i.bU)(),a=!l.Fj.includes(window.location.hostname);return(0,d.jsx)("div",{className:"tree",children:(0,d.jsx)("ul",{children:t.map(((e,t)=>{const l=n.get(e.url)||0;return(0,d.jsxs)("li",{className:s===t?"highlight":void 0,children:[(0,d.jsx)(o.rU,{to:e.url.replace("/docs/","/_sitemap/"),title:e.title,children:(0,d.jsx)("code",{children:e.url.replace("/".concat(c,"/docs"),"")})})," ",(0,d.jsxs)("small",{children:["(",1===l?"1 document":"".concat(l.toLocaleString()," documents")," | ",(0,d.jsx)(o.rU,{to:e.url,title:"Go to: ".concat(e.title),children:"View"}),!a&&" | ",!a&&(0,d.jsx)(o.rU,{to:e.url,title:"Edit: ".concat(e.title),onClick:t=>{t.preventDefault(),r(e.url)},children:"Edit"}),")"]})]},e.url)}))})})}}}]);
//# sourceMappingURL=662.398f1eab.chunk.js.map