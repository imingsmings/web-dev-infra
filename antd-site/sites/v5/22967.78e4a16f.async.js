"use strict";(self.webpackChunkantd=self.webpackChunkantd||[]).push([[22967],{722967:function(Lt,Fe,d){d.d(Fe,{Z:function(){return it}});var ne=d(487462),$=d(601413),C=d(297685),re=d(912402),$e=d(294184),Le=d.n($e),Ke=d(267656),Ae=d(491304),De=d(850344),Be=d(821770),h=d(915105),Kt=d(580334),r=d(667294);function ke(){var e=(0,r.useState)({id:0,callback:null}),t=(0,C.Z)(e,2),s=t[0],u=t[1],i=(0,r.useCallback)(function(f){u(function(o){var v=o.id;return{id:v+1,callback:f}})},[]);return(0,r.useEffect)(function(){var f;(f=s.callback)===null||f===void 0||f.call(s)},[s]),i}var je=d(440228),U=d(72512),Ue=r.createContext(null),ae=Ue;function Ve(e){var t=r.useContext(ae),s=t.notFoundContent,u=t.activeIndex,i=t.setActiveIndex,f=t.selectOption,o=t.onFocus,v=t.onBlur,x=e.prefixCls,m=e.options,S=m[u]||{};return r.createElement(U.ZP,{prefixCls:"".concat(x,"-menu"),activeKey:S.key,onSelect:function(w){var E=w.key,g=m.find(function(y){var N=y.key;return N===E});f(g)},onFocus:o,onBlur:v},m.map(function(p,w){var E=p.key,g=p.disabled,y=p.className,N=p.style,L=p.label;return r.createElement(U.sN,{key:E,disabled:g,className:y,style:N,onMouseEnter:function(){i(w)}},L)}),!m.length&&r.createElement(U.sN,{disabled:!0},s))}var We=Ve,Xe={bottomRight:{points:["tl","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomLeft:{points:["tr","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topRight:{points:["bl","tr"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["br","tl"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}}},Ye=function(t){var s=t.prefixCls,u=t.options,i=t.children,f=t.visible,o=t.transitionName,v=t.getPopupContainer,x=t.dropdownClassName,m=t.direction,S=t.placement,p="".concat(s,"-dropdown"),w=r.createElement(We,{prefixCls:p,options:u}),E=(0,r.useMemo)(function(){var g;return m==="rtl"?g=S==="top"?"topLeft":"bottomLeft":g=S==="top"?"topRight":"bottomRight",g},[m,S]);return r.createElement(je.Z,{prefixCls:p,popupVisible:f,popup:w,popupPlacement:E,popupTransitionName:o,builtinPlacements:Xe,getPopupContainer:v,popupClassName:x},i)},ze=Ye,He=function(){return null},Qe=He;function Ge(e){var t=e.selectionStart;return e.value.slice(0,t)}function Je(e,t){return t.reduce(function(s,u){var i=e.lastIndexOf(u);return i>s.location?{location:i,prefix:u}:s},{location:-1,prefix:""})}function oe(e){return(e||"").toLowerCase()}function qe(e,t,s){var u=e[0];if(!u||u===s)return e;for(var i=e,f=t.length,o=0;o<f;o+=1)if(oe(i[o])!==oe(t[o])){i=i.slice(o);break}else o===f-1&&(i=i.slice(f));return i}function _e(e,t){var s=t.measureLocation,u=t.prefix,i=t.targetText,f=t.selectionStart,o=t.split,v=e.slice(0,s);v[v.length-o.length]===o&&(v=v.slice(0,v.length-o.length)),v&&(v="".concat(v).concat(o));var x=qe(e.slice(f),i.slice(f-s-u.length),o);x.slice(0,o.length)===o&&(x=x.slice(o.length));var m="".concat(v).concat(u).concat(i).concat(o);return{text:"".concat(m).concat(x),selectionLocation:m.length}}function et(e,t){e.setSelectionRange(t,t),e.blur(),e.focus()}function tt(e,t){return!t||e.indexOf(t)===-1}function nt(e,t){var s=t.value,u=s===void 0?"":s,i=e.toLowerCase();return u.toLowerCase().indexOf(i)!==-1}var rt=["prefixCls","className","style","prefix","split","notFoundContent","value","defaultValue","children","options","open","validateSearch","filterOption","onChange","onKeyDown","onKeyUp","onPressEnter","onSearch","onSelect","onFocus","onBlur","transitionName","placement","direction","getPopupContainer","dropdownClassName","rows"],at=["suffix","prefixCls","classes","value"],ot=(0,r.forwardRef)(function(e,t){var s=e.prefixCls,u=s===void 0?"rc-mentions":s,i=e.className,f=e.style,o=e.prefix,v=o===void 0?"@":o,x=e.split,m=x===void 0?" ":x,S=e.notFoundContent,p=S===void 0?"Not Found":S,w=e.value,E=e.defaultValue,g=e.children,y=e.options,N=e.open,L=e.validateSearch,ie=L===void 0?tt:L,se=e.filterOption,V=se===void 0?nt:se,W=e.onChange,X=e.onKeyDown,Y=e.onKeyUp,ue=e.onPressEnter,ce=e.onSearch,z=e.onSelect,fe=e.onFocus,H=e.onBlur,st=e.transitionName,ut=e.placement,ct=e.direction,ft=e.getPopupContainer,vt=e.dropdownClassName,ve=e.rows,dt=ve===void 0?1:ve,mt=(0,re.Z)(e,rt),K=(0,r.useMemo)(function(){return Array.isArray(v)?v:[v]},[v]),O=(0,r.useRef)(null),Q=(0,r.useRef)(null),G=function(){var n,a;return(n=O.current)===null||n===void 0||(a=n.resizableTextArea)===null||a===void 0?void 0:a.textArea};r.useImperativeHandle(t,function(){var c,n;return{focus:function(){var l;return(l=O.current)===null||l===void 0?void 0:l.focus()},blur:function(){var l;return(l=O.current)===null||l===void 0?void 0:l.blur()},textarea:(c=O.current)===null||c===void 0||(n=c.resizableTextArea)===null||n===void 0?void 0:n.textArea}});var xt=(0,r.useState)(!1),de=(0,C.Z)(xt,2),A=de[0],me=de[1],pt=(0,r.useState)(""),xe=(0,C.Z)(pt,2),pe=xe[0],ge=xe[1],gt=(0,r.useState)(""),Ce=(0,C.Z)(gt,2),he=Ce[0],Ct=Ce[1],ht=(0,r.useState)(0),Se=(0,C.Z)(ht,2),ye=Se[0],we=Se[1],St=(0,r.useState)(0),Ee=(0,C.Z)(St,2),J=Ee[0],q=Ee[1],yt=(0,r.useState)(!1),Ie=(0,C.Z)(yt,2),wt=Ie[0],Me=Ie[1],Et=(0,Be.default)("",{defaultValue:E,value:w}),Ne=(0,C.Z)(Et,2),P=Ne[0],It=Ne[1];(0,r.useEffect)(function(){A&&Q.current&&(Q.current.scrollTop=G().scrollTop)},[A]);var Mt=r.useMemo(function(){if(N)for(var c=0;c<K.length;c+=1){var n=K[c],a=P.lastIndexOf(n);if(a>=0)return[!0,"",n,a]}return[A,pe,he,ye]},[N,A,K,P,pe,he,ye]),D=(0,C.Z)(Mt,4),Z=D[0],_=D[1],B=D[2],ee=D[3],te=r.useCallback(function(c){var n;return y&&y.length>0?n=y.map(function(a){var l;return(0,$.Z)((0,$.Z)({},a),{},{key:(l=a==null?void 0:a.key)!==null&&l!==void 0?l:a.value})}):n=(0,De.Z)(g).map(function(a){var l=a.props,I=a.key;return(0,$.Z)((0,$.Z)({},l),{},{label:l.children,key:I||l.value})}),n.filter(function(a){return V===!1?!0:V(c,a)})},[g,y,V]),k=r.useMemo(function(){return te(_)},[te,_]),Nt=ke(),Pt=function(n,a,l){me(!0),ge(n),Ct(a),we(l),q(0)},T=function(n){me(!1),we(0),ge(""),Nt(n)},Pe=function(n){It(n),W==null||W(n)},Zt=function(n){var a=n.target.value;Pe(a)},Ze=function(n){var a,l=n.value,I=l===void 0?"":l,M=_e(P,{measureLocation:ee,targetText:I,prefix:B,selectionStart:(a=G())===null||a===void 0?void 0:a.selectionStart,split:m}),b=M.text,R=M.selectionLocation;Pe(b),T(function(){et(G(),R)}),z==null||z(n,B)},Tt=function(n){var a=n.which;if(X==null||X(n),!!Z){if(a===h.Z.UP||a===h.Z.DOWN){var l=k.length,I=a===h.Z.UP?-1:1,M=(J+I+l)%l;q(M),n.preventDefault()}else if(a===h.Z.ESC)T();else if(a===h.Z.ENTER){if(n.preventDefault(),!k.length){T();return}var b=k[J];Ze(b)}}},bt=function(n){var a=n.key,l=n.which,I=n.target,M=Ge(I),b=Je(M,K),R=b.location,j=b.prefix;if(Y==null||Y(n),[h.Z.ESC,h.Z.UP,h.Z.DOWN,h.Z.ENTER].indexOf(l)===-1)if(R!==-1){var F=M.slice(R+j.length),Re=ie(F,m),$t=!!te(F).length;Re?(a===j||a==="Shift"||Z||F!==_&&$t)&&Pt(F,j,R):Z&&T(),ce&&Re&&ce(F,j)}else Z&&T()},Ot=function(n){!Z&&ue&&ue(n)},Te=(0,r.useRef)(),be=function(n){window.clearTimeout(Te.current),!wt&&n&&fe&&fe(n),Me(!0)},Oe=function(n){Te.current=window.setTimeout(function(){Me(!1),T(),H==null||H(n)},0)},Rt=function(){be()},Ft=function(){Oe()};return r.createElement("div",{className:Le()(u,i),style:f},r.createElement(Ae.Z,(0,ne.Z)({ref:O,value:P},mt,{rows:dt,onChange:Zt,onKeyDown:Tt,onKeyUp:bt,onPressEnter:Ot,onFocus:be,onBlur:Oe})),Z&&r.createElement("div",{ref:Q,className:"".concat(u,"-measure")},P.slice(0,ee),r.createElement(ae.Provider,{value:{notFoundContent:p,activeIndex:J,setActiveIndex:q,selectOption:Ze,onFocus:Rt,onBlur:Ft}},r.createElement(ze,{prefixCls:u,transitionName:st,placement:ut,direction:ct,options:k,visible:!0,getPopupContainer:ft,dropdownClassName:vt},r.createElement("span",null,B))),P.slice(ee+B.length)))}),le=(0,r.forwardRef)(function(e,t){var s=e.suffix,u=e.prefixCls,i=e.classes,f=e.value,o=(0,re.Z)(e,at);return r.createElement(Ke.Q,{inputElement:r.createElement(ot,(0,ne.Z)({prefixCls:u,ref:t},o)),suffix:s,prefixCls:u,classes:i,value:f})});le.Option=Qe;var lt=le,it=lt}}]);
